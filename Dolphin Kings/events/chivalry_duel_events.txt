namespace = CHI

#######FG Rank up duels
character_event = {
	id = CHI.310
	desc = EVTDESC_CHI_310
	picture = GFX_evt_armory
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	trigger = {
		society = {
			any_society_member = {
				chivalry_valid_target = yes
				OR = {
					AND = {
						OR = {
							NOT = { has_character_flag = chivalry_recent_duel }
							had_character_flag = { flag = chivalry_recent_duel days = 500 }
							AND = {
								had_character_flag = { flag = chivalry_recent_duel days = 365 }
								AI = yes
							}
						}
						society_rank == 2
						ROOT = { society_rank == 1 }
					}
					AND = {
						OR = {
							NOT = { has_character_flag = chivalry_recent_duel }
							had_character_flag = { flag = chivalry_recent_duel days = 500 }
							AND = {
								had_character_flag = { flag = chivalry_recent_duel days = 365 }
								AI = yes
							}
						}
						society_rank == 3
						ROOT = { society_rank == 2 }
					}
					AND = {
						OR = {
							NOT = { has_character_flag = chivalry_recent_duel }
							AND = {
								had_character_flag = { flag = chivalry_recent_duel days = 180 }
								# society_rank == 4
								AI = no
							}
							AND = {
								had_character_flag = { flag = chivalry_recent_duel days = 90 }
								# society_rank == 4
								AI = yes
							}
						}
						OR = {
							society_rank == 4
							NOT = {
								society = {
									any_society_member = {
										is_society_grandmaster = yes
									}
								}
							}
						}
						ROOT = { society_rank == 3 }
					}
				}
			}
		}
	}
	
	fail_trigger_effect = {
		clr_character_flag = chivalry_block_currency
		clr_character_flag = has_sent_request_to_rank_up
	}
	
	immediate = {
		set_character_flag = chivalry_block_currency
	}
	option = { #Fight
		name = EVTOPTA_CHI_310 
		hidden_tooltip = {
			ROOT = { set_variable = { which = chivalry_duel value = 0 } }
			set_character_flag = chivalry_rank_up_pretender
			save_event_target_as = chivalry_rank_up_pretender
			clr_character_flag = chivalry_recent_duel
			set_character_flag = chivalry_recent_duel
			chivalry_duel_cleaning = yes
			society = {
				random_society_member = {
					limit = {
						chivalry_valid_target = yes
						OR = {
							AND = {
								OR = {
									NOT = { has_character_flag = chivalry_recent_duel }
									had_character_flag = { flag = chivalry_recent_duel days = 500 }
									AND = {
										had_character_flag = { flag = chivalry_recent_duel days = 365 }
										AI = yes
									}
								}
								society_rank == 2
								ROOT = { society_rank == 1 }
							}
							AND = {
								OR = {
									NOT = { has_character_flag = chivalry_recent_duel }
									had_character_flag = { flag = chivalry_recent_duel days = 500 }
									AND = {
										had_character_flag = { flag = chivalry_recent_duel days = 365 }
										AI = yes
									}
								}
								society_rank == 3
								ROOT = { society_rank == 2 }
							}
							AND = {
								OR = {
									NOT = { has_character_flag = chivalry_recent_duel }
									AND = {
										had_character_flag = { flag = chivalry_recent_duel days = 180 }
										# society_rank == 4
										AI = no
									}
									AND = {
										had_character_flag = { flag = chivalry_recent_duel days = 90 }
										# society_rank == 4
										AI = yes
									}
								}
								OR = {
									society_rank == 4
									NOT = {
										society = {
											any_society_member = {
												is_society_grandmaster = yes
											}
										}
									}
								}
								ROOT = { society_rank == 3 }
							}
						}
					}
					preferred_limit = { NOT = { trait = wounded } }
					chivalry_duel_cleaning = yes
					clr_character_flag = chivalry_recent_duel
					set_character_flag = chivalry_recent_duel
					set_character_flag = chivalry_rank_up_foe
					save_event_target_as = chivalry_rank_up_foe
					set_variable = { which = chivalry_duel value = 0 }
					character_event = { id = CHI.3101 }
				}
			}
		}
	}
	option = { #Skip
		name = EVTOPTB_CHI_310 
		trigger = {
			ai = no
			OR = {
				AND = {
					society_rank == 1
					society_currency = 1000
					prestige = 250
				}
				AND = {
					society_rank == 2
					society_currency = 2000
					prestige = 500
				}
			}
		}
		# Rank up cost, does nothing is not meant
		if = {
			limit = { society_rank == 1 }
			change_society_currency = -1000
			prestige = -250
			save_event_target_as = rank_up_target #mark the character as the one ranking up
			character_event = { id = CHI.110 days = 20 random = 10 } # sends hidden delayed event to self, which then sends request to Leader of the society
		}
		if = {
			limit = { society_rank == 2 }
			change_society_currency = -2000
			prestige = -500
			save_event_target_as = rank_up_target #mark the character as the one ranking up
			character_event = { id = CHI.110 days = 20 random = 10 } # sends hidden delayed event to self, which then sends request to Leader of the society
		}
	}
	option = { #Nothing
		name = EVTOPTC_CHI_310
		clr_character_flag = has_sent_request_to_rank_up
		
		ai_chance = { 
			factor = 0
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel receive challenge
character_event = {
	id = CHI.3101
	desc = EVTDESC_CHI_3101
	picture = GFX_evt_poke_king_in_chest
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #En guard!
		name = EVTOPTA_CHI_3101
		if = {
			limit = {
				society_rank == 4
				NOT = {
					any_owned_bloodline = {
						has_bloodline_flag = champion
					}
				}
			}
			custom_tooltip = { text = chivalry_champion_bloodline_tooltip }
		}
		custom_tooltip = { text = chivalry_duel_tutorial }
		set_character_flag = chivalry_duel_ongoing
		FROM = { set_character_flag = chivalry_duel_ongoing }
		FROM = { character_event = { id = CHI.3102 } }
	}
	option = { #NOPE
		name = EVTOPTB_CHI_3101
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.3291 } }
		}
		custom_tooltip = {
			text = chivalry_rank_down_tooltip
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 0.3
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0
				society_rank == 4
			}
		}
	}
	option = { #SKIP
		name = EVTOPTC_CHI_3101
		trigger = { ai = no }
		chivalry_skip_duel = yes
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - start
character_event = {
	id = CHI.3102
	# desc = EVTDESC_CHI_3102
	picture = GFX_evt_armory
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			OR = {
				society_rank == 1
				society_rank == 2
			}
		}
		text = EVTDESC_CHI_3102_1_2
	}
	
	desc = {
		trigger = {
			society_rank == 3
		}
		text = EVTDESC_CHI_3102_3
	}
	
	is_triggered_only = yes
	
	option = { #En guard!
		name = EVTOPTA_CHI_3102
		custom_tooltip = { text = chivalry_duel_tutorial }
		hidden_tooltip = {
			random_list = {
				2 = { FROM = { character_event = { id = CHI.3119 } } } #Root will attack first, ping
				2 = { FROM = { character_event = { id = CHI.311 } } }
			}
		}
	}
	
	option = { #En guard!
		name = EVTOPTB_CHI_3102
		trigger = { ai = no }
		chivalry_skip_duel = yes
	}
}

#ATTACKS *STANCES
#311 = turtle *
#311 = close *
#311 = scream *
#311 = blind *
#312 = swing
#313 = lunge
#314 = flail
#315 = aim
#316 = jump
#317 = try to backstab
#318 = head
#319 = timid
#
#REACTIONS
#320 = Opportunities
#321 = Miss
#322 = Hit
#323 = Stuns
#
#ENDS
#326 = death
#327 = win
#328 = lose
#329 = yield

#FG Rank up duel - attack
character_event = {
	id = CHI.311
	# desc = EVTDESC_CHI_311
	# picture = GFX_evt_duel_scene
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	desc = {
		trigger = {
			NOR = {
				FROM = { has_character_flag = chivalry_duel_turtle }
				FROM = { has_character_flag = chivalry_duel_close }
				FROM = { has_character_flag = chivalry_duel_scream }
			}
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
		}
		text = EVTDESC_CHI_311_BASE
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_duel_turtle }
			FROM = { NOT = { has_character_flag = chivalry_duel_blind } }
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
		}
		text = EVTDESC_CHI_311_TURTLE
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_duel_close }
			FROM = { NOT = { has_character_flag = chivalry_duel_blind } }
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
		}
		text = EVTDESC_CHI_311_CLOSE
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_duel_scream }
			FROM = { NOT = { has_character_flag = chivalry_duel_blind } }
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
		}
		text = EVTDESC_CHI_311_SCREAM
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_duel_blind }
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
		}
		text = EVTDESC_CHI_311_BLIND
	}
	
	desc = {
		trigger = {
			has_character_flag = chivalry_duel_wounded
			trait = wounded
		}
		text = EVTDESC_CHI_311_WOUNDED
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded	
			}
			set_character_flag = chivalry_block_currency
		}
		if = {
			limit = {
				FROM = { has_character_flag = chivalry_duel_turtle }
				FROM = { NOT = { has_character_flag = chivalry_duel_blind } }
			}
			sound_effect = declare_war
		}
		if = {
			limit = {
				FROM = { has_character_flag = chivalry_duel_close }
				FROM = { NOT = { has_character_flag = chivalry_duel_blind } }
			}
			sound_effect = army_move
		}
		if = {
			limit = {
				FROM = { has_character_flag = chivalry_duel_scream }
				FROM = { NOT = { has_character_flag = chivalry_duel_blind } }
			}
			if = {
				limit = {
					FROM = { is_female = no }
				}
				sound_effect = male_violent_death_04
			}
			if = {
				limit = {
					FROM = { is_female = yes }
				}
				sound_effect = female_violent_death_03
			}
		}
		if = {
			limit = {
				FROM = { has_character_flag = chivalry_duel_blind }
			}
			sound_effect = monastic_orders_penance
		}
		#Attack selection
		random_list = {#Slot 1
			5 = { #turtle
				modifier = {
					factor = 2
					OR = {
						trait = defensive_leader
						trait = heavy_infantry_leader
						trait = unyielding_leader
					}
				}
				modifier = {
					factor = 2
					trait = craven
				}
				modifier = {
					factor = 2
					trait = patient
				}
				modifier = {
					factor = 2
					trait = slothful
				}
				modifier = {
					factor = 2
					trait = shy
				}
				modifier = {
					factor = 2
					trait = stubborn
				}
				set_character_flag = chivalry_duel_1_1
			}
			5 = { #close
				modifier = {
					factor = 2
					OR = {
						trait = aggressive_leader
						trait = cavalry_leader
						trait = experimenter
					}
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 2
					trait = wroth
				}
				modifier = {
					factor = 2
					trait = slothful
				}
				modifier = {
					factor = 2
					trait = cruel
				}
				modifier = {
					factor = 2
					trait = ambitious
				}
				set_character_flag = chivalry_duel_1_2
			}
			5 = { #scream
				modifier = {
					factor = 2
					OR = {
						trait = viking
						trait = ravager
						trait = seaking
						trait = sea_queen
						trait = berserker
					}
				}
				modifier = {
					factor = 2
					trait = inspiring_leader
				}
				modifier = {
					factor = 2
					trait = proud
				}
				modifier = {
					factor = 2
					trait = zealous
				}
				modifier = {
					factor = 2
					trait = honest
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				set_character_flag = chivalry_duel_1_3
			}
			5 = { #blind
				modifier = {
					factor = 10
					trait = blinded
				}
				modifier = {
					factor = 2
					trait = zealous
				}
				modifier = {
					factor = 2
					trait = trusting
				}
				modifier = {
					factor = 2
					trait = brave
				}
				#maybe 2 more modifier
				set_character_flag = chivalry_duel_1_4
			}
		}
		random_list = {#Slot 2
			5 = { #Swing
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_1
				}
				modifier = {
					factor = 2
					trait = temperate
				}
				modifier = {
					factor = 2
					trait = honest
				}
				modifier = {
					factor = 2
					trait = just
				}
				set_character_flag = chivalry_duel_2_1
			}
			5 = { #Lunge
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_2
				}
				modifier = {
					factor = 2
					trait = wroth
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				set_character_flag = chivalry_duel_2_2
			}
			5 = { #Flail
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_3
				}
				modifier = {
					factor = 2
					trait = craven
				}
				modifier = {
					factor = 2
					trait = paranoid
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				set_character_flag = chivalry_duel_2_3
			}
			5 = { #Aim
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_4
				}
				modifier = {
					factor = 2
					trait = diligent
				}
				modifier = {
					factor = 2
					trait = patient
				}
				modifier = {
					factor = 0.2
					trait = blinded
				}
				set_character_flag = chivalry_duel_2_4
			}
			5 = { #Jump
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_5
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 2
					trait = wroth
				}
				modifier = {
					factor = 2
					trait = ambitious
				}
				set_character_flag = chivalry_duel_2_5
			}
			5 = { #Back
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_6
				}
				modifier = {
					factor = 2
					trait = deceitful
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				modifier = {
					factor = 2
					trait = envious
				}
				set_character_flag = chivalry_duel_2_6
			}
			5 = { #Head
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_7
				}
				modifier = {
					factor = 2
					trait = deceitful
				}
				modifier = {
					factor = 2
					trait = diligent
				}
				modifier = {
					factor = 2
					trait = cruel
				}
				set_character_flag = chivalry_duel_2_7
			}
			5 = { #Timid
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_8
				}
				modifier = {
					factor = 2
					trait = shy
				}
				modifier = {
					factor = 2
					trait = erudite
				}
				modifier = {
					factor = 2
					trait = kind
				}
				set_character_flag = chivalry_duel_2_8
			}
		}
		random_list = {#Slot 3
			5 = { #Swing
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_1
				}
				modifier = {
					factor = 2
					trait = temperate
				}
				modifier = {
					factor = 2
					trait = honest
				}
				modifier = {
					factor = 2
					trait = just
				}
				set_character_flag = chivalry_duel_2_1
			}
			5 = { #Lunge
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_2
				}
				modifier = {
					factor = 2
					trait = wroth
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				set_character_flag = chivalry_duel_2_2
			}
			5 = { #Flail
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_3
				}
				modifier = {
					factor = 2
					trait = craven
				}
				modifier = {
					factor = 2
					trait = paranoid
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				set_character_flag = chivalry_duel_2_3
			}
			5 = { #Aim
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_4
				}
				modifier = {
					factor = 2
					trait = diligent
				}
				modifier = {
					factor = 2
					trait = patient
				}
				modifier = {
					factor = 0.2
					trait = blinded
				}
				set_character_flag = chivalry_duel_2_4
			}
			5 = { #Jump
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_5
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 2
					trait = wroth
				}
				modifier = {
					factor = 2
					trait = ambitious
				}
				set_character_flag = chivalry_duel_2_5
			}
			5 = { #Back
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_6
				}
				modifier = {
					factor = 2
					trait = deceitful
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				modifier = {
					factor = 2
					trait = envious
				}
				set_character_flag = chivalry_duel_2_6
			}
			5 = { #Head
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_7
				}
				modifier = {
					factor = 2
					trait = deceitful
				}
				modifier = {
					factor = 2
					trait = diligent
				}
				modifier = {
					factor = 2
					trait = cruel
				}
				set_character_flag = chivalry_duel_2_7
			}
			5 = { #Timid
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_8
				}
				modifier = {
					factor = 2
					trait = shy
				}
				modifier = {
					factor = 2
					trait = erudite
				}
				modifier = {
					factor = 2
					trait = kind
				}
				set_character_flag = chivalry_duel_2_8
			}
		}
		random_list = {#Slot 4
			5 = { #Swing
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_1
				}
				modifier = {
					factor = 2
					trait = temperate
				}
				modifier = {
					factor = 2
					trait = honest
				}
				modifier = {
					factor = 2
					trait = just
				}
				set_character_flag = chivalry_duel_2_1
			}
			5 = { #Lunge
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_2
				}
				modifier = {
					factor = 2
					trait = wroth
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				set_character_flag = chivalry_duel_2_2
			}
			5 = { #Flail
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_3
				}
				modifier = {
					factor = 2
					trait = craven
				}
				modifier = {
					factor = 2
					trait = paranoid
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				set_character_flag = chivalry_duel_2_3
			}
			5 = { #Aim
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_4
				}
				modifier = {
					factor = 2
					trait = diligent
				}
				modifier = {
					factor = 2
					trait = patient
				}
				modifier = {
					factor = 0.2
					trait = blinded
				}
				set_character_flag = chivalry_duel_2_4
			}
			5 = { #Jump
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_5
				}
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 2
					trait = wroth
				}
				modifier = {
					factor = 2
					trait = ambitious
				}
				set_character_flag = chivalry_duel_2_5
			}
			5 = { #Back
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_6
				}
				modifier = {
					factor = 2
					trait = deceitful
				}
				modifier = {
					factor = 2
					trait = arbitrary
				}
				modifier = {
					factor = 2
					trait = envious
				}
				set_character_flag = chivalry_duel_2_6
			}
			5 = { #Head
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_7
				}
				modifier = {
					factor = 2
					trait = deceitful
				}
				modifier = {
					factor = 2
					trait = diligent
				}
				modifier = {
					factor = 2
					trait = cruel
				}
				set_character_flag = chivalry_duel_2_7
			}
			5 = { #Timid
				modifier = {
					factor = 0
					has_character_flag = chivalry_duel_2_8
				}
				modifier = {
					factor = 2
					trait = shy
				}
				modifier = {
					factor = 2
					trait = erudite
				}
				modifier = {
					factor = 2
					trait = kind
				}
				set_character_flag = chivalry_duel_2_8
			}
		}
	}
	
	option = { #Turtle = factor 2 normals
		name = EVTOPTA_CHI_311
		trigger = { #slot 1
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_1_1
			NOR = {
				FROM = { has_character_flag = chivalry_duel_turtle }
				FROM = { has_character_flag = chivalry_duel_close }
				FROM = { has_character_flag = chivalry_duel_scream }
				FROM = { has_character_flag = chivalry_duel_blind }
			}
		}
		hidden_tooltip = {
			set_character_flag = chivalry_duel_turtle
			FROM = { character_event = { id = CHI.311 } } #FROM react to stance
		}
		custom_tooltip = { text = chivalry_duel_turtle_tooltip }
		sound_effect = declare_war
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 4 }
			}
			modifier = {
				factor = 0.5
				NOT = { check_variable = { which = chivalry_duel value = 4 } }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 4 } }
			}
		}
	}
	option = { #Close = factor 2 crits
		name = EVTOPTB_CHI_311
		trigger = { #slot 1
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_1_2
			NOR = {
				FROM = { has_character_flag = chivalry_duel_turtle }
				FROM = { has_character_flag = chivalry_duel_close }
				FROM = { has_character_flag = chivalry_duel_scream }
				FROM = { has_character_flag = chivalry_duel_blind }
			}
		}
		hidden_tooltip = {
			set_character_flag = chivalry_duel_close
			FROM = { character_event = { id = CHI.311 } } #FROM react to stance
		}
		custom_tooltip = { text = chivalry_duel_close_tooltip }
		sound_effect = army_move
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 3 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 3 } }
			}
		}
	}
	option = { #Scream = factor 1.5 crits 0.5 normals
		name = EVTOPTH_CHI_311
		trigger = { #slot 1
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_1_3
			NOR = {
				FROM = { has_character_flag = chivalry_duel_turtle }
				FROM = { has_character_flag = chivalry_duel_close }
				FROM = { has_character_flag = chivalry_duel_scream }
				FROM = { has_character_flag = chivalry_duel_blind }
			}
		}
		hidden_tooltip = {
			set_character_flag = chivalry_duel_scream
			FROM = { character_event = { id = CHI.311 } } #FROM react to stance
		}
		custom_tooltip = { text = chivalry_duel_scream_tooltip }
		if = {
			limit = {
				is_female = no
			}
			sound_effect = male_violent_death_04
		}
		if = {
			limit = {
				is_female = yes
			}
			sound_effect = female_violent_death_03
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 3 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 3 } }
			}
		}
	}
	option = { #Blind = random!
		name = EVTOPTK_CHI_311
		trigger = { #slot 1
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_1_4
			NOR = {
				FROM = { has_character_flag = chivalry_duel_turtle }
				FROM = { has_character_flag = chivalry_duel_close }
				FROM = { has_character_flag = chivalry_duel_scream }
				FROM = { has_character_flag = chivalry_duel_blind }
			}
		}
		hidden_tooltip = {
			set_character_flag = chivalry_duel_blind
			random_list = {
				5 = { set_character_flag = chivalry_duel_turtle }
				5 = { set_character_flag = chivalry_duel_close }
				5 = { set_character_flag = chivalry_duel_scream }
			}
			FROM = { character_event = { id = CHI.311 } } #FROM react to stance
		}
		custom_tooltip = { text = chivalry_duel_blind_tooltip }
		sound_effect = monastic_orders_penance
		#neutral ai_chance
	}
	option = { #Swing = 5 opportunity, 10 miss, 10 hit, 5 stun
		name = EVTOPTC_CHI_311
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_2_1
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.312 } }
		}
		FROM = {
			set_character_flag = chivalry_arms_hit_flag
			set_character_flag = chivalry_legs_hit_flag
		}
		custom_tooltip = { text = chivalry_duel_swing_tooltip }
		sound_effect = land_battle_sword_3
		FROM = { chivalry_local_wound_tooltip = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 4 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 4 } }
			}
		}
	}
	option = { #Lunge = 7, 8, 8, 7
		name = EVTOPTD_CHI_311
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_2_2
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.313 } }
		}
		FROM = {
			set_character_flag = chivalry_arms_hit_flag
			set_character_flag = chivalry_torso_hit_flag
		}
		custom_tooltip = { text = chivalry_duel_lunge_tooltip }
		sound_effect = land_battle_sword_5
		FROM = { chivalry_local_wound_tooltip = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 4 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 4 } }
			}
		}
	}
	option = { #Flail = 2, 13, 13, 2
		name = EVTOPTE_CHI_311
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_2_3
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.314 } }
		}
		FROM = {
			set_character_flag = chivalry_arms_hit_flag
			set_character_flag = chivalry_legs_hit_flag
		}
		custom_tooltip = { text = chivalry_duel_flail_tooltip }
		sound_effect = land_battle_sword_1
		FROM = { chivalry_local_wound_tooltip = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 4 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 4 } }
			}
		}
	}
	option = { #Aim = 9, 4, 13, 4
		name = EVTOPTF_CHI_311
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_2_4
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.315 } }
		}
		FROM = {
			set_character_flag = chivalry_torso_hit_flag
			set_character_flag = chivalry_head_hit_flag
		}
		custom_tooltip = { text = chivalry_duel_aim_tooltip }
		sound_effect = land_battle_sword_6
		FROM = { chivalry_local_wound_tooltip = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 4 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 3 } }
			}
		}
	}
	option = { #Jump = 8, 8, 1, 14
		name = EVTOPTG_CHI_311
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_2_5
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.316 } }
		}
		FROM = {
			set_character_flag = chivalry_torso_hit_flag
			set_character_flag = chivalry_head_hit_flag
		}
		custom_tooltip = { text = chivalry_duel_jump_tooltip }
		sound_effect = land_battle_sword_8
		FROM = { chivalry_local_wound_tooltip = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				check_variable = { which = chivalry_duel value = 3 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 3 } }
			}
		}
	}
	option = { #Back = 8, 5, 15, 2
		name = EVTOPTI_CHI_311
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_2_6
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.317 } }
		}
		FROM = {
			set_character_flag = chivalry_torso_hit_flag
			set_character_flag = chivalry_legs_hit_flag
		}
		custom_tooltip = { text = chivalry_duel_back_tooltip }
		sound_effect = land_battle_sword_7
		FROM = { chivalry_local_wound_tooltip = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				check_variable = { which = chivalry_duel value = 4 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 3 } }
			}
		}
	}
	option = { #Head = 13, 2, 2, 13
		name = EVTOPTJ_CHI_311
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_2_7
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.318 } }
		}
		FROM = {
			set_character_flag = chivalry_head_hit_flag
		}
		custom_tooltip = { text = chivalry_duel_head_tooltip }
		sound_effect = land_battle_sword_4
		FROM = { chivalry_local_wound_tooltip = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 3 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 3 } }
			}
		}
	}
	option = { #Timid = 3, 12, 8, 7
		name = EVTOPTL_CHI_311
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				trait = wounded
			}
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
			has_character_flag = chivalry_duel_2_8
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.319 } }
		}
		FROM = {
			set_character_flag = chivalry_arms_hit_flag
		}
		custom_tooltip = { text = chivalry_duel_timid_tooltip }
		sound_effect = land_battle_sword_2
		FROM = { chivalry_local_wound_tooltip = yes }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				check_variable = { which = chivalry_duel value = 4 }
			}
			modifier = {
				factor = 0.5
				FROM = { check_variable = { which = chivalry_duel value = 4 } }
			}
		}
	}
	option = { #pilgrim duel yield wounded
		name = EVTOPTM_CHI_311
		trigger = {
			has_character_flag = chivalry_duel_wounded
			trait = wounded
			NAND = {
				ai = yes
				FROM = { ai = yes }
			}
		}
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		prestige = -50
		change_society_currency = -100
		clr_character_flag = chivalry_duel_wounded
		chivalry_duel_cleaning_final = yes
	}
	option = { #AI skip all duel
		name = EVTOPTM_CHI_311 #no local
		trigger = {
			ai = yes
			FROM = { ai = yes }
		}
		chivalry_skip_duel = yes
	}
	after = {
		chivalry_duel_cleaning_attacks = yes
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - death ping
character_event = {
	id = CHI.3111
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		character_event = { id = CHI.3262 } #You die
		FROM = { character_event = { id = CHI.3261 } } #See you die
	}
}

#FG Rank up duel - attack ping
character_event = {
	id = CHI.3119
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { character_event = { id = CHI.311 } }
	}
}

#FG Rank up duel - receive swing
character_event = {
	id = CHI.312
	desc = EVTDESC_CHI_312
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Dodge
		name = EVTOPTA_CHI_31X_DODGE
		custom_tooltip = { text = chivalry_duel_dodge_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				5 = { #Opportunity
					modifier = { #Dodging modifier
						factor = 0.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_dodge
					character_event = { id = CHI.320 } #All Opportunities, you sneak attack
				}
				10 = { #Dodge
					modifier = { #Dodging modifier
						factor = 1.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_dodge
					# character_event = { id = CHI.321 } #Dodged
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
				}
				10 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = temperate }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = just }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = duelist }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = humble }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_dodge
					# character_event = { id = CHI.322 } #Fail Dodge
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping

				}
				5 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = temperate }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = just }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = duelist }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = humble }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_dodge
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Counter
		name = EVTOPTB_CHI_31X_COUNTER
		custom_tooltip = { text = chivalry_duel_counter_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				5 = { #Counter
					modifier = { #Counter modifier
						factor = 1.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_counter
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				10 = { #Block
					modifier = { #Counter modifier
						factor = 0.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				10 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = temperate }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = just }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = duelist }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = humble }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.322 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				5 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = temperate }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = just }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = duelist }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = humble }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_counter
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Parry
		name = EVTOPTC_CHI_31X_PARRY
		custom_tooltip = { text = chivalry_duel_parry_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				5 = { #Perfect Parry
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_parry
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				10 = { #Block
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				10 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = temperate }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = just }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = duelist }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = humble }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.321 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				5 = { #Knocked back
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = temperate }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = just }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = duelist }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = humble }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_parry
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Yield normal
		name = EVTOPTD_CHI_31X_YIELD
		trigger = {
			NOT = { has_character_flag = chivalry_duel_death }
			NOT = { has_character_flag = chivalry_duel_wounded }
			NOT = { has_character_flag = chivalry_hunt_target }
		}
		custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0.5
				NOT = { has_injury_trigger = yes }
				has_disease_trigger = yes
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted courtier
		name = EVTOPTE_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = no
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
			if = {
				limit = {
					is_ruler = no
				}
				liege = { character_event = { id = CHI.194 } }
			}
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			liege = { character_event = { id = CHI.194 } }
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					#their_opinion = { who = ROOT value = 10 }
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}		

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted ruler
		name = EVTOPTF_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = yes
		}
		custom_tooltip = { text = chivalry_duel_yield_hunt }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter
		name = EVTOPTG_CHI_31X_YIELD
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_heretic
		}
		else_if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_bounty
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - receive lunge
character_event = {
	id = CHI.313
	desc = EVTDESC_CHI_313
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Dodge
		name = EVTOPTA_CHI_31X_DODGE
		custom_tooltip = { text = chivalry_duel_dodge_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				7 = { #Opportunity
					modifier = { #Dodging modifier
						factor = 0.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_dodge
					character_event = { id = CHI.320 } #All Opportunities, you sneak attack
				}
				8 = { #Dodge
					modifier = { #Dodging modifier
						factor = 1.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_dodge
					# character_event = { id = CHI.321 } #Dodged
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
				}
				8 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = hunter }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = cavalry_leader
								trait = experimenter
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_dodge
					# character_event = { id = CHI.322 } #Fail Dodge
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping

				}
				7 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = hunter }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = cavalry_leader
								trait = experimenter
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_dodge
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Counter
		name = EVTOPTB_CHI_31X_COUNTER
		custom_tooltip = { text = chivalry_duel_counter_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				7 = { #Counter
					modifier = { #Counter modifier
						factor = 1.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_counter
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				8 = { #Block
					modifier = { #Counter modifier
						factor = 0.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				8 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = hunter }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = cavalry_leader
								trait = experimenter
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.322 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				7 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = hunter }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = cavalry_leader
								trait = experimenter
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_counter
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Parry
		name = EVTOPTC_CHI_31X_PARRY
		custom_tooltip = { text = chivalry_duel_parry_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				7 = { #Perfect Parry
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_parry
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				8 = { #Block
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				8 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = hunter }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = cavalry_leader
								trait = experimenter
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.321 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				7 = { #Knocked back
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = hunter }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = cavalry_leader
								trait = experimenter
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_parry
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Yield normal
		name = EVTOPTD_CHI_31X_YIELD
		trigger = {
			NOT = { has_character_flag = chivalry_duel_death }
			NOT = { has_character_flag = chivalry_duel_wounded }
			NOT = { has_character_flag = chivalry_hunt_target }
		}
		custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0.5
				NOT = { has_injury_trigger = yes }
				has_disease_trigger = yes
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted courtier
		name = EVTOPTE_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = no
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
			if = {
				limit = {
					is_ruler = no
				}
				liege = { character_event = { id = CHI.194 } }
			}
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			liege = { character_event = { id = CHI.194 } }
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					#their_opinion = { who = ROOT value = 10 }
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}		

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter ruler
		name = EVTOPTF_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = yes
		}
		custom_tooltip = { text = chivalry_duel_yield_hunt }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter
		name = EVTOPTG_CHI_31X_YIELD
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_heretic
		}
		else_if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_bounty
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - receive flail
character_event = {
	id = CHI.314
	desc = EVTDESC_CHI_314
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes

	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Dodge
		name = EVTOPTA_CHI_31X_DODGE
		custom_tooltip = { text = chivalry_duel_dodge_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				2 = { #Opportunity
					modifier = { #Dodging modifier
						factor = 0.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_dodge
					character_event = { id = CHI.320 } #All Opportunities, you sneak attack
				}
				13 = { #Dodge
					modifier = { #Dodging modifier
						factor = 1.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_dodge
					# character_event = { id = CHI.321 } #Dodged
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
				}
				13 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = paranoid }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = trickster
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_dodge
					# character_event = { id = CHI.322 } #Fail Dodge
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping

				}
				2 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = paranoid }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = trickster
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_dodge
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Counter
		name = EVTOPTB_CHI_31X_COUNTER
		custom_tooltip = { text = chivalry_duel_counter_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				2 = { #Counter
					modifier = { #Counter modifier
						factor = 1.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_counter
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				13 = { #Block
					modifier = { #Counter modifier
						factor = 0.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				13 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = paranoid }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = trickster
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.322 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				2 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = paranoid }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = trickster
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_counter
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Parry
		name = EVTOPTC_CHI_31X_PARRY
		custom_tooltip = { text = chivalry_duel_parry_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				2 = { #Perfect Parry
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_parry
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				13 = { #Block
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				13 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = paranoid }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = trickster
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.321 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				2 = { #Knocked back
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = paranoid }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = aggressive_leader
								trait = trickster
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_parry
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Yield normal
		name = EVTOPTD_CHI_31X_YIELD
		trigger = {
			NOT = { has_character_flag = chivalry_duel_death }
			NOT = { has_character_flag = chivalry_duel_wounded }
			NOT = { has_character_flag = chivalry_hunt_target }
		}
		custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0.5
				NOT = { has_injury_trigger = yes }
				has_disease_trigger = yes
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted courtier
		name = EVTOPTE_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = no
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
			if = {
				limit = {
					is_ruler = no
				}
				liege = { character_event = { id = CHI.194 } }
			}
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			liege = { character_event = { id = CHI.194 } }
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					#their_opinion = { who = ROOT value = 10 }
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}		

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter ruler
		name = EVTOPTF_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = yes
		}
		custom_tooltip = { text = chivalry_duel_yield_hunt }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter
		name = EVTOPTG_CHI_31X_YIELD
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_heretic
		}
		else_if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_bounty
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - receive aim
character_event = {
	id = CHI.315
	desc = EVTDESC_CHI_315
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes

	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Dodge
		name = EVTOPTA_CHI_31X_DODGE
		custom_tooltip = { text = chivalry_duel_dodge_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				9 = { #Opportunity
					modifier = { #Dodging modifier
						factor = 0.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_dodge
					character_event = { id = CHI.320 } #All Opportunities, you sneak attack
				}
				4 = { #Dodge
					modifier = { #Dodging modifier
						factor = 1.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_dodge
					# character_event = { id = CHI.321 } #Dodged
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
				}
				13 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = patient }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = trickster
								trait = experimenter
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_dodge
					# character_event = { id = CHI.322 } #Fail Dodge
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping

				}
				4 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = patient }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = trickster
								trait = experimenter
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_dodge
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Counter
		name = EVTOPTB_CHI_31X_COUNTER
		custom_tooltip = { text = chivalry_duel_counter_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				9 = { #Counter
					modifier = { #Counter modifier
						factor = 1.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_counter
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				4 = { #Block
					modifier = { #Counter modifier
						factor = 0.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				13 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = patient }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = trickster
								trait = experimenter
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.322 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				4 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = patient }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = trickster
								trait = experimenter
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_counter
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Parry
		name = EVTOPTC_CHI_31X_PARRY
		custom_tooltip = { text = chivalry_duel_parry_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				9 = { #Perfect Parry
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_parry
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				4 = { #Block
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				13 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = patient }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = trickster
								trait = experimenter
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.321 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				4 = { #Knocked back
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = honest }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = patient }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = trickster
								trait = experimenter
								trait = flanker
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_parry
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Yield normal
		name = EVTOPTD_CHI_31X_YIELD
		trigger = {
			NOT = { has_character_flag = chivalry_duel_death }
			NOT = { has_character_flag = chivalry_duel_wounded }
			NOT = { has_character_flag = chivalry_hunt_target }
		}
		custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0.5
				NOT = { has_injury_trigger = yes }
				has_disease_trigger = yes
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted courtier
		name = EVTOPTE_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = no
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
			if = {
				limit = {
					is_ruler = no
				}
				liege = { character_event = { id = CHI.194 } }
			}
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			liege = { character_event = { id = CHI.194 } }
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					#their_opinion = { who = ROOT value = 10 }
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}		

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter ruler
		name = EVTOPTF_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = yes
		}
		custom_tooltip = { text = chivalry_duel_yield_hunt }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter
		name = EVTOPTG_CHI_31X_YIELD
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_heretic
		}
		else_if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_bounty
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - receive jump
character_event = {
	id = CHI.316
	desc = EVTDESC_CHI_316
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes

	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Dodge
		name = EVTOPTA_CHI_31X_DODGE
		custom_tooltip = { text = chivalry_duel_dodge_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				8 = { #Opportunity
					modifier = { #Dodging modifier
						factor = 0.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_dodge
					character_event = { id = CHI.320 } #All Opportunities, you sneak attack
				}
				8 = { #Dodge
					modifier = { #Dodging modifier
						factor = 1.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_dodge
					# character_event = { id = CHI.321 } #Dodged
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
				}
				1 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = experimenter
								trait = aggressive_leader
								trait = cavalry_leader
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_dodge
					# character_event = { id = CHI.322 } #Fail Dodge
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping

				}
				14 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = experimenter
								trait = aggressive_leader
								trait = cavalry_leader
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_dodge
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Counter
		name = EVTOPTB_CHI_31X_COUNTER
		custom_tooltip = { text = chivalry_duel_counter_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				8 = { #Counter
					modifier = { #Counter modifier
						factor = 1.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_counter
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				8 = { #Block
					modifier = { #Counter modifier
						factor = 0.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				1 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = experimenter
								trait = aggressive_leader
								trait = cavalry_leader
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.322 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				14 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = experimenter
								trait = aggressive_leader
								trait = cavalry_leader
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_counter
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Parry
		name = EVTOPTC_CHI_31X_PARRY
		custom_tooltip = { text = chivalry_duel_parry_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				8 = { #Perfect Parry
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_parry
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				8 = { #Block
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				1 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = experimenter
								trait = aggressive_leader
								trait = cavalry_leader
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.321 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				14 = { #Knocked back
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = brave }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = wroth }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = zealous }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = experimenter
								trait = aggressive_leader
								trait = cavalry_leader
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_parry
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Yield normal
		name = EVTOPTD_CHI_31X_YIELD
		trigger = {
			NOT = { has_character_flag = chivalry_duel_death }
			NOT = { has_character_flag = chivalry_duel_wounded }
			NOT = { has_character_flag = chivalry_hunt_target }
		}
		custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0.5
				NOT = { has_injury_trigger = yes }
				has_disease_trigger = yes
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted courtier
		name = EVTOPTE_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = no
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
			if = {
				limit = {
					is_ruler = no
				}
				liege = { character_event = { id = CHI.194 } }
			}
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			liege = { character_event = { id = CHI.194 } }
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					#their_opinion = { who = ROOT value = 10 }
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}		

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter ruler
		name = EVTOPTF_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = yes
		}
		custom_tooltip = { text = chivalry_duel_yield_hunt }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter
		name = EVTOPTG_CHI_31X_YIELD
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_heretic
		}
		else_if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_bounty
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - receive back
character_event = {
	id = CHI.317
	desc = EVTDESC_CHI_317
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes

	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Dodge
		name = EVTOPTA_CHI_31X_DODGE
		custom_tooltip = { text = chivalry_duel_dodge_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				8 = { #Opportunity
					modifier = { #Dodging modifier
						factor = 0.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_dodge
					character_event = { id = CHI.320 } #All Opportunities, you sneak attack
				}
				5 = { #Dodge
					modifier = { #Dodging modifier
						factor = 1.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_dodge
					# character_event = { id = CHI.321 } #Dodged
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
				}
				15 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = envious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = impaler
								trait = schemer
								has_education_intrigue_trigger = yes
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_dodge
					# character_event = { id = CHI.322 } #Fail Dodge
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping

				}
				2 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = envious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = impaler
								trait = schemer
								has_education_intrigue_trigger = yes
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_dodge
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Counter
		name = EVTOPTB_CHI_31X_COUNTER
		custom_tooltip = { text = chivalry_duel_counter_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				8 = { #Counter
					modifier = { #Counter modifier
						factor = 1.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_counter
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				5 = { #Block
					modifier = { #Counter modifier
						factor = 0.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				15 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = envious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = impaler
								trait = schemer
								has_education_intrigue_trigger = yes
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.322 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				2 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = envious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = impaler
								trait = schemer
								has_education_intrigue_trigger = yes
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_counter
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Parry
		name = EVTOPTC_CHI_31X_PARRY
		custom_tooltip = { text = chivalry_duel_parry_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				8 = { #Perfect Parry
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_parry
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				5 = { #Block
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				15 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = envious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = impaler
								trait = schemer
								has_education_intrigue_trigger = yes
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.321 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				2 = { #Knocked back
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = arbitrary }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = envious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = craven }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = impaler
								trait = schemer
								has_education_intrigue_trigger = yes
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_parry
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Yield normal
		name = EVTOPTD_CHI_31X_YIELD
		trigger = {
			NOT = { has_character_flag = chivalry_duel_death }
			NOT = { has_character_flag = chivalry_duel_wounded }
			NOT = { has_character_flag = chivalry_hunt_target }
		}
		custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0.5
				NOT = { has_injury_trigger = yes }
				has_disease_trigger = yes
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted courtier
		name = EVTOPTE_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = no
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
			if = {
				limit = {
					is_ruler = no
				}
				liege = { character_event = { id = CHI.194 } }
			}
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			liege = { character_event = { id = CHI.194 } }
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					#their_opinion = { who = ROOT value = 10 }
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}		

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter ruler
		name = EVTOPTF_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = yes
		}
		custom_tooltip = { text = chivalry_duel_yield_hunt }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter
		name = EVTOPTG_CHI_31X_YIELD
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_heretic
		}
		else_if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_bounty
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - receive head
character_event = {
	id = CHI.318
	desc = EVTDESC_CHI_318
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes

	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Dodge
		name = EVTOPTA_CHI_31X_DODGE
		custom_tooltip = { text = chivalry_duel_dodge_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				13 = { #Opportunity
					modifier = { #Dodging modifier
						factor = 0.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_dodge
					character_event = { id = CHI.320 } #All Opportunities, you sneak attack
				}
				2 = { #Dodge
					modifier = { #Dodging modifier
						factor = 1.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_dodge
					# character_event = { id = CHI.321 } #Dodged
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
				}
				2 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = hunter
								trait = impaler
								trait = strategist
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_dodge
					# character_event = { id = CHI.322 } #Fail Dodge
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping

				}
				13 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = hunter
								trait = impaler
								trait = strategist
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_dodge
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Counter
		name = EVTOPTB_CHI_31X_COUNTER
		custom_tooltip = { text = chivalry_duel_counter_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				13 = { #Counter
					modifier = { #Counter modifier
						factor = 1.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_counter
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				2 = { #Block
					modifier = { #Counter modifier
						factor = 0.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				2 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = hunter
								trait = impaler
								trait = strategist
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.322 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				13 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = hunter
								trait = impaler
								trait = strategist
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_counter
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Parry
		name = EVTOPTC_CHI_31X_PARRY
		custom_tooltip = { text = chivalry_duel_parry_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				13 = { #Perfect Parry
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_parry
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				2 = { #Block
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				2 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = hunter
								trait = impaler
								trait = strategist
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.321 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				13 = { #Knocked back
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = deceitful }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = diligent }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = ambitious }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = greedy }
					}
					modifier = {
						factor = 1.5
						FROM = { 
							OR = {
								trait = hunter
								trait = impaler
								trait = strategist
							}
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_parry
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Yield normal
		name = EVTOPTD_CHI_31X_YIELD
		trigger = {
			NOT = { has_character_flag = chivalry_duel_death }
			NOT = { has_character_flag = chivalry_duel_wounded }
			NOT = { has_character_flag = chivalry_hunt_target }
		}
		custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0.5
				NOT = { has_injury_trigger = yes }
				has_disease_trigger = yes
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted courtier
		name = EVTOPTE_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = no
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
			if = {
				limit = {
					is_ruler = no
				}
				liege = { character_event = { id = CHI.194 } }
			}
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			liege = { character_event = { id = CHI.194 } }
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					#their_opinion = { who = ROOT value = 10 }
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}		

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter ruler
		name = EVTOPTF_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = yes
		}
		custom_tooltip = { text = chivalry_duel_yield_hunt }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter
		name = EVTOPTG_CHI_31X_YIELD
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_heretic
		}
		else_if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			add_mission_fail_influence_effect = yes
			change_society_currency = -100
			clr_quest = mission_chivalry_hunt_bounty
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - receive timid
character_event = {
	id = CHI.319
	desc = EVTDESC_CHI_319
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes

	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Dodge
		name = EVTOPTA_CHI_31X_DODGE
		custom_tooltip = { text = chivalry_duel_dodge_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				3 = { #Opportunity
					modifier = { #Dodging modifier
						factor = 0.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_dodge
					character_event = { id = CHI.320 } #All Opportunities, you sneak attack
				}
				12 = { #Dodge
					modifier = { #Dodging modifier
						factor = 1.5
						#dodging lower counter but increase miss			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = deceitful
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = flanker
							trait = trickster
							trait = organizer
							trait = light_foot_leader
						}
					}
					modifier = {
						factor = 1.5
						has_education_intrigue_trigger = yes
					}
					modifier = {
						factor = 1.5
						trait = strategist
					}
					modifier = {
						factor = 1.5
						trait = schemer
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_dodge
					# character_event = { id = CHI.321 } #Dodged
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
				}
				7 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = shy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = kind }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = content }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = trusting }
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_dodge
					# character_event = { id = CHI.322 } #Fail Dodge
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping

				}
				8 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = shy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = kind }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = content }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = trusting }
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_dodge
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Counter
		name = EVTOPTB_CHI_31X_COUNTER
		custom_tooltip = { text = chivalry_duel_counter_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				3 = { #Counter
					modifier = { #Counter modifier
						factor = 1.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_counter
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				12 = { #Block
					modifier = { #Counter modifier
						factor = 0.5
						#countering lower miss but increase counter			
					}
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = duelist
					}
					modifier = {
						factor = 1.5
						trait = brave
					}
					modifier = {
						factor = 1.5
						trait = trusting
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						trait = trickster
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				8 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = shy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = kind }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = content }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = trusting }
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.322 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				7 = { #Stunned
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = shy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = kind }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = content }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = trusting }
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_counter
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Parry
		name = EVTOPTC_CHI_31X_PARRY
		custom_tooltip = { text = chivalry_duel_parry_tooltip }
		ROOT = { chivalry_local_wound_tooltip = yes }
		hidden_tooltip = {
			random_list = {
				3 = { #Perfect Parry
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 2 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_opportunity_parry
					character_event = { id = CHI.320 } #All Opportunity, you sneak attack
				}
				12 = { #Block
					modifier = { #Generic modifiers
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 10 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 20 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 30 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 40 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 50 } }				
					}
					modifier = {
						factor = 1.5
						ROOT = { combat_rating_diff = { who = FROM value = 60 } }				
					}
					modifier = {
						factor = 2
						ROOT = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						ROOT = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						trait = paranoid
					}
					modifier = {
						factor = 1.5
						trait = shy
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = {
						factor = 1.5
						trait = stubborn
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.5
						OR = {
							trait = unyielding_leader
							trait = defensive_leader
							trait = heavy_infantry_leader 
						}
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					change_variable = { which = chivalry_duel value = 1 }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_good_counter
					# character_event = { id = CHI.321 } #Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3211 } } #Notification
					FROM = { character_event = { id = CHI.3212 } } #Notification
				}
				8 = { #Hit
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = shy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = kind }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = content }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = trusting }
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_turtle }
					}
					modifier = {
						factor = 0.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 1 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					# set_character_flag = chivalry_duel_bad_counter
					# character_event = { id = CHI.321 } #Fail Blocked
					FROM = { character_event = { id = CHI.3119 } } #Your turn to attack ping
					ROOT = { character_event = { id = CHI.3221 } } #Notification
					FROM = { character_event = { id = CHI.3222 } } #Notification
				}
				7 = { #Knocked back
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = erudite }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = shy }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = kind }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = content }
					}
					modifier = {
						factor = 1.5
						FROM = { trait = trusting }
					}
					modifier = {
						factor = 1.5
						trait = craven
					}
					modifier = { #Stance modifiers
						factor = 2
						FROM = { has_character_flag = chivalry_duel_close }
					}
					modifier = {
						factor = 1.5
						FROM = { has_character_flag = chivalry_duel_scream }
					}
					modifier = { #Unlanded Hunt Target are easy kills
						factor = 2
						has_character_flag = chivalry_hunt_target
						is_ruler = no
					}
					set_character_flag = chivalry_critical_hit_flag
					chivalry_local_wounds_effect = yes
					FROM = { change_variable = { which = chivalry_duel value = 2 } }
					chivalry_duel_cleaning = yes
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					set_character_flag = chivalry_duel_stun_parry
					FROM = { character_event = { id = CHI.323 } } #All stuns, your foe sneak attack
				}
				1 = { #Die
					trigger = {
						NOT = { has_character_flag = chivalry_duel_wounded }
						OR = {
							trait = wounded
							has_character_flag = chivalry_duel_death
							FROM = { society_member_of = society_risk_fighter_guild }
						}
					}
					modifier = { #Generic modifiers
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 10 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 20 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 30 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 40 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 50 } }				
					}
					modifier = {
						factor = 1.50
						FROM = { combat_rating_diff = { who = ROOT value = 60 } }				
					}
					modifier = {
						factor = 2
						FROM = { is_strong_trigger = yes }
					}
					modifier = {
						factor = 0.5
						FROM = { is_weak_trigger = yes }
					}
					modifier = { #Optional modifiers
						factor = 1.5
						FROM = { trait = cruel }
					}
					modifier = {
						factor = 1.5
						FROM = { is_rival = ROOT  }
					}
					modifier = {
						factor = 1.5
						FROM = { society_member_of = society_risk_fighter_guild  }
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 3
						trait = wounded
						has_character_flag = chivalry_duel_death
					}
					modifier = {
						factor = 2
						trait = severely_injured
					}
					modifier = {
						factor = 3
						has_character_flag = chivalry_duel_death
					}
					# modifier = {
						# factor = 0
						# FROM = { society_rank == 4  }
					# }
					character_event = { id = CHI.3262 } #You die
					FROM = { character_event = { id = CHI.3261 } } #See you die
				}
			}
		}
	}
	option = { #Yield normal
		name = EVTOPTD_CHI_31X_YIELD
		trigger = {
			NOT = { has_character_flag = chivalry_duel_death }
			NOT = { has_character_flag = chivalry_duel_wounded }
			NOT = { has_character_flag = chivalry_hunt_target }
		}
		custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 0.5
				NOT = { has_injury_trigger = yes }
				has_disease_trigger = yes
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunted courtier
		name = EVTOPTE_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = no
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
			if = {
				limit = {
					is_ruler = no
				}
				liege = { character_event = { id = CHI.194 } }
			}
		}
		add_trait = craven
		prestige = -50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			liege = { character_event = { id = CHI.194 } }
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					#their_opinion = { who = ROOT value = 10 }
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}		

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter ruler
		name = EVTOPTF_CHI_31X_YIELD
		trigger = {
			has_character_flag = chivalry_hunt_target
			is_ruler = yes
		}
		custom_tooltip = { text = chivalry_duel_yield_hunt }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		if = {
			limit = {
				OR = {
					has_character_modifier = known_satanist
					has_character_modifier = known_secret_society_member
					has_character_modifier = known_witch
				}
			}
			leave_society = yes
			convert_to_secret_religion = yes
		}
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	option = { #Yield hunter
		name = EVTOPTG_CHI_31X_YIELD
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
		}
		# custom_tooltip = { text = chivalry_duel_yield_tooltip }
		hidden_tooltip = {
			FROM = { character_event = { id = CHI.329 } }
		}
		add_trait = craven
		prestige = -50
		change_society_currency = -100
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			clr_quest = mission_chivalry_hunt_heretic
		}
		else_if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			clr_quest = mission_chivalry_hunt_bounty
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				NOR = {
					has_disease_trigger = yes
					has_injury_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = severely_injured
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#FG Rank up duel - opportunity
character_event = {
	id = CHI.320
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROMFROM = { is_nomadic = no }
			FROMFROM = { is_republic = no }
			FROMFROM = { is_theocracy = no }
			FROMFROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROMFROM = { NOT = { religion_group = muslim } }
			FROMFROM = { NOT = { religion_group = indian_group } }
			FROMFROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROMFROM = { is_nomadic = no }
			FROMFROM = { is_republic = no }
			FROMFROM = { is_theocracy = no }
			OR = {
				AND = {
					FROMFROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROMFROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROMFROM = { NOT = { religion_group = muslim } }
			FROMFROM = { NOT = { religion_group = indian_group } }
			FROMFROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROMFROM = { is_nomadic = no }
			FROMFROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROMFROM = { NOT = { religion_group = muslim } }
			FROMFROM = { NOT = { religion_group = indian_group } }
			FROMFROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROMFROM = { is_nomadic = no }
			FROMFROM = { is_republic = no }
			FROMFROM = { is_theocracy = no }
			FROMFROM = { is_tribal = yes }
			is_tribal = yes
			FROMFROM = { NOT = { religion_group = muslim } }
			FROMFROM = { NOT = { religion_group = indian_group } }
			FROMFROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROMFROM = { is_nomadic = yes }
			FROMFROM = { NOT = { religion_group = muslim } }
			FROMFROM = { NOT = { religion_group = indian_group } }
			FROMFROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROMFROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROMFROM = { is_theocracy = yes }
				}
			}
			FROMFROM = { NOT = { religion_group = muslim } }
			FROMFROM = { NOT = { religion_group = indian_group } }
			FROMFROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROMFROM = { is_nomadic = no }
			FROMFROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROMFROM = { NOT = { religion_group = muslim } }
			FROMFROM = { NOT = { religion_group = indian_group } }
			FROMFROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROMFROM = { is_nomadic = no }
			OR = {
				FROMFROM = { religion_group = muslim }
				FROMFROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROMFROM = { is_nomadic = no }
			FROMFROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	desc = {
		trigger = {
			has_character_flag = chivalry_duel_opportunity_dodge
		}
		text = EVTDESC_CHI_320_DODGE
	}
	desc = {
		trigger = {
			has_character_flag = chivalry_duel_opportunity_counter
		}
		text = EVTDESC_CHI_320_COUNTER
	}
	desc = {
		trigger = {
			has_character_flag = chivalry_duel_opportunity_parry
		}
		text = EVTDESC_CHI_320_PARRY
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_character_flag = chivalry_duel_opportunity_dodge
			}
			if = {
				limit = {
					FROMFROM = { is_female = no }
				}
				sound_effect = falling_male_01
			}
			if = {
				limit = {
					FROMFROM = { is_female = yes }
				}
				sound_effect = falling_female_02
			}
		}
		if = {
			limit = {
				has_character_flag = chivalry_duel_opportunity_counter
			}
			if = {
				limit = {
					FROMFROM = { is_female = no }
				}
				sound_effect = land_battle_sword_2
				sound_effect = generic_sacrifice_male_01
			}
			if = {
				limit = {
					FROMFROM = { is_female = yes }
				}
				sound_effect = land_battle_sword_2
				sound_effect = generic_sacrifice_female_01
			}
		}
		if = {
			limit = {
				has_character_flag = chivalry_duel_opportunity_parry
			}
			sound_effect = land_battle_sword_2
		}
	}
	
	option = { #low risk
		name = EVTOPTA_CHI_32X
		custom_tooltip = { text = chivalry_duel_lowrisk_tooltip }
		FROMFROM = {
			chivalry_local_wound_tooltip = yes
		}
		hidden_tooltip = {
			random_list = {
				7 = {  
					ROOT = { character_event = { id = CHI.3201 } } #Notification, you hit
					FROMFROM = { character_event = { id = CHI.3202 } } #Notification, you were hit
					random = {
						chance = 30
						change_variable = { which = chivalry_duel value = 1 }
					}
					FROMFROM = {
						chivalry_local_wounds_effect = yes
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROMFROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
				}
				3 = {
					ROOT = { character_event = { id = CHI.3203 } } #Notification, you miss
					FROMFROM = { character_event = { id = CHI.3204 } } #Notification, you were missed
					random = {
						chance = 60
						FROMFROM = { change_variable = { which = chivalry_duel value = 1 } }
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROMFROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROMFROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROMFROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
				}
			}
			FROMFROM = { character_event = { id = CHI.3119 } } #ping to attacker, your turn to attack
		}
	}
	option = { #medium risk
		name = EVTOPTB_CHI_32X
		custom_tooltip = { text = chivalry_duel_midrisk_tooltip }
		FROMFROM = {
			chivalry_local_wound_tooltip = yes
		}
		hidden_tooltip = {
			random_list = {
				5 = {  
					ROOT = { character_event = { id = CHI.3201 } } #Notification, you hit
					FROMFROM = { character_event = { id = CHI.3202 } } #Notification, you were hit
					random = {
						chance = 50
						change_variable = { which = chivalry_duel value = 1 }
					}
					FROMFROM = {
						chivalry_local_wounds_effect = yes
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROMFROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
				}
				5 = {
					ROOT = { character_event = { id = CHI.3203 } } #Notification, you miss
					FROMFROM = { character_event = { id = CHI.3204 } } #Notification, you were missed
					random = {
						chance = 40
						FROMFROM = { change_variable = { which = chivalry_duel value = 1 } }
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROMFROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROMFROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROMFROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
				}
			}
			FROMFROM = { character_event = { id = CHI.3119 } } #ping to attacker, your turn to attack
		}
	}
	option = { #high risk
		name = EVTOPTC_CHI_32X
		custom_tooltip = { text = chivalry_duel_hirisk_tooltip }
		FROMFROM = {
			chivalry_local_wound_tooltip = yes
		}
		hidden_tooltip = {
			random_list = {
				3 = {  
					ROOT = { character_event = { id = CHI.3201 } } #Notification, you hit
					FROMFROM = { character_event = { id = CHI.3202 } } #Notification, you were hit
					random = {
						chance = 70
						change_variable = { which = chivalry_duel value = 1 }
					}
					FROMFROM = {
						chivalry_local_wounds_effect = yes
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROMFROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
				}
				7 = {
					ROOT = { character_event = { id = CHI.3203 } } #Notification, you miss
					FROMFROM = { character_event = { id = CHI.3204 } } #Notification, you were missed
					random = {
						chance = 20
						FROMFROM = { change_variable = { which = chivalry_duel value = 1 } }
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROMFROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROMFROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROMFROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
				}
			}
			FROMFROM = { character_event = { id = CHI.3119 } } #ping to attacker, your turn to attack
		}
	}
}

#FG Rank up duel - stun
character_event = {
	id = CHI.323
#	picture = GFX_evt_duel_team
	border = GFX_event_normal_frame_war_chivalry
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_duel_stun_dodge }
		}
		text = EVTDESC_CHI_323_DODGE
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_duel_stun_counter }
		}
		text = EVTDESC_CHI_323_COUNTER
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_duel_stun_parry }
		}
		text = EVTDESC_CHI_323_PARRY
	}
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				FROM = { is_female = no }
			}
			sound_effect = arrow_in_the_back_male
		}
		if = {
			limit = {
				FROM = { is_female = yes }
			}
			sound_effect = arrow_in_the_back_female
		}
	}
	
	option = { #low risk
		name = EVTOPTA_CHI_32X
		custom_tooltip = { text = chivalry_duel_lowrisk_tooltip }
		FROM = {
			chivalry_local_wound_tooltip = yes
		}
		hidden_tooltip = {
			random_list = {
				7 = {
					ROOT = { character_event = { id = CHI.3231 } } #Notification, you hit
					FROM = { character_event = { id = CHI.3232 } } #Notification, you were hit
					random = {
						chance = 30
						change_variable = { which = chivalry_duel value = 1 }
					}
					FROM = {
						chivalry_local_wounds_effect = yes
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
				}
				3 = {
					ROOT = { character_event = { id = CHI.3233 } } #Notification, you miss
					FROM = { character_event = { id = CHI.3234 } } #Notification, you were missed
					random = {
						chance = 60
						FROM = { change_variable = { which = chivalry_duel value = 1 } }
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
					
				}
			}
			FROM = { character_event = { id = CHI.311 } } #foe's turn to attack
		}
	}
	option = { #medium risk
		name = EVTOPTB_CHI_32X
		custom_tooltip = { text = chivalry_duel_midrisk_tooltip }
		FROM = {
			chivalry_local_wound_tooltip = yes
		}
		hidden_tooltip = {
			random_list = {
				5 = {  
					ROOT = { character_event = { id = CHI.3231 } } #Notification, you hit
					FROM = { character_event = { id = CHI.3232 } } #Notification, you were hit
					random = {
						chance = 50
						change_variable = { which = chivalry_duel value = 1 }
					}
					FROM = {
						chivalry_local_wounds_effect = yes
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
				}
				5 = {
					ROOT = { character_event = { id = CHI.3233 } } #Notification, you miss
					FROM = { character_event = { id = CHI.3234 } } #Notification, you were missed
					random = {
						chance = 40
						FROM = { change_variable = { which = chivalry_duel value = 1 } }
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
				}
			}
			FROM = { character_event = { id = CHI.311 } } #foe's turn to attack
		}
	}
	option = { #high risk
		name = EVTOPTC_CHI_32X
		custom_tooltip = { text = chivalry_duel_hirisk_tooltip }
		FROM = {
			chivalry_local_wound_tooltip = yes
		}
		hidden_tooltip = {
			random_list = {
				3 = {  
					ROOT = { character_event = { id = CHI.3231 } } #Notification, you hit
					FROM = { character_event = { id = CHI.3232 } } #Notification, you were hit
					random = {
						chance = 70
						change_variable = { which = chivalry_duel value = 1 }
					}
					FROM = {
						chivalry_local_wounds_effect = yes
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								check_variable = { which = chivalry_duel value = 5 }
								check_variable = { which = chivalry_duel value = 6 }
							} 
						}
						character_event = { id = CHI.327 } #Won
						FROM = { character_event = { id = CHI.328 } } #Lost
						break = yes
					}
				}
				7 = {
					ROOT = { character_event = { id = CHI.3233 } } #Notification, you miss
					FROM = { character_event = { id = CHI.3234 } } #Notification, you were missed
					random = {
						chance = 20
						FROM = { change_variable = { which = chivalry_duel value = 1 } }
					}
					if = {
						limit = {
							NOT = { has_character_flag = chivalry_duel_death }
							NOT = { has_character_flag = chivalry_duel_wounded }
							OR = {
								FROM = { check_variable = { which = chivalry_duel value = 5 } }
								FROM = { check_variable = { which = chivalry_duel value = 6 } }
							} 
						}
						FROM = { character_event = { id = CHI.327 } } #Won
						character_event = { id = CHI.328 } #Lost
						break = yes
					}
				}
			}
			FROM = { character_event = { id = CHI.311 } } #foe's turn to attack
		}
	}
}

#FG Rank up duel - opportunity notification, you hit
character_event = {
	id = CHI.3201
	desc = EVTDESC_CHI_3201
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_7
		if = {
			limit = {
				FROMFROMFROM = { is_female = no }
			}
			random_list = {
				5 = { sound_effect = male_violent_death_01 }
				5 = { sound_effect = male_violent_death_02 }
				5 = { sound_effect = male_violent_death_03 }
				5 = { sound_effect = male_violent_death_04 }
				5 = { sound_effect = male_violent_death_05 }
			}
		}
		if = {
			limit = {
				FROMFROMFROM = { is_female = yes }
			}
			random_list = {
				5 = { sound_effect = female_violent_death_01 }
				5 = { sound_effect = female_violent_death_02 }
				5 = { sound_effect = female_violent_death_03 }
				5 = { sound_effect = female_violent_death_04 }
			}
		}
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - opportunity notification, were hit
character_event = {
	id = CHI.3202
	desc = EVTDESC_CHI_3202
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	immediate = {
		sound_effect = land_battle_sword_7
		if = {
			limit = {
				is_female = no
			}
			random_list = {
				5 = { sound_effect = male_violent_death_01 }
				5 = { sound_effect = male_violent_death_02 }
				5 = { sound_effect = male_violent_death_03 }
				5 = { sound_effect = male_violent_death_04 }
				5 = { sound_effect = male_violent_death_05 }
			}
		}
		if = {
			limit = {
				is_female = yes
			}
			random_list = {
				5 = { sound_effect = female_violent_death_01 }
				5 = { sound_effect = female_violent_death_02 }
				5 = { sound_effect = female_violent_death_03 }
				5 = { sound_effect = female_violent_death_04 }
			}
		}
	}
	option = {
		name = OK 
	}
}

#FG Rank up duel - opportunity notification, you miss
character_event = {
	id = CHI.3203
	desc = EVTDESC_CHI_3203
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_6
	}
	
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - opportunity notification, were miss
character_event = {
	id = CHI.3204
	desc = EVTDESC_CHI_3204
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_6
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - miss notification, were miss
character_event = {
	id = CHI.3211
	desc = EVTDESC_CHI_3211
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_1
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - miss notification, you miss
character_event = {
	id = CHI.3212
	desc = EVTDESC_CHI_3212
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_1
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - hit notification, were hit
character_event = {
	id = CHI.3221
	desc = EVTDESC_CHI_3221
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = { #maybe add peaceful deaths here and bellow
		sound_effect = land_battle_sword_5
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - hit notification, you hit
character_event = {
	id = CHI.3222
	desc = EVTDESC_CHI_3222
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_5
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - stun notification, you hit
character_event = {
	id = CHI.3231
	desc = EVTDESC_CHI_3231
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_7
		if = {
			limit = {
				FROMFROM = { is_female = no }
			}
			random_list = {
				5 = { sound_effect = male_violent_death_01 }
				5 = { sound_effect = male_violent_death_02 }
				5 = { sound_effect = male_violent_death_03 }
				5 = { sound_effect = male_violent_death_04 }
				5 = { sound_effect = male_violent_death_05 }
			}
		}
		if = {
			limit = {
				FROMFROM = { is_female = yes }
			}
			random_list = {
				5 = { sound_effect = female_violent_death_01 }
				5 = { sound_effect = female_violent_death_02 }
				5 = { sound_effect = female_violent_death_03 }
				5 = { sound_effect = female_violent_death_04 }
			}
		}
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - stun notification, were hit
character_event = {
	id = CHI.3232
	desc = EVTDESC_CHI_3232
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_7
		if = {
			limit = {
				is_female = no
			}
			random_list = {
				5 = { sound_effect = male_violent_death_01 }
				5 = { sound_effect = male_violent_death_02 }
				5 = { sound_effect = male_violent_death_03 }
				5 = { sound_effect = male_violent_death_04 }
				5 = { sound_effect = male_violent_death_05 }
			}
		}
		if = {
			limit = {
				is_female = yes
			}
			random_list = {
				5 = { sound_effect = female_violent_death_01 }
				5 = { sound_effect = female_violent_death_02 }
				5 = { sound_effect = female_violent_death_03 }
				5 = { sound_effect = female_violent_death_04 }
			}
		}
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - stun notification, you miss
character_event = {
	id = CHI.3233
	desc = EVTDESC_CHI_3233
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_6
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - stun notification, were miss
character_event = {
	id = CHI.3234
	desc = EVTDESC_CHI_3234
	picture = GFX_evt_family_feud_republic
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	immediate = {
		sound_effect = land_battle_sword_6
	}
	
	option = {
		name = OK 
	}
}

#FG Rank up duel - see from die
character_event = {
	id = CHI.3261
	picture = GFX_evt_cornered_duel_hf
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_3261_PRET
	}
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
			has_character_flag = chivalry_rank_up_foe
			society_rank <= 3
			
		}
		text = EVTDESC_CHI_3261_FOE
	}
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
			has_character_flag = chivalry_rank_up_foe
			society_rank == 4
		}
		text = EVTDESC_CHI_3261_FOE_CHAMP
	}
	
	desc = { #duel to the death
		trigger = {
			has_character_flag = chivalry_duel_death
			NOT = { has_character_flag = mission_chivalry_hunt_flag }
			NOT = { has_character_flag = chivalry_hunt_target }
			NOT = { has_character_flag = chivalry_rank_up_foe }
			NOT = { has_character_flag = chivalry_rank_up_pretender }
		}
		text = EVTDESC_CHI_3261_DEATH
	}
	
	desc = { #Hunted died
		trigger = {
			has_character_flag = chivalry_duel_death
			has_character_flag = mission_chivalry_hunt_flag
			NOT = { has_character_flag = chivalry_rank_up_foe }
			NOT = { has_character_flag = chivalry_rank_up_pretender }
		}
		text = EVTDESC_CHI_3261_HUNTED
	}
	
	desc = { #hunter died
		trigger = {
			has_character_flag = chivalry_hunt_target
			has_character_flag = chivalry_duel_death
			NOT = { has_character_flag = chivalry_rank_up_foe }
			NOT = { has_character_flag = chivalry_rank_up_pretender }
		}
		text = EVTDESC_CHI_3261_HUNTER
	}
	is_triggered_only = yes
	
	immediate = {
		sound_effect = siege_won
	}
	
	option = { #Rank up in the "you die" event
		name = EVTOPTA_CHI_3261
		trigger = {
			has_character_flag = chivalry_rank_up_pretender
		}
		chivalry_duel_cleaning_final = yes
		add_one_duel_experience_chiwinner_modifier = yes
	}
	option = {
		name = EVTOPTB_CHI_3261
		trigger = {
			has_character_flag = chivalry_rank_up_foe
		}
		chivalry_duel_cleaning_final = yes
		add_one_duel_experience_chiwinner_modifier = yes
		chivalry_champion_bloodline_effect = yes
	}
	option = { #you win duel pilgrim and hunted
		name = EVTOPTC_CHI_3261
		trigger = {
			has_character_flag = chivalry_duel_death
			NOT = { has_character_flag = mission_chivalry_hunt_flag }
			# NOT = { has_character_flag = chivalry_hunt_target }
		}
		prestige = 50
		change_society_currency = 200 
		chivalry_warrior_trait_upgrade = yes
		add_one_duel_experience_chiwinner_modifier = yes
		chivalry_duel_cleaning_final = yes
		clr_character_flag = chivalry_duel_death
		clr_character_flag = chivalry_hunt_target
	}
	option = { #you win duel hunter holy
		name = EVTOPTD_CHI_3261
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
			is_holyorder_societies_trigger = yes
		}
		prestige = 50
		piety = 50
		change_society_currency = 200 
		chivalry_warrior_trait_upgrade = yes
		add_one_duel_experience_chiwinner_modifier = yes
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_heretic
			}
			clr_quest = mission_chivalry_hunt_heretic
			sound_effect = battle_won
			add_mission_succeed_influence_effect = yes
		}
		clr_character_flag = chivalry_duel_death
		clr_character_flag = mission_chivalry_hunt_flag
	}
	option = { #you win duel hunter fighter
		name = EVTOPTE_CHI_3261
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
			is_fighter_societies_trigger = yes
		}
		prestige = 100
		chivalry_bounty_amount = yes
		chivalry_warrior_trait_upgrade = yes
		add_one_duel_experience_chiwinner_modifier = yes
		chivalry_duel_cleaning_final = yes
		sound_effect = battle_won
		FROM = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			change_society_currency = 200 
			add_mission_succeed_influence_effect = yes
			clr_quest = mission_chivalry_hunt_bounty
		}
		FROM = {
			any_close_relative = {
				limit = { NOT = { opinion = { who = FROM value = 0 } } }
				opinion = {
					modifier = opinion_killed_close_kin
					who = ROOT
					years = 5
				}
			}
			any_spouse  = {
				limit = { NOT = { opinion = { who = FROM value = 0 } } }
				opinion = {
					modifier = opinion_spouse_slayer
					who = ROOT
					years = 5
				}
			}
		}
		clr_character_flag = chivalry_duel_death
		clr_character_flag = mission_chivalry_hunt_flag
	}
	
	after = {
		hidden_tooltip = {
			if = {
				limit = { 
					event_target:chivalry_rank_up_pretender = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_pretender = { set_society_grandmaster = yes }
			}
			if = {
				limit = { 
					event_target:chivalry_rank_up_foe = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_foe = { set_society_grandmaster = yes }
			}
		}
	}
}

#FG Rank up duel - you die
character_event = {
	id = CHI.3262
	picture = GFX_evt_cornered_duel_hf
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_3262_PRET
	}
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_3262_FOE
	}
	desc = { #duel to the death
		trigger = {
			has_character_flag = chivalry_duel_death
			NOT = { has_character_flag = mission_chivalry_hunt_flag }
			NOT = { has_character_flag = chivalry_hunt_target }
			NOT = { has_character_flag = chivalry_rank_up_foe }
			NOT = { has_character_flag = chivalry_rank_up_pretender }
		}
		text = EVTDESC_CHI_3262_DEATH
	}
	
	desc = { #Hunted died
		trigger = {
			has_character_flag = chivalry_duel_death
			has_character_flag = mission_chivalry_hunt_flag
			NOT = { has_character_flag = chivalry_rank_up_foe }
			NOT = { has_character_flag = chivalry_rank_up_pretender }
		}
		text = EVTDESC_CHI_3262_HUNTED
	}
	
	desc = { #hunter died
		trigger = {
			has_character_flag = chivalry_hunt_target
			has_character_flag = chivalry_duel_death
			NOT = { has_character_flag = chivalry_rank_up_foe }
			NOT = { has_character_flag = chivalry_rank_up_pretender }
		}
		text = EVTDESC_CHI_3262_HUNTER
	}
	
	is_triggered_only = yes
	
	immediate = {
		sound_effect = land_battle_sword_7
	}
	
	option = { #You die trying to rank up
		name = EVTOPTA_CHI_3262
		trigger = {
			has_character_flag = chivalry_rank_up_pretender
		}
		if = {
			limit = {
				FROMFROM = { is_fighter_societies_trigger = yes }
			}
			FROMFROM = { character_event = { id = CHI.350 } } #gain weapon
		}
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_game_rule = {
					name = chivalry_rule_death
					value = none
				}
			}
			add_character_modifier = {
				name = chivalry_dance_with_death
				duration = -1
				stacking = yes
			}
		}
		else = {
			death = { death_reason = death_duel killer = FROMFROM } 
		}
	}
	option = { #You die, see him rank up
		name = EVTOPTB_CHI_3262
		trigger = {
			has_character_flag = chivalry_rank_up_foe
		}
		if = {
			limit = {
				FROMFROM = { is_fighter_societies_trigger = yes }
			}
			FROMFROM = { character_event = { id = CHI.350 } } #gain weapon
		}
		chivalry_duel_cleaning_final = yes
		event_target:chivalry_rank_up_pretender = { society_rank_up = 1 }
		event_target:chivalry_rank_up_foe = { society_rank_down = 1 }
		if = {
			limit = {
				has_game_rule = {
					name = chivalry_rule_death
					value = none
				}
			}
			add_character_modifier = {
				name = chivalry_dance_with_death
				duration = -1
				stacking = yes
			}
		}
		else = {
			death = { death_reason = death_duel killer = FROMFROM } 
		}
	}
	option = { #You die while duel pilgrim/hunter
		name = EVTOPTC_CHI_3262
		trigger = {
			has_character_flag = chivalry_duel_death
		}
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				FROMFROM = { is_fighter_societies_trigger = yes }
			}
			FROMFROM = { character_event = { id = CHI.350 } } #gain weapon
		}
		if = {
			limit = {
				FROMFROM = { is_fighter_societies_trigger = yes }
				is_ruler = no
			}
			liege = { character_event = { id = CHI.2043 } }
		}
		else_if = {
			limit = {
				FROMFROM = { is_holyorder_societies_trigger = yes }
				is_ruler = no
			}
			liege = { character_event = { id = CHI.1943 } }
		}
		random_opinion_modifier_target = {
			limit = {
				ROOT = {
					has_opinion_modifier = {
						who = PREV
						modifier = opinion_chivalry_client
					}
				}
			}
			character_event = { id = CHI.208 }
		}
		if = {
			limit = {
				has_game_rule = {
					name = chivalry_rule_death
					value = none
				}
			}
			add_character_modifier = {
				name = chivalry_dance_with_death
				duration = -1
				stacking = yes
			}
			clr_character_flag = chivalry_duel_death
			clr_character_flag = chivalry_hunt_target 
		}
		else = {
			death = { death_reason = death_duel killer = FROMFROM } 
		}
		hidden_tooltip = {
			event_target:chivalry_event_duel = { 
				death = {
					death_reason = death_missing
				}
			}
		}
	}
	
	after = {
		hidden_tooltip = {
			if = {
				limit = { 
					event_target:chivalry_rank_up_pretender = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_pretender = { set_society_grandmaster = yes }
			}
			if = {
				limit = { 
					event_target:chivalry_rank_up_foe = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_foe = { set_society_grandmaster = yes }
			}
		}
	}
}

#FG Rank up duel - you won
character_event = {
	id = CHI.327
	picture = GFX_evt_feast_hf
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			society_rank == 1
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_327_1_PRET
	}
	
	desc = {
		trigger = {
			society_rank == 2
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_327_2_PRET
	}
	
	desc = {
		trigger = {
			society_rank == 3
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_327_3_PRET
	}
	
	desc = {
		trigger = {
			society_rank == 2
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_327_2_FOE
	}
	
	desc = {
		trigger = {
			society_rank == 3
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_327_3_FOE
	}
	
	desc = {
		trigger = {
			society_rank == 4
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_327_4_FOE
	}
	
	is_triggered_only = yes
	
	immediate = {
		sound_effect = siege_won
	}
	
	option = { #Pretender won and rank up
		name = EVTOPTA_CHI_327
		trigger = {
			has_character_flag = chivalry_rank_up_pretender
			FROM = { NOT = { society_rank == 4 } }
		}
		add_one_duel_experience_chiwinner_modifier = yes
		change_society_currency = 150
		prestige = 50
		# society_rank_up = 1
		event_target:chivalry_rank_up_pretender = { society_rank_up = 1 }
		event_target:chivalry_rank_up_foe = { society_rank_down = 1 }
		chivalry_duel_cleaning_final = yes
	}
	option = { #Pretender won and rank up to champion
		name = EVTOPTB_CHI_327
		trigger = {
			has_character_flag = chivalry_rank_up_pretender
			FROM = { society_rank == 4 }
		}
		add_one_duel_experience_chiwinner_modifier = yes
		change_society_currency = 150
		prestige = 250
		# society_rank_up = 1
		# set_society_grandmaster = yes
		event_target:chivalry_rank_up_pretender = { society_rank_up = 1 }
		event_target:chivalry_rank_up_foe = { society_rank_down = 1 }
		chivalry_duel_cleaning_final = yes
	}
	option = { #Challenged foe rank stay
		name = EVTOPTC_CHI_327
		trigger = {
			has_character_flag = chivalry_rank_up_foe
			NOT = { society_rank == 4 }
		}
		add_one_duel_experience_chiwinner_modifier = yes
		change_society_currency = 150
		prestige = 50
		chivalry_duel_cleaning_final = yes
	}
	option = { #Challenged foe stay champion!
		name = EVTOPTD_CHI_327
		trigger = {
			has_character_flag = chivalry_rank_up_foe
			society_rank == 4
		}
		add_one_duel_experience_chiwinner_modifier = yes
		change_society_currency = 150
		prestige = 50
		chivalry_duel_cleaning_final = yes
		chivalry_champion_bloodline_effect = yes
	}
	after = {
		hidden_tooltip = {
			if = {
				limit = { 
					event_target:chivalry_rank_up_pretender = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_pretender = { set_society_grandmaster = yes }
			}
			if = {
				limit = { 
					event_target:chivalry_rank_up_foe = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_foe = { set_society_grandmaster = yes }
			}
		}
	}
}

#FG Rank up duel - you lost
character_event = {
	id = CHI.328
	picture = GFX_evt_drunk
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			society_rank == 1
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_328_1_PRET
	}
	
	desc = {
		trigger = {
			society_rank == 2
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_328_2_PRET
	}
	
	desc = {
		trigger = {
			society_rank == 3
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_328_3_PRET
	}
	
	desc = {
		trigger = {
			society_rank == 1
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_328_2_FOE
	}
	
	desc = {
		trigger = {
			society_rank == 2
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_328_3_FOE
	}
	
	desc = {
		trigger = {
			society_rank == 3
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_328_4_FOE
	}
	
	is_triggered_only = yes
	
	immediate = {
		sound_effect = siege_lost
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Pretender lost and wont rank up
		name = EVTOPTA_CHI_328
		trigger = {
			has_character_flag = chivalry_rank_up_pretender
			FROM = { NOT = { society_rank == 4 } }
		}
		add_one_duel_experience_chiloser_modifier = yes
		change_society_currency = -150
		prestige = -50
		chivalry_duel_cleaning_final = yes
	}
	option = { #Pretender lost and wont rank up to champion
		name = EVTOPTB_CHI_328
		trigger = {
			has_character_flag = chivalry_rank_up_pretender
			FROM = { society_rank == 4 }
		}
		add_one_duel_experience_chiloser_modifier = yes
		add_one_duel_experience_chiloser_modifier = yes
		change_society_currency = -500
		prestige = -200
		chivalry_duel_cleaning_final = yes
	}
	option = { #Challenged foe rank down
		name = EVTOPTC_CHI_328
		trigger = {
			has_character_flag = chivalry_rank_up_foe
			NOT = { society_rank == 4 }
		}
		add_one_duel_experience_chiloser_modifier = yes
		change_society_currency = -150
		prestige = -50
		# FROM = { society_rank_up = 1 }
		# society_rank_down = 1
		chivalry_duel_cleaning_final = yes
	}
	option = { #Challenged foe lose champion title!
		name = EVTOPTD_CHI_328
		trigger = {
			has_character_flag = chivalry_rank_up_foe
			society_rank == 4
		}
		add_one_duel_experience_chiloser_modifier = yes
		change_society_currency = -150
		prestige = -50
		# FROM = { society_rank_up = 1 }
		# society_rank_down = 1
		chivalry_duel_cleaning_final = yes
	}

	after = {
		clr_character_flag = chivalry_block_currency
		hidden_tooltip = {
			if = {
				limit = { 
					event_target:chivalry_rank_up_pretender = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_pretender = { set_society_grandmaster = yes }
			}
			if = {
				limit = { 
					event_target:chivalry_rank_up_foe = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_foe = { set_society_grandmaster = yes }
			}
		}
	}
}

#FG Rank up duel - reward post yield
character_event = {
	id = CHI.329
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_feast_hf
	
	desc = {
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				FROM = { trait = wounded }
			}
			society_rank == 1
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_329_1_PRET
		picture = GFX_evt_feast_hf
	}
	
	desc = {
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				FROM = { trait = wounded }
			}
			society_rank == 2
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_329_2_PRET
		picture = GFX_evt_feast_hf
	}
	
	desc = {
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				FROM = { trait = wounded }
			}
			society_rank == 3
			has_character_flag = chivalry_rank_up_pretender
		}
		text = EVTDESC_CHI_329_3_PRET
		picture = GFX_evt_feast_hf
	}
	
	desc = {
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				FROM = { trait = wounded }
			}
			society_rank == 2
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_329_2_FOE
		picture = GFX_evt_feast_hf
	}
	
	desc = {
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				FROM = { trait = wounded }
			}
			society_rank == 3
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_329_3_FOE
		picture = GFX_evt_feast_hf
	}
	
	desc = {
		trigger = {
			NAND = {
				has_character_flag = chivalry_duel_wounded
				FROM = { trait = wounded }
			}
			society_rank == 4
			has_character_flag = chivalry_rank_up_foe
		}
		text = EVTDESC_CHI_329_4_FOE
		picture = GFX_evt_feast_hf
	}
	
	desc = {
		trigger = {
			has_character_flag = chivalry_duel_wounded
			FROM = { trait = wounded }
		}
		text = EVTDESC_CHI_329_PILGRIM_YIELD
		picture = GFX_evt_rider_adventure
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_hunt_target }
			FROM = { is_ruler = yes }
			is_holyorder_societies_trigger = yes
		}
		text = EVTDESC_CHI_329_HUNT_LAND_HOLY
		picture = GFX_evt_humiliation_prisoner
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_hunt_target }
			FROM = { is_ruler = no }
			is_holyorder_societies_trigger = yes
		}
		text = EVTDESC_CHI_329_HUNT_UNLAND_HOLY
		picture = GFX_evt_hiding_from_pursuers
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_hunt_target }
			FROM = { is_ruler = yes }
			is_fighter_societies_trigger = yes
		}
		text = EVTDESC_CHI_329_HUNT_LAND_BOUNTY
		picture = GFX_evt_humiliation_prisoner
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_hunt_target }
			FROM = { is_ruler = no }
			is_fighter_societies_trigger = yes
		}
		text = EVTDESC_CHI_329_HUNT_UNLAND_BOUNTY
		picture = GFX_evt_hiding_from_pursuers
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_hunt_flag }
		}
		text = EVTDESC_CHI_329_HUNTER
		picture = GFX_evt_hiding_from_pursuers
	}
	
	is_triggered_only = yes
	
	immediate = {
		sound_effect = siege_won
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Rank up
		name = EVTOPTA_CHI_329
		trigger = {
			has_character_flag = chivalry_rank_up_pretender
			FROM = { NOT = { society_rank == 4 } }
		}
		change_society_currency = 150
		prestige = 50
		# society_rank_up = 1
		event_target:chivalry_rank_up_pretender = { society_rank_up = 1 }
		event_target:chivalry_rank_up_foe = { society_rank_down = 1 }
		chivalry_duel_cleaning_final = yes
	}
	option = { #Become champion
		name = EVTOPTB_CHI_329
		trigger = {
			has_character_flag = chivalry_rank_up_pretender
			FROM = { society_rank == 4 }
		}
		change_society_currency = 150
		prestige = 250
		# society_rank_up = 1
		event_target:chivalry_rank_up_pretender = { society_rank_up = 1 }
		event_target:chivalry_rank_up_foe = { society_rank_down = 1 }
		chivalry_duel_cleaning_final = yes
	}
	option = { #Don't rank down
		name = EVTOPTC_CHI_329
		trigger = {
			has_character_flag = chivalry_rank_up_foe
		}
		change_society_currency = 150
		prestige = 50
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				society_rank == 4
			}
			chivalry_champion_bloodline_effect = yes
		}
	}
	option = { #Pilgrim yielded due to wound
		name = EVTOPTD_CHI_329
		trigger = {
			has_character_flag = chivalry_duel_wounded
			FROM = { trait = wounded }
		}
		change_society_currency = 100
		prestige = 50
		chivalry_duel_cleaning_final = yes
		clr_character_flag = chivalry_duel_wounded
		hidden_tooltip = {
			event_target:chivalry_event_duel = { 
				death = {
					death_reason = death_missing
				}
			}
		}
		random = {
			chance = 50
			chivalry_warrior_trait_upgrade = yes
		}
	}
	option = { #Hunted Heretic Yield
		name = EVTOPTE_CHI_329
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
			is_holyorder_societies_trigger = yes
		}
		change_society_currency = 150
		FROM = { transfer_scaled_wealth = { to = ROOT value = 2 min = 50 max = 500 } }
		chivalry_duel_cleaning_final = yes
		clr_quest = mission_chivalry_hunt_heretic
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		clr_character_flag = chivalry_duel_death
		clr_character_flag = mission_chivalry_hunt_flag
		chivalry_warrior_trait_upgrade = yes
		FROM = { clr_character_flag = chivalry_hunt_target }
		# FROM = { clr_character_flag = mission_chivalry_hunt_flag } #not sure why its there
		break = yes
	}
	option = { #Hunted Heretic Yield KILL
		name = EVTOPTF_CHI_329
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
			is_holyorder_societies_trigger = yes
		}
		change_society_currency = 200
		prestige = 50
		piety = 50
		chivalry_duel_cleaning_final = yes
		clr_quest = mission_chivalry_hunt_heretic
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		clr_character_flag = chivalry_duel_death
		clr_character_flag = mission_chivalry_hunt_flag
		chivalry_warrior_trait_upgrade = yes
		
		if = {
			limit = {
				has_game_rule = {
					name = chivalry_rule_death
					value = none
				}
			}
			FROM = {
				add_character_modifier = {
					name = chivalry_dance_with_death
					duration = -1
					stacking = yes
				}
				clr_character_flag = chivalry_duel_death
				clr_character_flag = chivalry_hunt_target 
			}
		}
		else = {
			FROM = { death = { death_reason = death_duel killer = ROOT } }
		}
		break = yes
	}
	option = { #Hunted bounty Yield
		name = EVTOPTG_CHI_329
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
			is_fighter_societies_trigger = yes
		}
		prestige = -50
		FROM = { transfer_scaled_wealth = { to = ROOT value = 2 min = 50 max = 500 } }
		chivalry_bounty_amount = yes
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			change_society_currency = 100 
			# add_mission_succeed_influence_effect = yes
			clr_quest = mission_chivalry_hunt_bounty
		}
		sound_effect = battle_won
		clr_character_flag = chivalry_duel_death
		clr_character_flag = mission_chivalry_hunt_flag
		chivalry_warrior_trait_upgrade = yes
		FROM = { clr_character_flag = chivalry_hunt_target }
		# FROM = { clr_character_flag = mission_chivalry_hunt_flag } #not sure why its there
		break = yes
	}
	option = { #Hunted bounty Yield KILL
		name = EVTOPTH_CHI_329
		trigger = {
			has_character_flag = mission_chivalry_hunt_flag
			is_fighter_societies_trigger = yes
		}
		prestige = 50
		chivalry_bounty_amount = yes
		chivalry_duel_cleaning_final = yes
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			change_society_currency = 200 
			add_mission_succeed_influence_effect = yes
			clr_quest = mission_chivalry_hunt_bounty
		}
		sound_effect = battle_won
		clr_character_flag = chivalry_duel_death
		clr_character_flag = mission_chivalry_hunt_flag
		chivalry_warrior_trait_upgrade = yes
		chivalry_give_trophy = yes #gain weapon
		FROM = {
			any_close_relative = {
				limit = { NOT = { opinion = { who = FROM value = 0 } } }
				opinion = {
					modifier = opinion_killed_close_kin
					who = ROOT
					years = 5
				}
			}
			any_spouse  = {
				limit = { NOT = { opinion = { who = FROM value = 0 } } }
				opinion = {
					modifier = opinion_spouse_slayer
					who = ROOT
					years = 5
				}
			}
		}
		if = {
			limit = {
				has_game_rule = {
					name = chivalry_rule_death
					value = none
				}
			}
			FROM = {
				add_character_modifier = {
					name = chivalry_dance_with_death
					duration = -1
					stacking = yes
				}
				clr_character_flag = chivalry_duel_death
				clr_character_flag = chivalry_hunt_target 
			}
		}
		else = {
			FROM = { death = { death_reason = death_duel killer = ROOT } }
		}
		# FROM = { clr_character_flag = mission_chivalry_hunt_flag } #not sure why its there
		break = yes
	}
	option = { #Hunter Yield
		name = EVTOPTI_CHI_329
		trigger = {
			has_character_flag = chivalry_hunt_target
		}
		prestige = 200
		chivalry_duel_cleaning_final = yes
		clr_character_flag = chivalry_duel_death
		clr_character_flag = chivalry_hunt_target 
		chivalry_warrior_trait_upgrade = yes
		FROM = { save_event_target_as = kinslayer_target }
		add_kinslayer_trait_effect = yes
		FROM = { clr_character_flag = chivalry_hunt_target }
		FROM = { clr_character_flag = mission_chivalry_hunt_flag }
		break = yes
	}

	after = {
		clr_character_flag = chivalry_block_currency
		hidden_tooltip = {
			if = {
				limit = { 
					event_target:chivalry_rank_up_pretender = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_pretender = { set_society_grandmaster = yes }
			}
			if = {
				limit = { 
					event_target:chivalry_rank_up_foe = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_foe = { set_society_grandmaster = yes }
			}
		}
	}
}

#FG Rank up duel - refused fight
character_event = {
	id = CHI.3291
	desc = EVTDESC_CHI_3291
	picture = GFX_evt_feast_hf
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	immediate = {
		sound_effect = siege_won
	}
	
	option = { #Rank up with no reward
		name = EVTOPTA_CHI_3291
		# society_rank_up = 1
		event_target:chivalry_rank_up_pretender = { society_rank_up = 1 }
		event_target:chivalry_rank_up_foe = { society_rank_down = 1 }
		chivalry_duel_cleaning_final = yes
	}
	after = {
		hidden_tooltip = {
			if = {
				limit = { 
					event_target:chivalry_rank_up_pretender = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_pretender = { set_society_grandmaster = yes }
			}
			if = {
				limit = { 
					event_target:chivalry_rank_up_foe = { society_rank == 4 }
				}
				event_target:chivalry_rank_up_foe = { set_society_grandmaster = yes }
			}
		}
	}
}