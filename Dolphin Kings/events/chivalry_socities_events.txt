namespace = CHI

#10 joining + maintenance
#11 rank up
#12 quest tombola
#13 HO focus
#14	FG focus
#15	HO help war
#16	FG help war
#17	HO training
#18 FG training
#19 HO hunt
#20 FG hunt
#21 HO/FG battle
#saving 21-29 for more mission
#30 Squire / Lady-In-Waiting
#31-32 Duel Engine
#33 commander/pilgrim
#34 holy order laws
#35 artifact weapon
#36 resting
#37 custom title / governement management
#38 broken/head trophy
#39 Arenas
#40 Holy Castles
#41 Gym
#42 Bloodline
#43 Forced Crusade

# Audax Validator "!" Ignore_1001
# Audax Validator "!" Ignore_1004

#Ping event

###############Joining and Title Management###################

#Join a society
character_event = {
	id = CHI.100
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		FROM = { 
			leader = { 
				OR = {
					is_holyorder_societies_trigger = yes
					is_fighter_societies_trigger = yes
				}
			} 
		}
	}
	immediate = {
		FROM = { leader = { character_event = { id = CHI.101 } } }
	}
}

#Ping event
character_event = {
	id = CHI.101
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { letter_event = { id = CHI.102 } }
	}
}

#Welcome letter
letter_event = {
	id = CHI.102
	border = GFX_event_letter_frame_war_chivalry

	desc = {
		trigger = {
			FROM = { is_holyorder_societies_trigger = yes }
			FROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_102_holy
	}
	
	# desc = {
		# trigger = {
			# FROM = { is_holyorder_societies_trigger = yes }
			# FROM = { society_member_of = society_holy_one }
		# }
		# text = EVTDESC_CHI_102_holy_custom
	# }
	
	desc = {
		trigger = {
			FROM = { is_fighter_societies_trigger = yes }
		}
		text = EVTDESC_CHI_102_fighter
	}
	
	
	is_triggered_only = yes
	
	immediate = { set_character_flag = society_join_block }

	option = { #join holy order
		name = EVTOPTA_CHI_102
		trigger = {
			FROM = { is_holyorder_societies_trigger = yes }
			FROM = { NOT = { society_member_of = society_sons_of_judea } }
		}
		# FROM = { ROOT = { join_prev_chivalry_order_society = yes } }
		join_from_chivalry_order_society = yes
	}
	option = { #join fighters guild
		name = EVTOPTB_CHI_102
		trigger = {
			FROM = { is_fighter_societies_trigger = yes }
		}
		# FROM = { ROOT = { join_prev_chivalry_order_society = yes } }
		join_from_chivalry_order_society = yes
	}
	option = { #join guardian of the temple + oath
		name = EVTOPTD_CHI_102
		trigger = {
			FROM = { society_member_of = society_sons_of_judea }
		}
		custom_tooltip = { text = chivalry_nazirite_tooltip }
		remove_trait = drunkard
		remove_trait = hedonist
		# FROM = { ROOT = { join_prev_chivalry_order_society = yes } }
		join_from_chivalry_order_society = yes
	}
	option = { #don't
		name = EVTOPTC_CHI_102
	}
	after = {	
		clr_character_flag = society_join_block
	}
}

#Force the ai to join a society
character_event = {
	id = CHI.103
	hide_window = yes
	
	is_triggered_only = yes
	only_rulers = yes
	ai = yes
	
	immediate = {
		any_courtier = { #commanders join fighters guilds
			limit = {
				is_ruler = no
				prisoner = no
				is_incapable = no
				is_adult = yes
				is_in_society = no
				controls_religion = no
				has_female_fighter_societies_prerequisites = yes
				block_general_event_trigger = no
			}
			character_event = { id = CHI.104 }
		}
		if = {
			limit = {
				NOT = { has_dlc = "Mystics" }#To avoid issue as there is already an event chain for those with the DLC
			}
			any_courtier = { #courtier free rank up
				limit = {
					is_ruler = no
					prisoner = no
					is_incapable = no
					OR = {
						is_holyorder_societies_trigger = yes
						is_fighter_societies_trigger = yes
					}
					society_rank <= 3
					society_can_rank_up = yes
				}
				random_list = {
					75 = {}
					25 = {
						society_rank_up = 1				
						if = { 
							limit = {
								society_rank == 4
							}
							set_society_grandmaster = yes
						}
					}
				}
			}
		}
		# any_courtier = { #commanders fight to rank up #they can actually use the decision
			# limit = {
				# is_ruler = no
				# prisoner = no
				# is_incapable = no
				# is_fighter_societies_trigger = yes
				# society_rank <= 3
				# NOT = { trait = wounded }
			# }
			# set_variable = { which = chivalry_duel value = 0 } #test these rank up issue
			# set_character_flag = chivalry_rank_up_pretender
			# save_event_target_as = chivalry_rank_up_pretender
			# clr_character_flag = chivalry_recent_duel
			# set_character_flag = chivalry_recent_duel
			# chivalry_duel_cleaning = yes
			# society = { #the duel prerequist so they don't challenge the wrong guy
				# random_society_member = {
					# limit = { 	
						# OR = {
							# chivalry_valid_target = yes
							# OR = {
								# NOT = { has_character_flag = chivalry_recent_duel }
								# had_character_flag = { flag = chivalry_recent_duel days = 500 }
								# AND = {
									# had_character_flag = { flag = chivalry_recent_duel days = 365 }
									# AI = yes
								# }
								# AND = {
									# had_character_flag = { flag = chivalry_recent_duel days = 180 }
									# society_rank == 4
									# AI = no
								# }
								# AND = {
									# had_character_flag = { flag = chivalry_recent_duel days = 90 }
									# society_rank == 4
									# AI = yes
								# }
							# }
						# }
						# OR = {
							# AND = {
								# society_rank == 2
								# ROOT = { society_rank == 1 }
							# }
							# AND = {
								# society_rank == 3
								# ROOT = { society_rank == 2 }
							# }
							# AND = {
								# OR = {
									# society_rank == 4
									# NOT = {
										# society = {
											# any_society_member = {
												# is_society_grandmaster = yes
											# }
										# }
									# }
								# }
								# ROOT = { society_rank == 3 }
							# }
						# }
					# }
					# chivalry_duel_cleaning = yes
					# clr_character_flag = chivalry_recent_duel
					# set_character_flag = chivalry_recent_duel
					# set_character_flag = chivalry_rank_up_foe
					# save_event_target_as = chivalry_rank_up_foe
					# set_variable = { which = chivalry_duel value = 0 }
					# character_event = { id = CHI.3101 }
				# }
			# }
		# }
		if = { #rulers free rank up
			limit = { #if he's already a member, will force a rank up 25% of the time
				NOT = { has_dlc = "Mystics" }#To avoid issue as there is already an event chain for those with the DLC
				prisoner = no
				is_incapable = no
				OR = {
					is_holyorder_societies_trigger = yes
					is_fighter_societies_trigger = yes
				}
				society_rank <= 3
				society_can_rank_up = yes
			}
			random_list = {
				75 = {}
				25 = {
					society_rank_up = 1		
					if = { 
						limit = {
							society_rank == 4
						}
						set_society_grandmaster = yes
					}
				}
			}
		}
		# if = { #rulers fight to rank up / they can actually use the decision
			# limit = {
				# prisoner = no
				# is_incapable = no
				# is_fighter_societies_trigger = yes
				# society_rank <= 3
				# NOT = { trait = wounded }
			# }
			# set_variable = { which = chivalry_duel value = 0 } #test these rank up issue
			# set_character_flag = chivalry_rank_up_pretender
			# save_event_target_as = chivalry_rank_up_pretender
			# clr_character_flag = chivalry_recent_duel
			# set_character_flag = chivalry_recent_duel
			# chivalry_duel_cleaning = yes
			# society = { #the duel prerequist so they don't challenge the wrong guy
				# random_society_member = {
					# limit = { 	
						# OR = {
							# chivalry_valid_target = yes
							# OR = {
								# NOT = { has_character_flag = chivalry_recent_duel }
								# had_character_flag = { flag = chivalry_recent_duel days = 500 }
								# AND = {
									# had_character_flag = { flag = chivalry_recent_duel days = 365 }
									# AI = yes
								# }
								# AND = {
									# had_character_flag = { flag = chivalry_recent_duel days = 180 }
									# society_rank == 4
									# AI = no
								# }
								# AND = {
									# had_character_flag = { flag = chivalry_recent_duel days = 90 }
									# society_rank == 4
									# AI = yes
								# }
							# }
						# }
						# OR = {
							# AND = {
								# society_rank == 2
								# ROOT = { society_rank == 1 }
							# }
							# AND = {
								# society_rank == 3
								# ROOT = { society_rank == 2 }
							# }
							# AND = {
								# OR = {
									# society_rank == 4
									# NOT = {
										# society = {
											# any_society_member = {
												# is_society_grandmaster = yes
											# }
										# }
									# }
								# }
								# ROOT = { society_rank == 3 }
							# }
						# }
					# }
					# chivalry_duel_cleaning = yes
					# clr_character_flag = chivalry_recent_duel
					# set_character_flag = chivalry_recent_duel
					# set_character_flag = chivalry_rank_up_foe
					# save_event_target_as = chivalry_rank_up_foe
					# set_variable = { which = chivalry_duel value = 0 }
					# character_event = { id = CHI.3101 }
					
				# }
			
			# }
		# }
		if = { #force the joining event on AI
			limit = {
				is_ruler = yes
				is_in_society = no
				controls_religion = no
				block_general_event_trigger = no
				OR = {
					has_holyorder_societies_prerequisites = yes
					has_female_fighter_societies_prerequisites = yes
				}
			}
			character_event = { id = CHI.104 }
		}
	}
}

#ai join chivalry orders
character_event = { 
	id = CHI.104
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			50 = { }
			10 = { #knights_templar
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_knights_templar
					can_join_society = society_knights_templar
				}
				modifier = { 
					factor = 5
					culture_group = latin #central_germanic 4 teuton #iberian for spains
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_knights_templar 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #knights_hospitaller
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_knights_hospitaler
					can_join_society = society_knights_hospitaller
				}
				modifier = { 
					factor = 5
					culture_group = latin
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_knights_hospitaller 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #teutonic_order
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_teutonic_order_active = yes
					can_join_society = society_teutonic_order
				}
				modifier = { 
					factor = 5
					culture_group = central_germanic
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_teutonic_order 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #knights_calatrava
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_knights_calatrava
					can_join_society = society_knights_calatrava
				}
				modifier = { 
					factor = 5
					culture_group = iberian
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_knights_calatrava 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #knights_santiago
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_knights_santiago
					can_join_society = society_knights_santiago
				}
				modifier = { 
					factor = 5
					culture_group = iberian
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_knights_santiago 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #holy_sepulchre
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_holy_sepulchre
					can_join_society = society_holy_sepulchre
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_holy_sepulchre 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #saint_anthony
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_saint_anthony
					can_join_society = society_saint_anthony
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_saint_anthony 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #saint_addai
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_saint_addai
					can_join_society = society_saint_addai
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_saint_addai 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #bektashi
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_bektashi
					can_join_society = society_bektashi
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_bektashi 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #haruriyyah
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_haruriyyah
					can_join_society = society_haruriyyah
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_haruriyyah 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #zealots
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_zealots
					can_join_society = society_zealots
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_zealots 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #immortals
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_immortals
					can_join_society = society_immortals
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_immortals 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #jomsvikings
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_jomsvikings
					can_join_society = society_jomsvikings
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_jomsvikings 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #sky_lords
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_sky_lords
					can_join_society = society_sky_lords
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_sky_lords 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #spirit_guardians
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_spirit_guardians
					can_join_society = society_spirit_guardians
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_spirit_guardians 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #warriors_perun
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_warriors_perun
					can_join_society = society_warriors_perun
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_warriors_perun 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #chosen_perkunas
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_chosen_perkunas
					can_join_society = society_chosen_perkunas
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_chosen_perkunas 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #sons_kaleva
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_sons_kaleva
					can_join_society = society_sons_kaleva
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_sons_kaleva 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #huitzilopochtli
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_huitzilopochtli
					can_join_society = society_huitzilopochtli
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_huitzilopochtli 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #ashokas_chosen
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_ashokas_chosen
					can_join_society = society_ashokas_chosen
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_ashokas_chosen 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #followers_arjuna
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_followers_arjuna
					can_join_society = society_followers_arjuna
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_followers_arjuna 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #bulls_rishabha
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_bulls_rishabha
					can_join_society = society_bulls_rishabha
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_bulls_rishabha
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #zun_warriors
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_zun_warriors
					can_join_society = society_zun_warriors
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_zun_warriors
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #army_light
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_army_light
					can_join_society = society_army_light
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_army_light
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #myrmidons
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_myrmidons
					can_join_society = society_myrmidons
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_myrmidons
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #myrmidons
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_title_active = d_dralhas_children
					can_join_society = society_dralhas_children
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_dralhas_children
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			############# Fighters Guilds
			10 = { #western
				trigger = { 
					can_join_society = society_western_guild
				}
				modifier = { 
					factor = 5
					NOT = { trait = zealous }
				}
				modifier = { 
					factor = 0.5
					is_female = yes
				}
				join_society = society_western_guild 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #southern
				trigger = { 
					can_join_society = society_southern_guild
				}
				modifier = { 
					factor = 5
					NOT = { trait = zealous }
				}
				modifier = { 
					factor = 0.5
					is_female = yes
				}
				join_society = society_southern_guild 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #northern
				trigger = { 
					can_join_society = society_northern_guild
				}
				modifier = { 
					factor = 5
					NOT = { trait = zealous }
				}
				modifier = { 
					factor = 0.5
					is_female = yes
				}
				join_society = society_northern_guild 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #eastern
				trigger = { 
					can_join_society = society_eastern_guild
				}
				modifier = { 
					factor = 5
					NOT = { trait = zealous }
				}
				modifier = { 
					factor = 0.5
					is_female = yes
				}
				join_society = society_eastern_guild 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			############# PLUS-HIP
			10 = { #livonian_brothers_of_the_sword
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					is_livonian_order_active = yes
					can_join_society = society_livonian_brothers_of_the_sword
				}
				modifier = { 
					factor = 5
					culture_group = central_germanic
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_livonian_brothers_of_the_sword 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #saint_blaise
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					OR = {
						has_global_flag = HIPEMF_ACTIVE
						has_global_flag = CK2PLUS_ACTIVE
					}
					is_title_active = d_saint_blaise
					can_join_society = society_saint_blaise
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_saint_blaise 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #knights_saint_mark
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					OR = {
						has_global_flag = HIPEMF_ACTIVE
						has_global_flag = CK2PLUS_ACTIVE
					}
					is_title_active = d_knights_saint_mark
					can_join_society = society_knights_saint_mark
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_knights_saint_mark 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #army_lucifer
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					OR = {
						has_global_flag = HIPEMF_ACTIVE
						has_global_flag = CK2PLUS_ACTIVE
					}
					is_title_active = d_army_lucifer
					can_join_society = society_army_lucifer
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_army_lucifer 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #arsiyah
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = HIPEMF_ACTIVE
					is_title_active = d_arsiyah
					can_join_society = society_arsiyah
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_arsiyah 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #saqaliba
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = HIPEMF_ACTIVE
					is_title_active = d_saqaliba
					can_join_society = society_saqaliba
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_saqaliba 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #devotees_of_the_true_prophet
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_devotees_of_the_true_prophet
					can_join_society = society_devotees_of_the_true_prophet
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_devotees_of_the_true_prophet 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #ansar
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_ansar
					can_join_society = society_ansar
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_ansar 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #ghazi_sunni
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_ghazi_sunni
					can_join_society = society_ghazi_sunni
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_ghazi_sunni 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #ghazi_shiite
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_ghazi_shiite
					can_join_society = society_ghazi_shiite
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_ghazi_shiite 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #sons_of_judea
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_sons_of_judea
					can_join_society = society_sons_of_judea
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_sons_of_judea 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #braedralag
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_braedralag
					can_join_society = society_braedralag
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_braedralag 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #harii
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_harii
					can_join_society = society_harii
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_harii 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #fianna
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					OR = {
						has_global_flag = CK2PLUS_ACTIVE
						has_global_flag = ANCREL_ACTIVE
					}
					is_title_active = d_fianna
					can_join_society = society_fianna
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_fianna 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #gwydion
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_gwydion
					can_join_society = society_gwydion
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_gwydion 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #red_dragons
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					OR = {
						has_global_flag = CK2PLUS_ACTIVE
						has_global_flag = ANCREL_ACTIVE
					}
					is_title_active = d_red_dragons
					can_join_society = society_red_dragons
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_red_dragons 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #anubis
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					OR = {
						has_global_flag = CK2PLUS_ACTIVE
						has_global_flag = ANCREL_ACTIVE
					}
					is_title_active = d_anubis
					can_join_society = society_anubis
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_anubis 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #horus
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					OR = {
						has_global_flag = CK2PLUS_ACTIVE
						has_global_flag = ANCREL_ACTIVE
					}
					is_title_active = d_horus
					can_join_society = society_horus
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_horus 
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #herculean
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_herculean
					can_join_society = society_herculean
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_herculean
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #sacred_band
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					OR = {
						has_global_flag = CK2PLUS_ACTIVE
						has_global_flag = ANCREL_ACTIVE
					}
					is_title_active = d_sacred_band
					can_join_society = society_sacred_band
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_sacred_band
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #great_host
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_great_host
					can_join_society = society_great_host
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_great_host
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #guardians_of_the_sacred_flame
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_guardians_of_the_sacred_flame
					can_join_society = society_guardians_of_the_sacred_flame
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_guardians_of_the_sacred_flame
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			20 = { #disciples_of_the_old_gods
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = CK2PLUS_ACTIVE
					is_title_active = d_disciples_of_the_old_gods
					can_join_society = society_disciples_of_the_old_gods
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_disciples_of_the_old_gods
				random_list = { 
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			############# Extra Fighters Guilds
			10 = { #generic
				trigger = { 
					can_join_society = society_generic_fighter_guild
				}
				modifier = { 
					factor = 5
					NOT = { trait = zealous }
				}
				modifier = { 
					factor = 0.2
					is_female = yes
				}
				join_society = society_generic_fighter_guild 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #risk
				trigger = { 
					can_join_society = society_risk_fighter_guild
				}
				modifier = { 
					factor = 0
					AI = yes
					OR = {
						tier = king
						tier = emperor
					}
				}
				modifier = { 
					factor = 5
					NOT = { trait = zealous }
				}
				modifier = { 
					factor = 2
					trait = brave
				}
				modifier = { 
					factor = 0.5
					trait = craven
				}
				modifier = { 
					factor = 0.5
					NOT = { combat_rating = 10 }
				}
				modifier = { 
					factor = 0.2
					is_female = yes
				}
				join_society = society_risk_fighter_guild 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			10 = { #female
				trigger = { 
					can_join_society = society_female_fighter_guild
				}
				modifier = { 
					factor = 5
					NOT = { trait = zealous }
				}
				join_society = society_female_fighter_guild 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
			30 = { #holy society 1
				trigger = { 
					is_landed = yes #courtier can't join holy order if they are not in the GM court
					has_global_flag = chivalry_holy_society_one_global
					can_join_society = society_holy_one
				}
				modifier = { 
					factor = 10
					has_crusade_trait_trigger = yes
				}
				join_society = society_holy_one 
				random_list = {
					75 = {
						modifier = {
							factor = 0
							society_influence >= 30
						}
						add_mission_succeed_influence_effect = yes 
					}
					25 = {
					}
				}
				if = { 
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
					}
					set_society_grandmaster = yes
				}
			}
		}
	}
}

#Title Management
character_event = {
	id = CHI.105
	hide_window = yes

	trigger = {
		has_game_rule = {
			name = chivalry_rule_holy
			value = default
		}
		primary_title = { holy_order = yes }
		NOR = {
			has_landed_title = d_chivalry_holy_hand_true
			has_landed_title = d_chivalry_holy_warden_true
			has_landed_title = d_chivalry_holy_scion_true
			has_landed_title = d_chivalry_holy_rose_true
			has_landed_title = d_chivalry_holy_black_true
			has_landed_title = d_chivalry_holy_cloak_true
			has_landed_title = d_chivalry_holy_falcon_true
			has_landed_title = d_chivalry_holy_hound_true
		}
	}

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				is_in_society = yes
				NOT = { is_holyorder_societies_trigger = yes }
			}
			leave_society = yes
		}
		character_event = { id = CHI.105 days = 180 }
		if = { #knights_templar
			limit = {
				has_landed_title = d_knights_templar
			}
			join_society = society_knights_templar
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_knights_templar
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_knights_templar
			}
		}
		else_if = { #knights_hospitaller
			limit = {
				has_landed_title = d_knights_hospitaler
			}
			join_society = society_knights_hospitaller
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_knights_hospitaller
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_knights_hospitaller
			}
		}
		else_if = { #teutonic_order
			limit = {
				is_teutonic_order_owner = yes
			}
			join_society = society_teutonic_order
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_teutonic_order
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_teutonic_order
			}
		}
		else_if = { #knights_calatrava
			limit = {
				has_landed_title = d_knights_calatrava
			}
			join_society = society_knights_calatrava
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_knights_calatrava
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_knights_calatrava
			}
		}
		else_if = { #knights_santiago
			limit = {
				has_landed_title = d_knights_santiago
			}
			join_society = society_knights_santiago
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_knights_santiago
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_knights_santiago
			}
		}
		else_if = { #holy_sepulchre
			limit = {
				has_landed_title = d_holy_sepulchre
			}
			join_society = society_holy_sepulchre
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_orthodox = yes
						religion = ROOT
					}
				}
				join_society = society_holy_sepulchre
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_orthodox = yes
						religion = ROOT
					}
				}
				join_society = society_holy_sepulchre
			}
		}
		else_if = { #saint_anthony
			limit = {
				has_landed_title = d_saint_anthony
			}
			join_society = society_saint_anthony
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_miaphysite = yes
						religion = ROOT
					}
				}
				join_society = society_saint_anthony
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_miaphysite = yes
						religion = ROOT
					}
				}
				join_society = society_saint_anthony
			}
		}
		else_if = { #saint_addai
			limit = {
				has_landed_title = d_saint_addai
			}
			join_society = society_saint_addai
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_nestorian = yes
						religion = ROOT
					}
				}
				join_society = society_saint_addai
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_nestorian = yes
						religion = ROOT
					}
				}
				join_society = society_saint_addai
			}
		}
		else_if = { #bektashi
			limit = {
				has_landed_title = d_bektashi
			}
			join_society = society_bektashi
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_bektashi
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_bektashi
			}
		}
		else_if = { #haruriyyah
			limit = {
				has_landed_title = d_haruriyyah
			}
			join_society = society_haruriyyah
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_ibadi = yes
						religion = ROOT
					}
				}
				join_society = society_haruriyyah
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_ibadi = yes
						religion = ROOT
					}
				}
				join_society = society_haruriyyah
			}
		}
		else_if = { #zealots
			limit = {
				has_landed_title = d_zealots
			}
			join_society = society_zealots
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_jewish = yes
						religion = ROOT
					}
				}
				join_society = society_zealots
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_jewish = yes
						religion = ROOT
					}
				}
				join_society = society_zealots
			}
		}
		else_if = { #immortals
			limit = {
				has_landed_title = d_immortals
			}
			join_society = society_immortals
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_zoroastrian = yes
						religion = ROOT
					}
				}
				join_society = society_immortals
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_zoroastrian = yes
						religion = ROOT
					}
				}
				join_society = society_immortals
			}
		}
		else_if = { #jomsvikings
			limit = {
				has_landed_title = d_jomsvikings
			}
			join_society = society_jomsvikings
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_norse = yes
						religion = ROOT
					}
				}
				join_society = society_jomsvikings
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_norse = yes
						religion = ROOT
					}
				}
				join_society = society_jomsvikings
			}
		}
		else_if = { #sky_lords
			limit = {
				has_landed_title = d_sky_lords
			}
			join_society = society_sky_lords
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_tengri = yes
						religion = ROOT
					}
				}
				join_society = society_sky_lords
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_tengri = yes
						religion = ROOT
					}
				}
				join_society = society_sky_lords
			}
		}
		else_if = { #spirit_guardians
			limit = {
				has_landed_title = d_spirit_guardians
			}
			join_society = society_spirit_guardians
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_wafrican = yes
						religion = ROOT
					}
				}
				join_society = society_spirit_guardians
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_wafrican = yes
						religion = ROOT
					}
				}
				join_society = society_spirit_guardians
			}
		}
		else_if = { #warriors_perun
			limit = {
				has_landed_title = d_warriors_perun
			}
			join_society = society_warriors_perun
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_slavic = yes
						religion = ROOT
					}
				}
				join_society = society_warriors_perun
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_slavic = yes
						religion = ROOT
					}
				}
				join_society = society_warriors_perun
			}
		}
		else_if = { #chosen_perkunas
			limit = {
				has_landed_title = d_chosen_perkunas
			}
			join_society = society_chosen_perkunas
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_baltic = yes
						religion = ROOT
					}
				}
				join_society = society_chosen_perkunas
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_baltic = yes
						religion = ROOT
					}
				}
				join_society = society_chosen_perkunas
			}
		}
		else_if = { #sons_kaleva
			limit = {
				has_landed_title = d_sons_kaleva
			}
			join_society = society_sons_kaleva
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_finnish = yes
						religion = ROOT
					}
				}
				join_society = society_sons_kaleva
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_finnish = yes
						religion = ROOT
					}
				}
				join_society = society_sons_kaleva
			}
		}
		else_if = { #huitzilopochtli
			limit = {
				has_landed_title = d_huitzilopochtli
			}
			join_society = society_huitzilopochtli
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_aztec = yes
						religion = ROOT
					}
				}
				join_society = society_huitzilopochtli
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_aztec = yes
						religion = ROOT
					}
				}
				join_society = society_huitzilopochtli
			}
		}
		else_if = { #ashokas_chosen
			limit = {
				has_landed_title = d_ashokas_chosen
			}
			join_society = society_ashokas_chosen
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_buddhist = yes
						religion = ROOT
					}
				}
				join_society = society_ashokas_chosen
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_buddhist = yes
						religion = ROOT
					}
				}
				join_society = society_ashokas_chosen
			}
		}
		else_if = { #followers_arjuna
			limit = {
				has_landed_title = d_followers_arjuna
			}
			join_society = society_followers_arjuna
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hindu = yes
						religion = ROOT
					}
				}
				join_society = society_followers_arjuna
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hindu = yes
						religion = ROOT
					}
				}
				join_society = society_followers_arjuna
			}
		}
		else_if = { #bulls_rishabha
			limit = {
				has_landed_title = d_bulls_rishabha
			}
			join_society = society_bulls_rishabha
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_jain = yes
						religion = ROOT
					}
				}
				join_society = society_bulls_rishabha
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_jain = yes
						religion = ROOT
					}
				}
				join_society = society_bulls_rishabha
			}
		}
		else_if = { #zun_warriors
			limit = {
				has_landed_title = d_zun_warriors
			}
			join_society = society_zun_warriors
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_zun = yes
						religion = ROOT
					}
				}
				join_society = society_zun_warriors
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_zun = yes
						religion = ROOT
					}
				}
				join_society = society_zun_warriors
			}
		}
		else_if = { #army_light
			limit = {
				has_landed_title = d_army_light
			}
			join_society = society_army_light
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_manichean = yes
						religion = ROOT
					}
				}
				join_society = society_army_light
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_manichean = yes
						religion = ROOT
					}
				}
				join_society = society_army_light
			}
		}
		else_if = { #myrmidons
			limit = {
				has_landed_title = d_myrmidons
			}
			join_society = society_myrmidons
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hellenic = yes
						religion = ROOT
					}
				}
				join_society = society_myrmidons
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hellenic = yes
						religion = ROOT
					}
				}
				join_society = society_myrmidons
			}
		}
		else_if = { #myrmidons
			limit = {
				has_landed_title = d_dralhas_children
			}
			join_society = society_dralhas_children
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hellenic = yes
						religion = ROOT
					}
				}
				join_society = society_dralhas_children
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hellenic = yes
						religion = ROOT
					}
				}
				join_society = society_dralhas_children
			}
		}
		else_if = { #livonian_brothers_of_the_sword
			limit = {
				is_livonian_order_owner = yes
			}
			join_society = society_livonian_brothers_of_the_sword
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_livonian_brothers_of_the_sword
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_catholic = yes
						religion = ROOT
					}
				}
				join_society = society_livonian_brothers_of_the_sword
			}
		}
		else_if = { #saint_blaise
			limit = {
				OR = {
					has_global_flag = HIPEMF_ACTIVE
					has_global_flag = CK2PLUS_ACTIVE
				}
				has_landed_title = d_saint_blaise
			}
			join_society = society_saint_blaise
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_apostolic = yes
						religion = ROOT
					}
				}
				join_society = society_saint_blaise
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_apostolic = yes
						religion = ROOT
					}
				}
				join_society = society_saint_blaise
			}
		}
		else_if = { #knights_saint_mark
			limit = {
				OR = {
					has_global_flag = HIPEMF_ACTIVE
					has_global_flag = CK2PLUS_ACTIVE
				}
				has_landed_title = d_knights_saint_mark
			}
			join_society = society_knights_saint_mark
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_miaphysite = yes
						religion = ROOT
					}
				}
				join_society = society_knights_saint_mark
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_miaphysite = yes
						religion = ROOT
					}
				}
				join_society = society_knights_saint_mark
			}
		}
		else_if = { #army_lucifer
			limit = {
				OR = {
					has_global_flag = HIPEMF_ACTIVE
					has_global_flag = CK2PLUS_ACTIVE
				}
				has_landed_title = d_army_lucifer
			}
			join_society = society_army_lucifer
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_messalian = yes
						religion = ROOT
					}
				}
				join_society = society_army_lucifer
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_messalian = yes
						religion = ROOT
					}
				}
				join_society = society_army_lucifer
			}
		}
		else_if = { #arsiyah
			limit = {
				has_global_flag = HIPEMF_ACTIVE
				has_landed_title = d_arsiyah
			}
			join_society = society_arsiyah
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_arsiyah
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_arsiyah
			}
		}
		else_if = { #saqaliba
			limit = {
				has_global_flag = HIPEMF_ACTIVE
				has_landed_title = d_saqaliba
			}
			join_society = society_saqaliba
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_ismaili = yes
						religion = ROOT
					}
				}
				join_society = society_saqaliba
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_ismaili = yes
						religion = ROOT
					}
				}
				join_society = society_saqaliba
			}
		}	
		else_if = { #devotees_of_the_true_prophet
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_devotees_of_the_true_prophet
			}
			join_society = society_devotees_of_the_true_prophet
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_devotees_of_the_true_prophet
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_devotees_of_the_true_prophet
			}
		}
		else_if = { #ansar
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_ansar
			}
			join_society = society_ansar
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_ansar
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_ansar
			}
		}
		else_if = { #ghazi_sunni
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_ghazi_sunni
			}
			join_society = society_ghazi_sunni
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_ghazi_sunni
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_sunni = yes
						religion = ROOT
					}
				}
				join_society = society_ghazi_sunni
			}
		}
		else_if = { #ghazi_shiite
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_ghazi_shiite
			}
			join_society = society_ghazi_shiite
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_shiite = yes
						religion = ROOT
					}
				}
				join_society = society_ghazi_shiite
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_shiite = yes
						religion = ROOT
					}
				}
				join_society = society_ghazi_shiite
			}
		}
		else_if = { #sons_of_judea
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_sons_of_judea
			}
			join_society = society_sons_of_judea
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_jewish = yes
						religion = ROOT
					}
				}
				join_society = society_sons_of_judea
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_jewish = yes
						religion = ROOT
					}
				}
				join_society = society_sons_of_judea
			}
		}
		else_if = { #braedralag
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_braedralag
			}
			join_society = society_braedralag
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_norse = yes
						religion = ROOT
					}
				}
				join_society = society_braedralag
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_norse = yes
						religion = ROOT
					}
				}
				join_society = society_braedralag
			}
		}
		else_if = { #harii
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_harii
			}
			join_society = society_harii
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_german = yes
						religion = ROOT
					}
				}
				join_society = society_harii
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_german = yes
						religion = ROOT
					}
				}
				join_society = society_harii
			}
		}
		else_if = { #fianna
			limit = {
				OR = {
					has_global_flag = CK2PLUS_ACTIVE
					has_global_flag = ANCREL_ACTIVE
				}
				has_landed_title = d_fianna
			}
			join_society = society_fianna
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_celtic = yes
						religion = ROOT
					}
				}
				join_society = society_fianna
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_celtic = yes
						religion = ROOT
					}
				}
				join_society = society_fianna
			}
		}
		else_if = { #gwydion
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_gwydion
			}
			join_society = society_gwydion
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_celtic = yes
						religion = ROOT
					}
				}
				join_society = society_gwydion
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_celtic = yes
						religion = ROOT
					}
				}
				join_society = society_gwydion
			}
		}
		else_if = { #red_dragons
			limit = {
				OR = {
					has_global_flag = CK2PLUS_ACTIVE
					has_global_flag = ANCREL_ACTIVE
				}
				has_landed_title = d_red_dragons
			}
			join_society = society_red_dragons
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_celtic = yes
						religion = ROOT
					}
				}
				join_society = society_red_dragons
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_celtic = yes
						religion = ROOT
					}
				}
				join_society = society_red_dragons
			}
		}
		else_if = { #anubis
			limit = {
				OR = {
					has_global_flag = CK2PLUS_ACTIVE
					has_global_flag = ANCREL_ACTIVE
				}
				has_landed_title = d_anubis
			}
			join_society = society_anubis
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_egyptian = yes
						religion = ROOT
					}
				}
				join_society = society_anubis
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_egyptian = yes
						religion = ROOT
					}
				}
				join_society = society_anubis
			}
		}
		else_if = { #horus
			limit = {
				OR = {
					has_global_flag = CK2PLUS_ACTIVE
					has_global_flag = ANCREL_ACTIVE
				}
				has_landed_title = d_horus
			}
			join_society = society_horus
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_egyptian = yes
						religion = ROOT
					}
				}
				join_society = society_horus
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_egyptian = yes
						religion = ROOT
					}
				}
				join_society = society_horus
			}
		}
		else_if = { #herculean
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_herculean
			}
			join_society = society_herculean
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hellenic = yes
						religion = ROOT
					}
				}
				join_society = society_herculean
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hellenic = yes
						religion = ROOT
					}
				}
				join_society = society_herculean
			}
		}
		else_if = { #sacred_band
			limit = {
				OR = {
					has_global_flag = CK2PLUS_ACTIVE
					has_global_flag = ANCREL_ACTIVE
				}
				has_landed_title = d_sacred_band
			}
			join_society = society_sacred_band
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hellenic = yes
						religion = ROOT
					}
				}
				join_society = society_sacred_band
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_hellenic = yes
						religion = ROOT
					}
				}
				join_society = society_sacred_band
			}
		}
		else_if = { #great_host
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_great_host
			}
			join_society = society_great_host
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_tengri = yes
						religion = ROOT
					}
				}
				join_society = society_great_host
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_tengri = yes
						religion = ROOT
					}
				}
				join_society = society_great_host
			}
		}
		else_if = { #guardians_of_the_sacred_flame
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_guardians_of_the_sacred_flame
			}
			join_society = society_guardians_of_the_sacred_flame
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_baltic = yes
						religion = ROOT
					}
				}
				join_society = society_guardians_of_the_sacred_flame
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_baltic = yes
						religion = ROOT
					}
				}
				join_society = society_guardians_of_the_sacred_flame
			}
		}
		else_if = { #disciples_of_the_old_gods
			limit = {
				has_global_flag = CK2PLUS_ACTIVE
				has_landed_title = d_disciples_of_the_old_gods
			}
			join_society = society_disciples_of_the_old_gods
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_finnish = yes
						religion = ROOT
					}
				}
				join_society = society_disciples_of_the_old_gods
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						#has_holyorder_societies_religion_finnish = yes
						religion = ROOT
					}
				}
				join_society = society_disciples_of_the_old_gods
			}
		}
		else_if = { #society_holy_one
			limit = {
				primary_title { has_title_flag = chivalry_holy_society_one_flag }
			}
			join_society = society_holy_one
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						religion = ROOT
					}
				}
				join_society = society_holy_one
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						religion = ROOT
					}
				}
				join_society = society_holy_one
			}
		}
	}
}

#Title Management Assigned
character_event = {
	id = CHI.1059
	hide_window = yes

	trigger = {
		has_game_rule = {
			name = chivalry_rule_holy
			value = none
		}
		primary_title = { holy_order = yes }
		primary_title = { has_title_flag = chivalry_holy_society_one_flag }
		NOR = {
			has_landed_title = d_chivalry_holy_hand_true
			has_landed_title = d_chivalry_holy_warden_true
			has_landed_title = d_chivalry_holy_scion_true
			has_landed_title = d_chivalry_holy_rose_true
			has_landed_title = d_chivalry_holy_black_true
			has_landed_title = d_chivalry_holy_cloak_true
			has_landed_title = d_chivalry_holy_falcon_true
			has_landed_title = d_chivalry_holy_hound_true
		}
	}

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				NOT = { is_holyorder_societies_trigger = yes }
				is_in_society = yes
			}
			leave_society = yes
		}
		character_event = { id = CHI.1059 days = 180 }
		if = { #society_holy_one
			limit = {
				primary_title { has_title_flag = chivalry_holy_society_one_flag }
			}
			if = {
				limit = { NOT = { society_member_of = society_holy_one } }
				join_society = society_holy_one
			}
			join_society = society_holy_one
			set_society_grandmaster = yes
			#Make every apropriate courtier member of society
			any_courtier = {
				limit = {
					AND = {
						is_in_society = no
						has_holyorder_societies_prerequisites_notrait = yes
						religion = root
					}
				}
				join_society = society_holy_one
			}
			any_vassal = {
				limit = {
					AND = {
						has_holyorder_societies_prerequisites_notrait = yes
						religion = root
					}
				}
				join_society = society_holy_one
			}
		}
	}
}

#Title Management on creation
character_event = {
	id = CHI.106
	hide_window = yes
	
	is_triggered_only = yes
	ai = yes
	
	trigger = {
		has_game_rule = {
			name = chivalry_rule_holy
			value = default
		}
	}
	
	immediate = {
		character_event = { id = CHI.105 days = 60 }
	}
}

#Title Management on creation
character_event = {
	id = CHI.1069
	hide_window = yes
	
	is_triggered_only = yes
	ai = yes
	
	trigger = {
		has_game_rule = {
			name = chivalry_rule_holy
			value = none
		}
	}
	
	immediate = {
		character_event = { id = CHI.1059 days = 60 }
	}
}

#Title Law Management PING
character_event = {
	id = CHI.107
	hide_window = yes

	trigger = {
		has_game_rule = {
			name = chivalry_rule_holy
			value = default
		}
		primary_title = { holy_order = yes }
		NOR = {
			has_landed_title = d_chivalry_holy_hand_true
			has_landed_title = d_chivalry_holy_warden_true
			has_landed_title = d_chivalry_holy_scion_true
			has_landed_title = d_chivalry_holy_rose_true
			has_landed_title = d_chivalry_holy_black_true
			has_landed_title = d_chivalry_holy_cloak_true
			has_landed_title = d_chivalry_holy_falcon_true
			has_landed_title = d_chivalry_holy_hound_true
		}
	}

	is_triggered_only = yes

	immediate = {
		character_event = { id = CHI.1071 days = 1 }
		# set_holy_order_government = yes #holy fury changes
	}
}

#Title Law Management PING assigned
character_event = {
	id = CHI.1079
	hide_window = yes

	trigger = {
		has_game_rule = {
			name = chivalry_rule_holy
			value = none
		}
		primary_title = { holy_order = yes }
		NOR = {
			has_landed_title = d_chivalry_holy_hand_true
			has_landed_title = d_chivalry_holy_warden_true
			has_landed_title = d_chivalry_holy_scion_true
			has_landed_title = d_chivalry_holy_rose_true
			has_landed_title = d_chivalry_holy_black_true
			has_landed_title = d_chivalry_holy_cloak_true
			has_landed_title = d_chivalry_holy_falcon_true
			has_landed_title = d_chivalry_holy_hound_true
		}
	}

	is_triggered_only = yes

	immediate = {
		character_event = { id = CHI.1071 days = 1 }
		# set_holy_order_government = yes #holy fury changes
	}
}

#Title Law Management
character_event = {
	id = CHI.1071
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				is_feminist_holyorder_societies_trigger = yes
			}
			add_character_modifier = {
				modifier = chivalry_law_feminist
				duration = -1
				inherit = yes
			}
		}
		if = {
			limit = {
				is_heretic_holyorder_societies_trigger = yes
			}
			add_character_modifier = {
				modifier = chivalry_law_heretic
				duration = -1
				inherit = yes
			}
		}
		# set_holy_order_government = yes #holy fury changes
	}
}

#Title Overhaul Management
character_event = {
	id = CHI.108
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		NOT = { has_global_flag = the_orders_of_chivalry_active }
	}
	
	immediate = {
		set_global_flag = the_orders_of_chivalry_active #for crossmod stuff
		if = {
			limit = {
				any_playable_ruler = { culture = hedgehog_culture }
			}
			set_global_flag = chivalry_animals_kingdom_active #animals_kingdom
		}
		if = { #Ancient religion
			limit = {
				has_global_flag = ancrel
			}
			set_global_flag = ANCREL_ACTIVE
		}
		if = { #HIP
			limit = {
				has_character_flag = start_of_game_character
			}
			set_global_flag = CK2PLUS_ACTIVE
		}
		else_if = { #CK2+
			limit = {
				OR = {
					has_global_flag = EMF
					has_global_flag = SWMH
				}
			}
			set_global_flag = HIPEMF_ACTIVE
		}
		else_if = { #ElderKIngs
			limit = {
				OR = {
					has_global_flag = mages_tamriel_necromancy_allowed
					has_global_flag = mages_tamriel_necromancy_banned
				}
			}
			set_global_flag = ELDERKINGS_ACTIVE
		}
		else = {
			character_event = { id = CHI.1081 days = 1 }
		}
	}
}

#Title Overhaul Management Ping
character_event = {
	id = CHI.1081
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		if = { #Ancient religion
			limit = {
				has_global_flag = ancrel
			}
			set_global_flag = ANCREL_ACTIVE
		}
		if = { #HIP
			limit = {
				has_character_flag = start_of_game_character
			}
			set_global_flag = CK2PLUS_ACTIVE
		}
		else_if = { #CK2+
			limit = {
				OR = {
					has_global_flag = EMF
					has_global_flag = SWMH
				}
			}
			set_global_flag = HIPEMF_ACTIVE
		}
		else_if = { #ElderKIngs
			limit = {
				OR = {
					has_global_flag = mages_tamriel_necromancy_allowed
					has_global_flag = mages_tamriel_necromancy_banned
				}
			}
			set_global_flag = ELDERKINGS_ACTIVE
		}
		else = { }
	}
}

#Title Courtier Invitation
# character_event = { #maybe do later
	# id = CHI.109
	# hide_window = yes
		
		# only_rulers = yes
		# AI = yes
		
	# trigger = {
		# has_game_rule = {
			# name = chivalry_rule_holy
			# value = default
		# }
		# primary_title = { holy_order = yes }
		# is_holyorder_societies_trigger = yes
	# }

	# is_triggered_only = yes

	# immediate = {
		
	# }
# }

#######################Disband############################

#Kick event, Excluded from society due to breaking the limitations
character_event = { #shameless copy of the vanilla one, cannot erase vanilla one.
	id = CHI.10021
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			is_holyorder_societies_trigger = yes
			is_fighter_societies_trigger = yes
		}
	}
	
	immediate = {
		society = {
			random_society_member = { 
				limit = { is_society_grandmaster = yes } 
				character_event = { id = CHI.10022 }
			}
		}
	}
}

#Kick ping
character_event = {
	id = CHI.10022
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROM = { letter_event = { id = CHI.10023 } }
	}
}

#Kick happen
letter_event = {
	id = CHI.10023
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	desc = {
		trigger = { is_holyorder_societies_trigger = yes }
		text = EVTDESC_CHI_10023_HOLYORDER
	}
	desc = {
		trigger = { is_fighter_societies_trigger = yes }
		text = EVTDESC_CHI_10023_FIGHTERSGUILD
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_10023
		leave_society = yes
	}
}


#######################Rank UP#############################

# Send the rank-up request to the current Grandmaster
character_event = {
	id = CHI.110

	hide_window = yes

	trigger = { #has pressed the button
		has_character_flag = has_sent_request_to_rank_up
	}
	
	is_triggered_only = yes

	immediate = {
		if = { #if he's still a member
			limit = { is_in_society = yes }
			society = {
				random_society_member = { #will send the request to a random top rank memeber of the same society
					limit = {
						is_society_grandmaster = yes
						# same_society_as = ROOT
					}
					character_event = { id = CHI.111 } # send request to Grand Master.
				}
			}
		}
		if = { #if he's not a member
			limit = { is_in_society = no }
			clr_character_flag = has_sent_request_to_rank_up
		}
	}
}

# Grandmaster gets the rank-up request
character_event = {
	id = CHI.111
	
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { letter_event = { id = CHI.112 } } #send it back
		# event_target:rank_up_target = { letter_event = { id = CHI.112 } } #send it back
	}
}

# Grand master approves my request
letter_event = {
	id = CHI.112
	border = GFX_event_letter_frame_war_chivalry

	desc = {
		trigger = {
			is_holyorder_societies_trigger = yes
			FROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_112_holy
	}
	
	desc = {
		trigger = {
			is_holyorder_societies_trigger = yes
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_112_holy_custom
	}
	
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
		}
		text = EVTDESC_CHI_112_fighter
	}
	
	trigger = {
		# if = {
			# limit = {
				# is_holyorder_societies_trigger = yes
			# }
			# society_rank < 3
		# }
		# if = {
			# limit = {
				# is_fighter_societies_trigger = yes
			# }
			# society_rank <= 3
		# }
		has_character_flag = has_sent_request_to_rank_up
	}
	
	is_triggered_only = yes

	#Rank up approved
	option = {
		name = EVTOPTA_CHI_112
		trigger = {  
			is_holyorder_societies_trigger = yes
			society_rank < 3
		}
		society_rank_up = 1
	}
	option = {
		name = EVTOPTB_CHI_112
		trigger = {  
			is_fighter_societies_trigger = yes
			society_rank < 3
		}
		society_rank_up = 1
	}
	after = {
		clr_character_flag = has_sent_request_to_rank_up
	}
}

####################################Mission######################################

####Mission Tombola
character_event = {
	id = CHI.120
	hide_window = yes

	is_triggered_only = yes
	
	is_in_society = yes

	trigger = {
		OR = {
			is_holyorder_societies_trigger = yes
			is_fighter_societies_trigger = yes
		}
		has_any_quest = no
		NOT = { has_character_modifier = quest_cooldown_timer }
		NOT = { has_character_modifier = chivalry_unjustified_rest }
		NOT = { has_character_modifier = chivalry_justified_rest }
		NOT = { is_inaccessible_trigger = yes }
		prisoner = no
	}

	immediate = {
		society = { #random non grand master member
			random_society_member = {
				limit = { 	
					NOT = { character = ROOT }
					is_society_grandmaster = no
					prisoner = no
				}
				save_event_target_as = quest_order_member
			}
		}
		society = { #grand master
			random_society_member = {
				limit = {
					NOT = { character = ROOT }
					is_society_grandmaster = yes
				}
				save_event_target_as = quest_grand_master
			}
		}

		random_list = {
			10 = { #HO Pick War/Theo focus
				trigger = { #if order is at war and you have the war focus
					is_holyorder_societies_trigger = yes
					has_dlc = "Way of Life"
					is_landed = yes #courtier can't focus
					OR = {
						AND = {
							event_target:quest_grand_master = { 
								OR = {
									war = yes
									in_command = yes
								}
							}
							ROOT = { NOT = { has_focus = focus_war } }
						}
						AND = {
							event_target:quest_grand_master = { 
								AND = {
									war = no
									in_command = no
								}
							}
							ROOT = { NOT = { has_focus = focus_theology } }
						}
					}
				}
				event_target:quest_grand_master = { character_event = { id = CHI.130 days = 7 random = 7 } }
			}
			10 = { #FG Pick War focus
				trigger = {
					is_fighter_societies_trigger = yes
					has_dlc = "Way of Life"
					is_landed = yes #courtier can't focus
					ROOT = { NOT = { has_focus = focus_war } }
				}
				event_target:quest_order_member = { character_event = { id = CHI.140 days = 7 random = 7 } }
			}
			10 = { #HO help ruler at war against infidels
				trigger = {
					is_holyorder_societies_trigger = yes
					war = no
					is_landed = yes #courtier can't give troops
					any_playable_ruler = {
						is_within_diplo_range = ROOT
						NOT = { character = ROOT }
						controls_religion = no
						religion = ROOT
						is_landed = yes
						NOT = { primary_title = { temporary = yes } }
						NOT = { is_vassal_or_below = ROOT }
						OR = {
							is_primary_war_attacker = yes
							is_primary_war_defender = yes
						}
						OR = {
							NOT = { has_character_flag = mission_chivalry_helpwar_washelped }
							had_character_flag = { flag = mission_chivalry_helpwar_washelped days = 1460 }
						}
						in_revolt = no
						OR = {
							any_war = {
								attacker = {
									NOT = { war_score = 60  }
								}
								defender = { 
									NOR = {
										war_score = 60 #forget check if corect scope
										religion = ROOT
										has_non_aggression_pact_with = ROOT
										is_allied_with = ROOT
										is_liege_of = ROOT
									}
								}
							}
							any_war = {
								defender = {
									NOT = { war_score = 60  }
								}
								attacker = {
									NOR = {
										war_score = 60
										religion = ROOT
										has_non_aggression_pact_with = ROOT
										is_allied_with = ROOT
										is_liege_of = ROOT
									}
								}
							}
						}
					}
				}
				event_target:quest_grand_master = { character_event = { id = CHI.150 } } #removed days = 7 random = 7 to avoid target being stolen
			}
			10 = { #FG help ruler at war against its cultures groups
				trigger = {
					is_fighter_societies_trigger = yes
					war = no
					is_landed = yes #courtier can't give troops
					any_playable_ruler = {
						is_within_diplo_range = ROOT
						NOT = { character = ROOT }
						controls_religion = no
						is_landed = yes
						NOT = { primary_title = { temporary = yes } }
						NOT = { is_vassal_or_below = ROOT }
						OR = {
							is_primary_war_attacker = yes
							is_primary_war_defender = yes
						}
						OR = {
							NOT = { has_character_flag = mission_chivalry_helpwar_washelped }
							had_character_flag = { flag = mission_chivalry_helpwar_washelped days = 1460 }
						}
						in_revolt = no
						OR = {
							any_war = {
								attacker = { 
									has_fighter_societies_same_as_SCOPE_culture = yes
									NOT = { war_score = 60 }
								}
								defender = { 
									has_fighter_societies_same_as_SCOPE_culture = yes
									NOR = {
										war_score = 60
										has_non_aggression_pact_with = ROOT
										is_allied_with = ROOT
										is_liege_of = ROOT
									}
								}
							}
							any_war = {
								defender = {
									has_fighter_societies_same_as_SCOPE_culture = yes
									NOT = { war_score = 60 }
								}
								attacker = {
									has_fighter_societies_same_as_SCOPE_culture = yes
									NOR = {
										war_score = 60
										has_non_aggression_pact_with = ROOT
										is_allied_with = ROOT
										is_liege_of = ROOT
									}
								}
							}
						}
					}
				}
				event_target:quest_order_member = { character_event = { id = CHI.160 } } #removed days = 7 random = 7 to avoid target being stolen
			}
			20 = { #HO Training
				trigger = {
					is_holyorder_societies_trigger = yes
					NOT = { has_character_flag = chivalry_requested_training  }
					society = { #random non grand master member
						any_society_member = {
							is_within_diplo_range = ROOT
							same_society_as = ROOT
							chivalry_valid_target = yes
							has_character_flag = chivalry_requested_training
							NOT = { has_quest = mission_chivalry_training } 
						}
					}
				}
				modifier = {
					factor = 10
					ai = yes
				}
				society = {
					random_society_member = {
						limit = { 
							is_within_diplo_range = ROOT
							same_society_as = ROOT
							chivalry_valid_target = yes
							has_character_flag = chivalry_requested_training
							NOT = { has_quest = mission_chivalry_training }
						}
						save_event_target_as = quest_order_member
						set_character_flag = chivalry_being_trained
					}
				}
				event_target:quest_order_member = { character_event = { id = CHI.170 } }
			}
			20 = { #FG Training
				trigger = {
					is_fighter_societies_trigger = yes
					NOT = { has_character_flag = chivalry_requested_training  }
					society = { #random non grand master member
						any_society_member = {
							is_within_diplo_range = ROOT
							same_society_as = ROOT
							chivalry_valid_target = yes
							has_character_flag = chivalry_requested_training 
							NOT = { has_quest = mission_chivalry_training } 
						}
					}
				}
				modifier = {
					factor = 10
					ai = yes
				}
				society = {
					random_society_member = {
						limit = { 
							is_within_diplo_range = ROOT
							same_society_as = ROOT
							chivalry_valid_target = yes
							has_character_flag = chivalry_requested_training
							NOT = { has_quest = mission_chivalry_training }
						}
						save_event_target_as = quest_order_member
						set_character_flag = chivalry_being_trained
					}
				}
				event_target:quest_order_member = { character_event = { id = CHI.180 } }
			}
			50 = { #HO Hunt Devil and Cult
				trigger = {
					is_holyorder_societies_trigger = yes
					NOR = {
						has_game_rule = {
							name = devil_worshipers
							value = none
						}
						has_game_rule = {
							name = secret_cults
							value = none
						}
					}
					top_liege = { #random devil or cultist exist?
						any_realm_character = {
							chivalry_valid_target = yes
							OR = { #time out of 2 years
								NOT = { has_character_flag = mission_was_hunted }
								had_character_flag = { flag = mission_was_hunted days = 720 }
							}
							is_quest_target = no
							OR = {
								is_heresy_of = ROOT
								has_character_modifier = known_satanist
								has_character_modifier = known_secret_society_member
								has_character_modifier = known_witch
							}
							NOT = { has_character_flag = witch_nanny } #spare spacial npc
							NOT = { has_character_flag = special_marshal } #spare spacial npc
						}
					}
				}
				top_liege = { #pick random devil or cultist
					random_realm_character = {
						limit = { 
							chivalry_valid_target = yes
							OR = { #time out of 2 years
								NOT = { has_character_flag = mission_was_hunted }
								had_character_flag = { flag = mission_was_hunted days = 720 }
							}
							is_quest_target = no
							OR = {
								has_character_modifier = known_satanist
								has_character_modifier = known_secret_society_member
								has_character_modifier = known_witch
								is_heresy_of = ROOT
							}
							NOT = { has_character_flag = witch_nanny } #spare spacial npc
							NOT = { has_character_flag = special_marshal } #spare spacial npc
							NOT = { same_society_as = ROOT }
						}
						save_event_target_as = chivalry_hunt_target
						set_character_flag = chivalry_hunt_target
					}
				}
				event_target:quest_grand_master = { character_event = { id = CHI.190 } }
			}
			50 = { #FG Hunt Bounty
				trigger = {
					has_game_rule = {
						name = chivalry_rule_bounty
						value = default
					}
					is_fighter_societies_trigger = yes
					top_liege = { #any bounty?
						any_realm_character = {
							chivalry_valid_target = yes
							OR = { #time out of 2 years
								NOT = { has_character_flag = mission_was_hunted }
								had_character_flag = { flag = mission_was_hunted days = 720 }
							}
							NOR = { #leave those to HO
								has_character_modifier = known_satanist
								has_character_modifier = known_secret_society_member
								has_character_modifier = known_witch
							}
							NOT = { has_character_flag = witch_nanny } #spare spacial npc
							NOT = { has_character_flag = special_marshal } #spare spacial npc
							is_quest_target = no
							has_character_flag = chivalry_hunt_bounty
							is_fighter_societies_trigger = no
						}
					}
				}
				top_liege = { #pick bounty
					random_realm_character = {
						limit = { 
							chivalry_valid_target = yes
							OR = { #time out of 2 years
								NOT = { has_character_flag = mission_was_hunted }
								had_character_flag = { flag = mission_was_hunted days = 720 }
							}
							NOR = { #leave those to HO
								has_character_modifier = known_satanist
								has_character_modifier = known_secret_society_member
								has_character_modifier = known_witch
							}
							NOT = { has_character_flag = witch_nanny } #spare spacial npc
							NOT = { has_character_flag = special_marshal } #spare spacial npc
							is_quest_target = no
							has_character_flag = chivalry_hunt_bounty
							is_fighter_societies_trigger = no
							NOT = { same_society_as = ROOT }
						}
						save_event_target_as = chivalry_hunt_target
						set_character_flag = chivalry_hunt_target
					}
				}
				event_target:quest_order_member = { character_event = { id = CHI.200 } }
			}
			10 = { #HO Win Battle
				trigger = {
					is_holyorder_societies_trigger = yes
					is_ruler = yes
				}
				event_target:quest_grand_master = { character_event = { id = CHI.210 } }
			}
			10 = { #FG Win Battle
				trigger = {
					is_fighter_societies_trigger = yes
					is_ruler = yes
				}
				event_target:quest_order_member = { character_event = { id = CHI.210 } }
			}
		
			
			
			10 = { # ai bypasses missions at times.
				modifier = {
					factor = 0
					ai = no
				}
				random_list = {
					70 = {
						modifier = {
							factor = 0.9
							society_influence >= 30
						}
						modifier = {
							factor = 0.9
							society_influence >= 40
						}
						modifier = {
							factor = 0.8
							society_influence >= 50
						}
						modifier = {
							factor = 0.7
							society_influence >= 70
						}
						modifier = {
							factor = 0.6
							society_influence >= 80
						}
						modifier = {
							factor = 0.5
							society_influence >= 90
						}
						add_mission_succeed_influence_effect = yes
					}
					30 = {
						add_mission_fail_influence_effect = yes
					}
				}
			}
			
			100 = { #ai refuse mission
				modifier = {
					factor = 0
					ai = no
				}
			}
		}
	}
}

####Mission: HO Focus ping
character_event = {
	id = CHI.130
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		if = {
			limit = {
				OR = {
					war = yes
					in_command = yes
				}
				FROM = { NOT = { has_focus = focus_war } }
			}
			FROM = { society_quest_event = { id = CHI.131 } } 
		}
		if = {
			limit = {
				AND = {
					war = no
					in_command = no
				}
				FROM = { NOT = { has_focus = focus_theology } }
			}
			FROM = { society_quest_event = { id = CHI.132 } } 
		}
	}
}

#HO Focus War quest
society_quest_event = {
	id = CHI.131
	desc = EVTDESC_CHI_131

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_focus = focus_war
			has_any_quest = yes
		}
	}
	
	option = { 
		name = ACCEPT

		set_quest = mission_chivalry_focus_war

		if = {
			limit = { #Force ai to pick focus or not.
				ai = yes
			}
			character_event = { id = CHI.1321 days = 100 random = 30 }
		}
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}

		ai_chance = { factor = 0 }
	}
}

#HO Focus Theology quest
society_quest_event = {
	id = CHI.132
	desc = EVTDESC_CHI_132

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_focus = focus_theology
			has_any_quest = yes
		}
	}
	
	option = { 
		name = ACCEPT

		set_quest = mission_chivalry_focus_theology
		
		if = {
			limit = { #Force ai to pick focus or not.
				ai = yes
			}
			character_event = { id = CHI.1321 days = 100 random = 30 }
		}
	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}

		ai_chance = { factor = 0 }
	}
}

#HO Focus force ai to pick
character_event = {
	id = CHI.1321
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		if = {
			limit = {
				has_quest = mission_chivalry_focus_theology
			}
			set_focus = focus_theology
		}
		if = {
			limit = {
				has_quest = mission_chivalry_focus_war
			}
			set_focus = focus_war
		}
	}
}

#HO Focus on_action ping
character_event = {
	id = CHI.133
	is_triggered_only = yes
	hide_window = yes

	
	trigger = {
		is_holyorder_societies_trigger = yes
		OR = {
			AND = {
				has_focus = focus_theology
				has_quest = mission_chivalry_focus_theology
			}
			AND = {
				has_focus = focus_war
				has_quest = mission_chivalry_focus_war
			}
		}
	}
	
	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = CHI.134
			}
		}
	}
}

#HO Focus completion ping
character_event = {
	id = CHI.134
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				FROM = { has_quest = mission_chivalry_focus_theology }
			}
			FROM = { letter_event = { id = CHI.135 } }
		}
		if = {
			limit = {
				FROM = { has_quest = mission_chivalry_focus_war }
			}
			FROM = { letter_event = { id = CHI.136 } }
		}
	}
}

#HO Focus Theology completion
letter_event = {
	id = CHI.135
	desc = EVTDESC_CHI_135
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = { #Quest will success
		name = EVTOPTA_CHI_135
		trigger = { NOT = { trait = cynical } }
		clr_quest = mission_chivalry_focus_theology
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150
		piety = 50
	}
	option = { #Quest will success
		name = EVTOPTB_CHI_135
		trigger = { trait = cynical }
		tooltip_info = cynical
		clr_quest = mission_chivalry_focus_theology
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150
		piety = 50
		random = {
			chance = 20
			remove_trait = cynical
		}
	}
}

#HO Focus War completion
letter_event = {
	id = CHI.136
	desc = EVTDESC_CHI_136
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = { #Quest will success
		name = EVTOPTA_CHI_136
		trigger = { NOT = { trait = brave } }		
		clr_quest = mission_chivalry_focus_war
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150
		prestige = 50
	}
	option = { #Quest will success
		name = EVTOPTB_CHI_136
		trigger = { trait = brave }
		tooltip_info = brave
		clr_quest = mission_chivalry_focus_war
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150
		prestige = 50 #forget maybe add something
	}
}


####Mission: FG Focus ping
character_event = {
	id = CHI.140
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { society_quest_event = { id = CHI.141 } } 
	}
}

#FG Focus War quest
society_quest_event = {
	id = CHI.141
	desc = EVTDESC_CHI_141

	is_triggered_only = yes

	trigger = {
		NOR = {
			has_focus = focus_war
			has_any_quest = yes
		}
	}
	
	option = { 
		name = ACCEPT

		set_quest = mission_chivalry_focus_war
		
		if = {
			limit = { #Force ai to pick focus or not.
				ai = yes
			}
			character_event = { id = CHI.1411 days = 100 random = 30 }
		}

	}

	option = {
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}

		ai_chance = { factor = 0 }
	}
}

#FG Focus force ai to pick
character_event = {
	id = CHI.1411
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		if = {
			limit = {
				has_quest = mission_chivalry_focus_war
			}
			set_focus = focus_war
		}
	}
}

#FG Focus Theology quest ID.142

#FG Focus on_action ping
character_event = {
	id = CHI.143
	is_triggered_only = yes
	hide_window = yes

	
	trigger = {
		is_fighter_societies_trigger = yes
		AND = {
			has_focus = focus_war
			has_quest = mission_chivalry_focus_war
		}
	}
	
	immediate = {
		society = {
			random_society_member = {
				limit = {
					NOT = { character = ROOT }
				}
				character_event = {
					id = CHI.144
				}
			}
		}
	}
}

#FG Focus completion ping
character_event = {
	id = CHI.144
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = { letter_event = { id = CHI.146 } }
	}
}

#FG Focus Theology completion ID.145

#FG Focus War completion
letter_event = {
	id = CHI.146
	desc = EVTDESC_CHI_146
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = { #Quest will success
		name = EVTOPTA_CHI_146
		trigger = { NOT = { trait = proud } }
		clr_quest = mission_chivalry_focus_war
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150
		prestige = 50
		risk_society_extra_reward = yes
	}
	option = { #Quest will success
		name = EVTOPTB_CHI_146
		trigger = { trait = proud }
		tooltip_info = proud
		clr_quest = mission_chivalry_focus_war
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150 #forget maybe add something
		prestige = 50
		risk_society_extra_reward = yes
	}
}


####Mission: HO Help War ping
character_event = {
	id = CHI.150
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { society_quest_event = { id = CHI.151 } } 
	}
}

#HO Help War quest
society_quest_event = {
	id = CHI.151
	desc = EVTDESC_CHI_151

	is_triggered_only = yes
	
	immediate = {
		any_playable_ruler = {
			limit = {
				is_within_diplo_range = ROOT
				NOT = { character = ROOT }
				controls_religion = no
				religion = ROOT
				is_landed = yes
				NOT = { primary_title = { temporary = yes } }
				NOT = { is_vassal_or_below = ROOT }
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
				}
				OR = {
					NOT = { has_character_flag = mission_chivalry_helpwar_washelped }
					had_character_flag = { flag = mission_chivalry_helpwar_washelped days = 1460 }
				}
				in_revolt = no
				OR = {
					any_war = {
						attacker = {
							NOT = { war_score = 60  }
						}
						defender = { 
							NOR = {
								war_score = 60
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					any_war = {
						defender = {
							NOT = { war_score = 60  }
						}
						attacker = {
							NOR = {
								war_score = 60
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
				}
			}
			save_event_target_as = mission_chivalry_helpwar_target
		}
	}

	quest_target = event_target:mission_chivalry_helpwar_target
	
	option = {
		name = ACCEPT
		ai_chance = { factor = 1 }
		
		event_target:mission_chivalry_helpwar_target = {
			set_quest_target = {
				id = mission_chivalry_helpwar
				holder = ROOT
			}
			clr_character_flag = mission_chivalry_helpwar_washelped
			set_character_flag = mission_chivalry_helpwar_washelped
		}
		
		if = {
			limit = { #Force ai to help
				ai = yes
			}
			event_target:mission_chivalry_helpwar_target = { character_event = { id =  CHI.1511 days = 200 random = 100 } }
		}
	}

	option = {
		name = DECLINE
		ai_chance = { factor = 0 }
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
	}
}

#HO Help War force AI to hlep
character_event = {
	id = CHI.1511
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { character_event = { id = CHI.153 } }
	}
}

#HO Help War decision ping
character_event = {
	id = CHI.152
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROMFROM = { character_event = { id = CHI.153 } }
	}
}

#HO Help War how will you help
character_event = {
	id = CHI.153
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_large_army
	
	desc = {
		trigger = {
			FROM = { war = yes }
		}
		picture = GFX_evt_large_army
		text = EVTDESC_CHI_153_WAR
	}
	
	desc = {
		trigger = {
			FROM = { war = no }
		}
		picture = GFX_evt_magnificent_castle
		text = EVTDESC_CHI_153_PEACE
	}
	
	immediate = {
		if =  {
			limit = {
				FROM = { war = no }
			}
			set_character_flag = mission_not_at_war
		}
	
	}
	
	is_triggered_only = yes
	
	option = { #Lump sum
		name = EVTOPTA_CHI_153
		tooltip = { transfer_scaled_wealth = { to = FROM value = 1 } }
		set_character_flag = mission_chivalry_helpwar_money
		FROM = { letter_event = { id = CHI.158 } }
	}
	
	# option = { #Overtime sum
		# name = EVTOPTB_CHI_153
		# custom_tooltip = { text = chivalry_pay_over_time_tooltip }
		# FROM = {
			# add_character_modifier = {
			# name = chivalry_take_money
			# duration = 720
			# }
			# character_event = { id = CHI.156 days = 30 }
		# }
		# ROOT = {
			# add_character_modifier = {
			# name = chivalry_give_money
			# duration = 720
			# }
			# set_variable = { which = "chivalry_overtime_sum" value = 0 }
		# }
		# set_character_flag = mission_chivalry_helpwar_money
		# FROM = { letter_event = { id = CHI.158 } }
	# }
	
	option = { #Troops
		name = EVTOPTC_CHI_153
		trigger = {
			FROM = { war = yes }
			OR = {
				primary_title = { higher_tier_than = BARON } 
				ai = no
			}
		}
		# FROM = {
			# any_demesne_province = {
				# add_province_modifier = {
				# name = chivalry_take_troops
				# duration = 720
				# }
			# }
		# }
		any_demesne_province = {
			add_province_modifier = {
			name = chivalry_give_troops
			duration = 720
			}
		}
		set_character_flag = mission_chivalry_helpwar_troops
		FROM = { letter_event = { id = CHI.158 } }
	}
	option = { #Manpower to repair
		name = EVTOPTD_CHI_153
		trigger = {
			FROM = { war = no }
			OR = {
				primary_title = { higher_tier_than = BARON } 
				ai = no
			}
		}
		# FROM = {
			# any_demesne_province = {
				# add_province_modifier = {
				# name = chivalry_take_workers
				# duration = 720
				# }
			# }
		# }
		any_demesne_province = {
			add_province_modifier = {
			name = chivalry_give_workers
			duration = 720
			}
		}
		set_character_flag = mission_chivalry_helpwar_workers
		FROM = { letter_event = { id = CHI.158 } }
	}
	option = { #War
		name = EVTOPTE_CHI_153
		trigger = {
			FROM = {
				OR = {
					AND = {
						is_primary_war_attacker = yes 
						any_war = {
							defender = { 
								NOR = {
									religion = ROOT
									has_non_aggression_pact_with = ROOT
									is_allied_with = ROOT
								}
							}
						}
					}
					AND = {
						is_primary_war_defender = yes 
						any_war = {
							attacker = {
								NOR = {
									religion = ROOT
									has_non_aggression_pact_with = ROOT
									is_allied_with = ROOT
								}
							}
						}
					}
				}
			}
		}
		hidden_tooltip = {
		if = {
			limit = {
				FROM = { 
					is_primary_war_attacker = yes 
			 		any_war = {
						defender = { 
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
							}
						}
					}
				}
			}
			FROM = {
				any_war = {
					limit = {
						PREV = {  is_primary_war_attacker = yes }
						defender = { 
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
							}
						}
					}
					ROOT = {
						join_attacker_wars = PREV
					}
				}
			}
		}
		else = {
			FROM = {
				any_war = {
					limit = {
						PREV = {  is_primary_war_defender = yes }
						attacker = { 
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
							}
						}
					}
					ROOT = {
						join_defender_wars = PREV
					}
				}
			}
		}
		}
		set_character_flag = mission_chivalry_helpwar_war
		FROM = { letter_event = { id = CHI.158 } }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				is_landed = no
			}
			modifier = {
				factor = 2
				OR = {
					is_friend = yes
					dynasty = from
				}
			}
		}
	}
	option = { #Nothing
		name = EVTOPTF_CHI_153
		FROM = { clr_character_flag = mission_chivalry_helpwar_flag }
		ai_chance = {
			factor = 0
		}
	}
	after = {
		hidden_tooltip = {
			if = {
				limit = { 
					OR = {
						has_character_flag = mission_chivalry_helpwar_money
						has_character_flag = mission_chivalry_helpwar_troops
						has_character_flag = mission_chivalry_helpwar_workers
						has_character_flag = mission_chivalry_helpwar_war
					}
				}
				society = { #grand master
					random_society_member = {
						limit = {
							NOT = { character = ROOT }
							is_society_grandmaster = yes
						}
						character_event = { id = CHI.154 days = 5 } #completing quest
					}
				}
			}
		}
	}
}

#HO Help War ending ping
character_event = {
	id = CHI.154
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { letter_event = { id = CHI.155 } } 
	}
}

#HO Help War completion
letter_event = {
	id = CHI.155
	border = GFX_event_letter_frame_war_chivalry
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_money
		}
		text = EVTDESC_CHI_155_ADVICES
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_troops
		}
		text = EVTDESC_CHI_155_TROOPS
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_workers
		}
		text = EVTDESC_CHI_155_WORKERS
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_war
		}
		text = EVTDESC_CHI_155_WAR
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_155
		trigger = {
			NOT = { has_character_flag = mission_not_at_war }
		}
		clr_quest = mission_chivalry_helpwar
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150
	}
	
	option = {
		name = EVTOPTB_CHI_155
		trigger = {
			has_character_flag = mission_not_at_war
		}
		clr_quest = mission_chivalry_helpwar
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 50
	}


	after = {
		clr_character_flag = mission_not_at_war
		clr_character_flag = mission_chivalry_helpwar_troops
		clr_character_flag = mission_chivalry_helpwar_workers
		clr_character_flag = mission_chivalry_helpwar_money
		clr_character_flag = mission_chivalry_helpwar_war
		clr_character_flag = mission_chivalry_helpwar_flag
	}
}

# HO Help War overtime ping
# character_event = {
	# id = CHI.156
	# hide_window = yes 
	# is_triggered_only = yes
	# trigger = {
		# is_ruler = yes
	# }
	# immediate = { 
		# FROM = { character_event = { id = CHI.157 } } 
	# }
# }

# HO Help War overtime ping pay
# character_event = {
	# id = CHI.157
	# hide_window = yes 
	# is_triggered_only = yes
	# immediate = { 
		# if = {
			# limit = {
				# check_variable = { which = chivalry_overtime_sum value = 24 }
			# }
			# set_variable = { which = "chivalry_overtime_sum" value = 0 }
			# break = yes
		# }
		# transfer_scaled_wealth = { to = FROM value = 0.05 }
		# change_variable = { which = "chivalry_overtime_sum" value = 1 }
		# FROM = { character_event = { id = CHI.156 days = 30 } }
	# }
# }

#HO Help War receive the help
letter_event = {
	id = CHI.158
	border = GFX_event_letter_frame_war_chivalry
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_money }
			FROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_158_ADVICES
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_troops }
			FROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_158_TROOPS
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_workers }
			FROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_158_WORKERS
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_war }
			FROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_158_WAR
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_money }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_158_ADVICES_custom
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_troops }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_158_TROOPS_custom
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_workers }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_158_WORKERS_custom
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_war }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_158_WAR_custom
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_158
		FROM = { letter_event = { id = CHI.1581 } } 
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_money }
		}
		FROM = { transfer_scaled_wealth = { to = ROOT value = 1 } }
	}
	option = {
		name = EVTOPTA_CHI_158
		FROM = { letter_event = { id = CHI.1581 } } 
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_troops }
		}
		any_demesne_province = {
			add_province_modifier = {
			name = chivalry_take_troops
			duration = 720
			}
		}
	}
	option = {
		name = EVTOPTA_CHI_158
		FROM = { letter_event = { id = CHI.1581 } } 
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_workers }
		}
		any_demesne_province = {
			add_province_modifier = {
			name = chivalry_take_workers
			duration = 720
			}
		}
	}
	option = {
		name = EVTOPTA_CHI_158
		FROM = { letter_event = { id = CHI.1581 } } 
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_war }
		}
	}
}

#HO Help War thanks the helper
letter_event = {
	id = CHI.1581
	border = GFX_event_letter_frame_war_chivalry
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_money
		}
		text = EVTDESC_CHI_1581_ADVICES
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_troops
		}
		text = EVTDESC_CHI_1581_TROOPS
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_workers
		}
		text = EVTDESC_CHI_1581_WORKERS
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_war
		}
		text = EVTDESC_CHI_1581_WAR
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_1581
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_chivalry_helped_war
				years = 2
			}
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_helpwar_war
			}
			FROM = { character_event = { id = CHI.159 } } 
		}
	}
}

#HO Help War participation ping
character_event = {
	id = CHI.159
	hide_window = yes 
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				ROOT = {
					any_war = {
						days_since_last_hostile_action = {
							who = FROM	# The character whose activity is being checked
							days = 730   # Number of days since last battle participation or offensive siege
						}
					}
				}
			}
			FROM = { character_event = { id = CHI.1592 } } #didnt help chain
			break = yes
		}
		FROM = { character_event = { id = CHI.1591 } } #ping back
	}
}

#HO Help War participation ping back
character_event = {
	id = CHI.1591
	hide_window = yes 
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				is_primary_war_defender = yes 
				is_primary_war_attacker = yes 
			}
		}
	}
	
	immediate = {
		FROM = { character_event = { id = CHI.159 days = 120 } } #ping back
	}
}

#HO Help War participation calling GM
character_event = {
	id = CHI.1592
	hide_window = yes 
	is_triggered_only = yes
	
	immediate = {
		society = { #grand master
			random_society_member = {
				limit = {
					NOT = { character = ROOT }
					is_society_grandmaster = yes
				}
				character_event = { id = CHI.1593 }
			}
		}
	}
}

#HO Help War participation calling GM ping
character_event = {
	id = CHI.1593
	hide_window = yes 
	is_triggered_only = yes
	
	immediate = {
		FROM = { letter_event = { id = CHI.1594 } }
	}
}

#HO Help War participation calling GM punition
letter_event = {
	id = CHI.1594
	border = GFX_event_letter_frame_war_chivalry
	desc = EVTDESC_CHI_1594
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = {
		name = EVTOPTA_CHI_1594
		prestige = -100
		piety = -100
		change_society_currency = -200
	}
	
	after = {
		clr_character_flag = chivalry_block_currency
	}
}


####Mission: FG Help War ping
character_event = {
	id = CHI.160
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { society_quest_event = { id = CHI.161 } } 
	}
}

#FG Help War quest
society_quest_event = {
	id = CHI.161
	desc = EVTDESC_CHI_161

	is_triggered_only = yes
	
	immediate = {
		any_playable_ruler = {
			limit = {
				is_within_diplo_range = ROOT
				NOT = { character = ROOT }
				controls_religion = no
				is_landed = yes
				NOT = { primary_title = { temporary = yes } }
				NOT = { is_vassal_or_below = ROOT }
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
				}
				OR = {
					NOT = { has_character_flag = mission_chivalry_helpwar_washelped }
					had_character_flag = { flag = mission_chivalry_helpwar_washelped days = 1460 }
				}
				in_revolt = no
				OR = {
					any_war = {
						attacker = { 
							has_fighter_societies_same_as_SCOPE_culture = yes
							NOT = { war_score = 60 }
						}
						defender = { 
							has_fighter_societies_same_as_SCOPE_culture = yes
							NOR = {
								war_score = 60
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					any_war = {
						defender = { 
							has_fighter_societies_same_as_SCOPE_culture = yes
							NOT = { war_score = 60 }
						}
						attacker = {
							has_fighter_societies_same_as_SCOPE_culture = yes
							NOR = {
								war_score = 60
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
							}
						}
					}
				}
			}
			save_event_target_as = mission_chivalry_helpwar_target
		}
	}

	quest_target = event_target:mission_chivalry_helpwar_target
	
	option = {
		name = ACCEPT
		ai_chance = { factor = 1 }
		
		event_target:mission_chivalry_helpwar_target = {
			set_quest_target = {
				id = mission_chivalry_helpwar
				holder = ROOT
			}
			clr_character_flag = mission_chivalry_helpwar_washelped
			set_character_flag = mission_chivalry_helpwar_washelped
		}
	
		if = {
			limit = { #Force ai to help
				ai = yes
			}
			event_target:mission_chivalry_helpwar_target = { character_event = { id = CHI.1611 days = 200 random = 100 } }
		}
	}

	option = {
		name = DECLINE
		ai_chance = { factor = 0 }
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
	}
}

#HO Help War force AI to help
character_event = {
	id = CHI.1611
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { character_event = { id = CHI.163 } }
	}
}

#FG Help War decision ping
character_event = {
	id = CHI.162
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROMFROM = { character_event = { id = CHI.163 } }
	}
}

#FG Help War how will you help
character_event = {
	id = CHI.163
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_large_army

	desc = {
		trigger = {
			FROM = { war = yes }
		}
		picture = GFX_evt_large_army
		
		text = EVTDESC_CHI_163_WAR
	}
	
	desc = {
		trigger = {
			FROM = { war = no }
		}
		picture = GFX_evt_magnificent_castle
		text = EVTDESC_CHI_163_PEACE
	}
	
	is_triggered_only = yes
	
	immediate = {
		if =  {
			limit = {
				FROM = { war = no }
			}
			set_character_flag = mission_not_at_war
		}
	
	}
	option = { #Advice
		name = EVTOPTA_CHI_163 #maybe tooltip why pay money
		set_character_flag = mission_chivalry_helpwar_money
		# if = {
			# limit = {
				# NOT = { martial = 10 }
			# }
			# FROM = {
				# add_character_modifier = {
					# name = chivalry_military_advices_poor
					# duration = 720
				# }
			# }
		# }
		# if = {
			# limit = {
				# martial = 10
				# NOT = { martial = 20 }
			# }
			# FROM = {
				# add_character_modifier = {
					# name = chivalry_military_advices_average
					# duration = 720
				# }
			# }
		# }
		# if = {
			# limit = {
				# martial = 20
			# }
			# FROM = {
				# add_character_modifier = {
					# name = chivalry_military_advices_good
					# duration = 720
				# }
			# }
		# }
		scaled_wealth = -0.5
		FROM = { letter_event = { id = CHI.168 } }	
	}
			
	# EVTOPTB_CHI_163, give gold over time
	
	option = { #Troops
		name = EVTOPTC_CHI_163
		trigger = {
			FROM = { war = yes }
			OR = {
				primary_title = { higher_tier_than = BARON } 
				ai = no
			}
		}
		# FROM = {
			# any_demesne_province = {
				# add_province_modifier = {
				# name = chivalry_take_troops
				# duration = 720
				# }
			# }
		# }
		any_demesne_province = {
			add_province_modifier = {
			name = chivalry_give_troops
			duration = 720
			}
		}
		set_character_flag = mission_chivalry_helpwar_troops
		FROM = { letter_event = { id = CHI.168 } }
	}
	option = { #Manpower to repair
		name = EVTOPTD_CHI_163
		trigger = {
			FROM = { war = no }
			OR = {
				primary_title = { higher_tier_than = BARON } 
				ai = no
			}
		}
		# FROM = {
			# any_demesne_province = {
				# add_province_modifier = {
				# name = chivalry_take_workers
				# duration = 720
				# }
			# }
		# }
		any_demesne_province = {
			add_province_modifier = {
			name = chivalry_give_workers
			duration = 720
			}
		}
		set_character_flag = mission_chivalry_helpwar_workers
		FROM = { letter_event = { id = CHI.168 } }
	}
	option = { #War
		name = EVTOPTE_CHI_163
		trigger = {
			FROM = {
				OR = {
					AND = {
						is_primary_war_attacker = yes 
						any_war = {
							attacker = { has_fighter_societies_same_as_SCOPE_culture = yes }
							defender = { 
								has_fighter_societies_same_as_SCOPE_culture = yes
								NOR = {
									has_non_aggression_pact_with = ROOT
									is_allied_with = ROOT
								}
							}
						}
					}
					AND = {
						is_primary_war_defender = yes 
						any_war = {
							defender = { has_fighter_societies_same_as_SCOPE_culture = yes }
							attacker = {
								has_fighter_societies_same_as_SCOPE_culture = yes
								NOR = {
									has_non_aggression_pact_with = ROOT
									is_allied_with = ROOT
								}
							}
						}
					}
				}
			}
		}
		hidden_tooltip = {
		if = {
			limit = {
				FROM = { 
					is_primary_war_attacker = yes 
			 		any_war = {
						defender = {
							has_fighter_societies_same_as_SCOPE_culture = yes
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
							}
						}
					}
				}
			}
			FROM = {
				any_war = {
					limit = {
						PREV = {  is_primary_war_attacker = yes }
						defender = { 
							has_fighter_societies_same_as_SCOPE_culture = yes
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
							}
						}
					}
					ROOT = {
						join_attacker_wars = PREV
					}
				}
			}
		}
		else = {
			FROM = {
				any_war = {
					limit = {
						PREV = {  is_primary_war_defender = yes }
						attacker = {
							has_fighter_societies_same_as_SCOPE_culture = yes
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
							}
						}
					}
					ROOT = {
						join_defender_wars = PREV
					}
				}
			}
		}
		}
		# if = {
			# limit = {
				# FROM = { 
					# is_primary_war_attacker = yes 
					# any_war = {
						# defender = { 
							# has_fighter_societies_same_as_SCOPE_culture = yes
							# NOR = {
								# has_non_aggression_pact_with = ROOT
								# is_allied_with = ROOT
							# }
						# }
					# }
				# }
			# }
			# join_attacker_wars = FROM
		# }
		# else = {
			# join_defender_wars = FROM
		# }
		set_character_flag = mission_chivalry_helpwar_war
		FROM = { letter_event = { id = CHI.168 } }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				is_landed = no
			}
			modifier = {
				factor = 2
				OR = {
					is_friend = yes
					dynasty = from
				}
			}
		}
	}
	option = { #Nothing
		name = EVTOPTF_CHI_163
		FROM = { clr_character_flag = mission_chivalry_helpwar_flag }
		ai_chance = {
			factor = 0
		}
	}
	after = {
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						has_character_flag = mission_chivalry_helpwar_money
						has_character_flag = mission_chivalry_helpwar_troops
						has_character_flag = mission_chivalry_helpwar_workers
						has_character_flag = mission_chivalry_helpwar_war
					}
				}
				society = {
					random_society_member = {
						limit = {
							NOT = { character = ROOT }
						}
						character_event = { id = CHI.164 days = 1 } 
					}
				}
			}
		}
	}
}

#FG Help War ending ping
character_event = {
	id = CHI.164
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { letter_event = { id = CHI.165 } } 
	}
}

#FG Help War completion
letter_event = {
	id = CHI.165
	border = GFX_event_letter_frame_war_chivalry
	

	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_money
		}
		text = EVTDESC_CHI_165_ADVICES
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_troops
		}
		text = EVTDESC_CHI_165_TROOPS
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_workers
		}
		text = EVTDESC_CHI_165_WORKERS
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_war
		}
		text = EVTDESC_CHI_165_WAR
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_165
		trigger = {
			NOT = { has_character_flag = mission_not_at_war }
		}
		clr_quest = mission_chivalry_helpwar
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150
		risk_society_extra_reward = yes
	}
	
	option = {
		name = EVTOPTB_CHI_165
		trigger = {
			has_character_flag = mission_not_at_war
		}
		clr_quest = mission_chivalry_helpwar
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 50
	}


	after = {
		clr_character_flag = mission_not_at_war
		clr_character_flag = mission_chivalry_helpwar_troops
		clr_character_flag = mission_chivalry_helpwar_workers
		clr_character_flag = mission_chivalry_helpwar_money
		clr_character_flag = mission_chivalry_helpwar_war
		clr_character_flag = mission_chivalry_helpwar_flag
	}
}

#FG Help War overtime ping ID.166

#FG Help War overtime ping pay ID.167

#FG Help War receive the help
letter_event = {
	id = CHI.168
	border = GFX_event_letter_frame_war_chivalry
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_money }
		}
		text = EVTDESC_CHI_168_ADVICES
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_troops }
		}
		text = EVTDESC_CHI_168_TROOPS
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_workers }
		}
		text = EVTDESC_CHI_168_WORKERS
	}
	
	desc = {
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_war }
		}
		text = EVTDESC_CHI_168_WAR
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_168
		FROM = { letter_event = { id = CHI.1681 } } 
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_money }
		}
		if = {
			limit = {
				FROM = { NOT = { martial = 10 } }
			}
			add_character_modifier = {
				name = chivalry_military_advices_poor
				duration = 720
			}
		}
		if = {
			limit = {
				FROM = { martial = 10 }
				FROM = { NOT = { martial = 20 } }
			}
			add_character_modifier = {
				name = chivalry_military_advices_average
				duration = 720
			}
		}
		if = {
			limit = {
				FROM = { martial = 20 }
			}
			add_character_modifier = {
				name = chivalry_military_advices_good
				duration = 720
			}
		}
	}
	option = {
		name = EVTOPTA_CHI_168
		FROM = { letter_event = { id = CHI.1681 } } 
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_troops }
		}
		any_demesne_province = {
			add_province_modifier = {
			name = chivalry_take_troops
			duration = 720
			}
		}
	}
	option = {
		name = EVTOPTA_CHI_168
		FROM = { letter_event = { id = CHI.1681 } } 
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_workers }
		}
		any_demesne_province = {
			add_province_modifier = {
			name = chivalry_take_workers
			duration = 720
			}
		}
	}
	option = {
		name = EVTOPTA_CHI_168
		FROM = { letter_event = { id = CHI.1681 } } 
		trigger = {
			FROM = { has_character_flag = mission_chivalry_helpwar_war }
		}
	}
}

#FG Help War thanks
letter_event = {
	id = CHI.1681
	border = GFX_event_letter_frame_war_chivalry
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_money
		}
		text = EVTDESC_CHI_1681_ADVICES
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_troops
		}
		text = EVTDESC_CHI_1681_TROOPS
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_workers
		}
		text = EVTDESC_CHI_1681_WORKERS
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_helpwar_war
		}
		text = EVTDESC_CHI_1681_WAR
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_1681
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_chivalry_helped_war
				years = 2
			}
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_helpwar_war
			}
			FROM = { character_event = { id = CHI.169 } } 
		}
	}
}

#FG Help War participation ping
character_event = {
	id = CHI.169
	hide_window = yes 
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				ROOT = {
					any_war = {
						days_since_last_hostile_action = {
							who = FROM	# The character whose activity is being checked
							days = 730   # Number of days since last battle participation or offensive siege
						}
					}
				}
			}
			FROM = { character_event = { id = CHI.1692 } } #didnt help chain
			break = yes
		}
		FROM = { character_event = { id = CHI.1691 } } #ping back
	}
}

#FG Help War participation ping back
character_event = {
	id = CHI.1691
	hide_window = yes 
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			OR = {
				is_primary_war_defender = yes 
				is_primary_war_attacker = yes 
			}
		}
	}
	
	immediate = {
		FROM = { character_event = { id = CHI.169 days = 120 } } #ping back
	}
}

#FG Help War participation calling GM
character_event = {
	id = CHI.1692
	hide_window = yes 
	is_triggered_only = yes
	
	immediate = {
		society = { #grand master
			random_society_member = {
				limit = {
					NOT = { character = ROOT }
				}
				character_event = { id = CHI.1693 }
			}
		}
	}
}

#FG Help War participation calling GM ping
character_event = {
	id = CHI.1693
	hide_window = yes 
	is_triggered_only = yes
	
	immediate = {
		FROM = { letter_event = { id = CHI.1694 } }
	}
}

#FG Help War participation calling GM punition
letter_event = {
	id = CHI.1694
	border = GFX_event_letter_frame_war_chivalry
	desc = EVTDESC_CHI_1694
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = {
		name = EVTOPTA_CHI_1694
		prestige = -200
		change_society_currency = -200
	}
	
	after = {
		clr_character_flag = chivalry_block_currency
	}
}


####Mission: HO Training ping
character_event = {
	id = CHI.170
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { society_quest_event = { id = CHI.171 } } 
	}
}

#THO/FC trainee died
character_event = {
	id = CHI.1701
	hide_window = yes 
	is_triggered_only = yes
	
	trigger = {
		is_quest_target = yes
		OR = {
			is_holyorder_societies_trigger = yes
			is_fighter_societies_trigger = yes
		}
	}
	
	immediate = { 
		society = {
			random_society_member = {
				limit = { 
					ROOT = {
						is_quest_target_of = PREV
					}
				}
				character_event = { id = CHI.1742 days = 1 }
			}
		}
	}
}

#THO/FC trainer died
character_event = {
	id = CHI.1702
	hide_window = yes 
	is_triggered_only = yes
	
	trigger = {
		has_quest = mission_chivalry_training
		OR = {
			is_holyorder_societies_trigger = yes
			is_fighter_societies_trigger = yes
		}
	}
	
	immediate = { 
		society = {
			random_society_member = {
				limit = { 
					is_quest_target_of = ROOT
				}
				character_event = { id = CHI.1751 days = 1 }
			}
		}
	}
}

#HO Training quest
society_quest_event = {
	id = CHI.171
	# desc = EVTDESC_CHI_171

	desc = {
		trigger = {
			FROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_171
	}
	desc = {
		trigger = {
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_171_custom
	}
	
	is_triggered_only = yes
	
	quest_target = event_target:quest_order_member
	
	option = {
		name = ACCEPT
		ai_chance = { factor = 1 }
		
		event_target:quest_order_member = {
			set_quest_target = {
				id = mission_chivalry_training
				holder = ROOT
			}
		}
		if = {
			limit = { #ai skip decision
				ai = yes
			}
			FROM = { character_event = { id = CHI.1721 days = 20 random = 10 } }
		}
	}

	option = {
		name = DECLINE
		ai_chance = { factor = 0 }
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		event_target:quest_order_member = {
			clr_character_flag = chivalry_being_trained
		}
	}
}

#HO Training decision ping
character_event = {
	id = CHI.172
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROMFROM = { character_event = { id = CHI.173 } }
	}
}

#HO Training ai ping
character_event = {
	id = CHI.1721
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { character_event = { id = CHI.173 } }
	}
}

#HO training trainer choose type of training
character_event = {
	id = CHI.173
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_war_chivalry
	# desc = EVTDESC_CHI_173
	
	desc = {
		trigger = {
			FROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_173
	}
	desc = {
		trigger = {
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_173_custom
	}
	
	is_triggered_only = yes

	
	immediate = { 
		FROM = { set_variable = { which = mission_chivalry_training_variable value = 0 } }
		FROM = { set_variable = { which = mission_chivalry_training_variable_round value = 0 } }
	}
	
	option = { #Martial
		name = EVTOPTA_CHI_173
		FROM = { set_character_flag = mission_chivalry_training_martial }
		FROM = { character_event = { id = CHI.1733 } }
	}	
	option = { #Sin
		name = EVTOPTB_CHI_173
		trigger = {
			OR = {
				AND = {
					FROM = { trait = lustful } 
					NOT = { trait = lustful }
				}
				AND = {
					FROM = { trait = gluttonous } 
					NOT = { trait = gluttonous }
				}
				AND = {
					FROM = { trait = greedy } 
					NOT = { trait = greedy }
				}
				AND = {
					FROM = { trait = slothful } 
					NOT = { trait = slothful }
				}
				AND = {
					FROM = { trait = wroth } 
					NOT = { trait = wroth }
				}
				AND = {
					FROM = { trait = envious } 
					NOT = { trait = envious }
				}
				AND = {
					FROM = { trait = proud } 
					NOT = { trait = proud }
				}
			}
		}
		FROM = { set_character_flag = mission_chivalry_training_sin }
		FROM = { character_event = { id = CHI.1733 } }
	}
	option = { #Virtue
		name = EVTOPTC_CHI_173
		trigger = {
			OR = {
				AND = {
					NOT = { religion_group = muslim }
					trait = chaste
					FROM = { 
						NOR = { 
							religion_group = muslim
							trait = chaste
							trait = lustful
						}
					}
				}
				AND = {
					trait = temperate
					FROM = { 
						NOR = { 
							trait = temperate
							trait = gluttonous
						}
					}
				}
				AND = {
					trait = charitable
					FROM = { 
						NOR = { 
							trait = charitable
							trait = greedy
						}
					}
				}
				AND = {
					trait = diligent
					FROM = { 
						NOR = { 
							trait = diligent
							trait = slothful
						}
					}
				}
				AND = {
					trait = patient
					FROM = { 
						NOR = { 
							trait = patient
							trait = wroth
						}
					}
				}
				AND = {
					trait = kind
					FROM = { 
						NOR = { 
							trait = kind
							trait = envious
						}
					}
				}
				AND = {
					trait = humble
					FROM = { 
						NOR = { 
							trait = humble
							trait = proud
						}
					}
				}
			}
		}
		FROM = { set_character_flag = mission_chivalry_training_virtue }
		FROM = { character_event = { id = CHI.1733 } }
	}
}

#HO training trainee see which type
character_event = {
	id = CHI.1733
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_martial
		}
		text = EVTDESC_CHI_1733_MARTIAL
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_sin
		}
		text = EVTDESC_CHI_1733_SIN
	}
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_virtue
		}
		text = EVTDESC_CHI_1733_VIRTUE
	}
	
	option = { #Start training, random quest ping
		name = EVTOPTA_CHI_1733
		FROM = { character_event = { id = CHI.174 } }
	}
}

#HO training trainer choose a method
character_event = {
	id = CHI.174
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_war_chivalry
	desc = EVTDESC_CHI_174
	
	is_triggered_only = yes
	
	immediate = { 
		set_character_flag = chivalry_block_currency
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		random_list = { #option 1
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_book } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_spare } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_meditate } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_talk } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_waterfall } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_pray } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_train } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_drug } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_fake } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_group } }
		}
		random_list = { #option 2
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_book } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_book }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_spare } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_spare }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_meditate } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_meditate }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_talk } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_talk }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_waterfall } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_waterfall }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_pray } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_pray }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_train } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_train }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_drug } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_drug }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_fake } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_fake }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_group } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_group }
			}
		}
		random_list = { #option 3
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_book } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_book }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_spare } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_spare }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_meditate } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_meditate }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_talk } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_talk }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_waterfall } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_waterfall }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_pray } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_pray }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_train } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_train }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_drug } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_drug }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_fake } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_fake }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_group } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_group }
			}
		}
	}
	
	option = { #Read a book
		name = EVTOPTA_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_book } NOT = { learning = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { learning = 8 }
					trait = slow
					trait = imbecile
					trait = blinded
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					learning = 12
					trait = erudite
					trait = faqih
					trait = scholar
					trait = quick
					trait = genius
					trait = scholarly_theologian
					trait = mastermind_theologian
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Read a book
		name = EVTOPTA_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_book } learning = 15 }
		tooltip_info = learning
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { learning = 8 }
					trait = slow
					trait = imbecile
					trait = blinded
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					learning = 12
					trait = erudite
					trait = faqih
					trait = scholar
					trait = quick
					trait = genius
					trait = scholarly_theologian
					trait = mastermind_theologian
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Friendly combat
		name = EVTOPTB_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_spare } NOT = { martial = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { martial = 8 }
					trait = cruel
					trait = craven
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					martial = 12
					trait = brave
					trait = duelist
					trait = strategist
					trait = quick
					trait = genius
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Friendly combat
		name = EVTOPTB_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_spare } martial = 15 }
		tooltip_info = martial
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { martial = 8 }
					trait = cruel
					trait = craven
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					martial = 12
					trait = brave
					trait = duelist
					trait = strategist
					trait = quick
					trait = genius
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Meditate
		name = EVTOPTC_CHI_174
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_meditate } 
			NOR = {
				trait = mystic
				trait = celibate
				trait = patient
				trait = temperate
				trait = content
			}
		}
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = possessed
					trait = wroth
					trait = slow
					trait = imbecile
					trait = arbitrary
					trait = zealous
					trait = proud
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = mystic
					trait = celibate
					trait = chaste
					trait = quick
					trait = genius
					trait = patient
					trait = temperate
					trait = shy
					trait = content
					trait = humble
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Meditate
		name = EVTOPTC_CHI_174
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_meditate } 
			OR = {
				trait = mystic
				trait = celibate
				trait = patient
				trait = temperate
				trait = content
			}
		}
		tooltip_info = learning
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = possessed
					trait = wroth
					trait = slow
					trait = imbecile
					trait = arbitrary
					trait = zealous
					trait = proud
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = mystic
					trait = celibate
					trait = chaste
					trait = quick
					trait = genius
					trait = patient
					trait = temperate
					trait = shy
					trait = content
					trait = humble
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Talk
		name = EVTOPTD_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_talk } NOT = { diplomacy = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { diplomacy = 8 }
					trait = shy
					trait = wroth
					trait = slow
					trait = imbecile
					trait = arbitrary
					trait = deceitful
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					diplomacy = 12
					trait = charismatic_negotiator
					trait = grey_eminence
					trait = socializer
					trait = quick
					trait = genius
					trait = poet
					trait = gregarious
					trait = honest
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Talk
		name = EVTOPTD_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_talk } diplomacy = 15 }
		tooltip_info = diplomacy
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { diplomacy = 8 }
					trait = shy
					trait = wroth
					trait = slow
					trait = imbecile
					trait = arbitrary
					trait = deceitful
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					diplomacy = 12
					trait = charismatic_negotiator
					trait = grey_eminence
					trait = socializer
					trait = quick
					trait = genius
					trait = poet
					trait = gregarious
					trait = honest
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Waterfall
		name = EVTOPTE_CHI_174
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_waterfall } 
			NOR = {
				trait = strong
				trait = robust
				trait = stubborn
				trait = brave
			}
		}
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = weak
					trait = feeble
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = strong
					trait = robust
					trait = patient
					trait = quick
					trait = genius
					trait = brave
					trait = stubborn
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Waterfall
		name = EVTOPTE_CHI_174
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_waterfall } 
			OR = {
				trait = strong
				trait = robust
				trait = stubborn
				trait = brave
			}
		}
		tooltip_info = martial
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = weak
					trait = feeble
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = strong
					trait = robust
					trait = patient
					trait = quick
					trait = genius
					trait = brave
					trait = stubborn
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Pray
		name = EVTOPTF_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_pray } NOT = { learning = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { learning = 8 }
					trait = cynical
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					learning = 12
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = mystic
					trait = theologian
					trait = zealous
					trait = genius
					trait = quick
					is_ascetic_trigger = yes
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Pray
		name = EVTOPTF_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_pray } learning = 15 }
		tooltip_info = learning
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { learning = 8 }
					trait = cynical
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					learning = 12
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = mystic
					trait = theologian
					trait = zealous
					trait = genius
					trait = quick
					is_ascetic_trigger = yes
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Train
		name = EVTOPTG_CHI_174
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_train }  
			NOR = {
				trait = ambitious
				trait = diligent
				trait = administrator
			}
		}
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = dull
					trait = slow
					trait = imbecile
					trait = slothful
					trait = content
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = ambitious
					trait = diligent
					trait = administrator
					trait = shrewd
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Train
		name = EVTOPTG_CHI_174
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_train }  
			OR = {
				trait = ambitious
				trait = diligent
				trait = administrator
			}
		}
		tooltip_info = martial
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = dull
					trait = slow
					trait = imbecile
					trait = slothful
					trait = content
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = ambitious
					trait = diligent
					trait = administrator
					trait = shrewd
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Drug
		name = EVTOPTH_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_drug } NOT = { intrigue = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { intrigue = 8 }
					trait = lunatic
					trait = possessed
					trait = slow
					trait = imbecile
					trait = temperate
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					intrigue = 12
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = mystic
					trait = physician
					trait = drunkard
					trait = hedonist
					trait = scholar
					trait = schemer
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Drug
		name = EVTOPTH_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_drug } intrigue = 15 }
		tooltip_info = intrigue
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { intrigue = 8 }
					trait = lunatic
					trait = possessed
					trait = slow
					trait = imbecile
					trait = temperate
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					intrigue = 12
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = mystic
					trait = physician
					trait = drunkard
					trait = hedonist
					trait = scholar
					trait = schemer
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Faking
		name = EVTOPTI_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_fake } NOT = { intrigue = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { intrigue = 8 }
					trait = honest
					trait = shy
					trait = just
					trait = trusting
					trait = slow
					trait = imbecile
					trait = temperate
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					intrigue = 12
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = socializer
					trait = gamer
					trait = proud
					trait = deceitful
					trait = gregarious
					trait = arbitrary
					trait = schemer
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Faking
		name = EVTOPTI_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_fake } intrigue = 15 }
		tooltip_info = intrigue
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { intrigue = 8 }
					trait = honest
					trait = shy
					trait = just
					trait = trusting
					trait = slow
					trait = imbecile
					trait = temperate
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					intrigue = 12
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = socializer
					trait = gamer
					trait = proud
					trait = deceitful
					trait = gregarious
					trait = arbitrary
					trait = schemer
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Group
		name = EVTOPTJ_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_group } NOT = { diplomacy = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		if = {
			limit = {
				OR = {
					NOT = { diplomacy = 8 }
					trait = slothful
					trait = shy
					trait = craven
					trait = paranoid
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					diplomacy = 12
					trait = grey_eminence
					trait = charismatic_negotiator
					trait = socializer
					trait = gamer
					trait = diligent
					trait = gregarious
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Group
		name = EVTOPTJ_CHI_174
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_group } diplomacy = 15 }
		tooltip_info = diplomacy
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		if = {
			limit = {
				OR = {
					NOT = { diplomacy = 8 }
					trait = slothful
					trait = shy
					trait = craven
					trait = paranoid
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					diplomacy = 12
					trait = grey_eminence
					trait = charismatic_negotiator
					trait = socializer
					trait = gamer
					trait = diligent
					trait = gregarious
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.175 days = 30 } }
	}
	option = { #Give up
		name = EVTOPTK_CHI_174
		change_society_currency = -200
		add_mission_fail_influence_effect = yes
		clr_character_flag = mission_chivalry_training_flag
		clr_quest = mission_chivalry_training
		hidden_tooltip = {
			FROM = { set_variable = { which = mission_chivalry_training_variable value = 0 } }
			FROM = { set_variable = { which = mission_chivalry_training_variable_round value = 0 } }
			FROM = { clr_character_flag = mission_chivalry_training_martial }
			FROM = { clr_character_flag = mission_chivalry_training_virtue }
			FROM = { clr_character_flag = mission_chivalry_training_sin }
			FROM = { clr_character_flag = chivalry_being_trained }
			FROM = { clr_character_flag = mission_chivalry_training_option_book }
			FROM = { clr_character_flag = mission_chivalry_training_option_spare }
			FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
			FROM = { clr_character_flag = mission_chivalry_training_option_talk }
			FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
			FROM = { clr_character_flag = mission_chivalry_training_option_pray }
			FROM = { clr_character_flag = mission_chivalry_training_option_train }
			FROM = { clr_character_flag = mission_chivalry_training_option_drug }
			FROM = { clr_character_flag = mission_chivalry_training_option_fake }
			FROM = { clr_character_flag = mission_chivalry_training_option_group }
			FROM = { clr_character_flag = mission_chivalry_training_poor }
			FROM = { clr_character_flag = mission_chivalry_training_good }
		}
		FROM = { letter_event = { id = CHI.178 } }
		ai_chance = { 
			factor = 0.01
			modifier = {
				factor = 100
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 10 } }
			}
		}
	}
	
	after = {
		clr_character_flag = chivalry_block_currency
		# if = { #if the trainee died #obsolete
			# limit = {
				# FROM = { is_alive = no }
			# }
			# character_event = { id = CHI.1742 }
		# }
		# FROM = { character_event = { id = CHI.1741 } } #death ping
	}
}

#HO Training trainee death ping #obsolete
character_event = {
	id = CHI.1741
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { character_event = { id = CHI.1742 days = 30 } } #death ping
	}
}

#HO training trainer react to trainee death
character_event = {
	id = CHI.1742
	picture = GFX_evt_shadowy_cabal

	desc = {
		text = EVTDESC_CHI_1742
		trigger = {
			is_female = yes
		}
		picture = GFX_evt_bad_news_female
	}
	desc = {
		text = EVTDESC_CHI_1742
		trigger = {
			is_female = no
		}
		picture = GFX_evt_bad_news
	}	

	is_triggered_only = yes
	
	trigger = {
		FROM = { is_alive = no }
	}
	
	option = { #i tried
		name = EVTOPTA_CHI_1742
		clr_character_flag = mission_chivalry_training_flag
		change_society_currency = 50 #half the reward
		prestige = 50 
		clr_quest = mission_chivalry_training
	}
}

#HO training trainee receive training type
character_event = {
	id = CHI.175
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_large_army
	
	is_triggered_only = yes
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_book
		}
		text = EVTDESC_CHI_175_BOOK
		picture = GFX_evt_library
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_spare
		}
		text = EVTDESC_CHI_175_SPARE
		picture = GFX_evt_melee
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_meditate
		}
		text = EVTDESC_CHI_175_MEDITATE
		picture = GFX_evt_garden
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_talk
		}
		text = EVTDESC_CHI_175_TALK
		picture = GFX_evt_courtiers_talking
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_waterfall
		}
		text = EVTDESC_CHI_175_WATERFALL
		picture = GFX_evt_rider_adventure
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_pray
		}
		text = EVTDESC_CHI_175_PRAY
		picture = GFX_evt_knight_kneeling
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_train
		}
		text = EVTDESC_CHI_175_TRAIN
		picture = GFX_evt_family_feud_republic
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_drug
		}
		text = EVTDESC_CHI_175_DRUG
		picture = GFX_evt_scientist
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_fake
		}
		text = EVTDESC_CHI_175_FAKE
		picture = GFX_evt_dancing
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_group
		}
		text = EVTDESC_CHI_175_GROUP
		picture = GFX_evt_church_council
	}
	
	immediate = {
		random = {
			chance = 30
			set_character_flag = mission_chivalry_training_guess
		}
	}
	
	option = { #Follow the advices
		name = EVTOPTA_CHI_175
		trigger = {
			has_character_flag = mission_chivalry_training_guess
			has_character_flag = mission_chivalry_training_good
		}
		tooltip_info_custom = chivalry_available_because_good_tt
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_poor
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = -1 } }
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_good
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 2 } }
			
		}
		if = {
			limit = {
				NOT = { has_character_flag = mission_chivalry_training_good }
				NOT = { has_character_flag = mission_chivalry_training_poor }
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 1 } }
		}
		trigger_switch = {
			on_trigger = has_character_flag
			mission_chivalry_training_option_book		= { random = { chance = 10 add_trait = erudite } }
			mission_chivalry_training_option_spare		= { random = { chance = 10 add_trait = brave } }
			mission_chivalry_training_option_meditate	= { random = { chance = 10 add_trait = content } }
			mission_chivalry_training_option_talk		= { random = { chance = 10 add_trait = gregarious } }
			mission_chivalry_training_option_waterfall	= { random = { chance = 10 add_trait = trusting } }
			mission_chivalry_training_option_pray		= { random = { chance = 10 add_trait = zealous } }
			mission_chivalry_training_option_train	  = { random = { chance = 10 add_trait = stubborn } }
			mission_chivalry_training_option_drug	   = { random = { chance = 10 add_trait = arbitrary } }
			mission_chivalry_training_option_fake	   = { random = { chance = 10 add_trait = deceitful } }
			mission_chivalry_training_option_group	  = { random = { chance = 10 add_trait = shy } }	
		}
	}
	
	option = { #Follow the advices
		name = EVTOPTA_CHI_175
		trigger = {
			NAND = {
				has_character_flag = mission_chivalry_training_guess
				has_character_flag = mission_chivalry_training_good
			}
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_poor
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = -1 } }
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_good
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 2 } }
			
		}
		if = {
			limit = {
				NOT = { has_character_flag = mission_chivalry_training_good }
				NOT = { has_character_flag = mission_chivalry_training_poor }
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 1 } }
		}
		trigger_switch = {
			on_trigger = has_character_flag
			mission_chivalry_training_option_book		= { random = { chance = 10 add_trait = erudite } }
			mission_chivalry_training_option_spare		= { random = { chance = 10 add_trait = brave } }
			mission_chivalry_training_option_meditate	= { random = { chance = 10 add_trait = content } }
			mission_chivalry_training_option_talk		= { random = { chance = 10 add_trait = gregarious } }
			mission_chivalry_training_option_waterfall	= { random = { chance = 10 add_trait = trusting } }
			mission_chivalry_training_option_pray		= { random = { chance = 10 add_trait = zealous } }
			mission_chivalry_training_option_train	  = { random = { chance = 10 add_trait = stubborn } }
			mission_chivalry_training_option_drug	   = { random = { chance = 10 add_trait = arbitrary } }
			mission_chivalry_training_option_fake	   = { random = { chance = 10 add_trait = deceitful } }
			mission_chivalry_training_option_group	  = { random = { chance = 10 add_trait = shy } }	
		}
	}
	
	option = { #Dont follow advices
		name = EVTOPTB_CHI_175
		trigger = {
			NAND = {
				has_character_flag = mission_chivalry_training_guess
				has_character_flag = mission_chivalry_training_poor
			}
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_poor
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 2 } }
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_good
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = -1 } }
		}
		if = {
			limit = {
				NOT = { has_character_flag = mission_chivalry_training_good }
				NOT = { has_character_flag = mission_chivalry_training_poor }
			}
			hidden_tooltip = { 
				random = {
					chance = 50
					change_variable = { which = "mission_chivalry_training_variable" value = 1 }
				}
			}
		}
	}
	
	option = { #Dont follow advices
		name = EVTOPTB_CHI_175
		trigger = {
			has_character_flag = mission_chivalry_training_guess
			has_character_flag = mission_chivalry_training_poor
		}
		tooltip_info_custom = chivalry_available_because_bad_tt
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_poor
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 2 } }
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_good
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = -1 } }
		}
		if = {
			limit = {
				NOT = { has_character_flag = mission_chivalry_training_good }
				NOT = { has_character_flag = mission_chivalry_training_poor }
			}
			hidden_tooltip = { 
				random = {
					chance = 50
					change_variable = { which = "mission_chivalry_training_variable" value = 1 }
				}
			}
		}
	}
	
	option = { #Give up
		name = EVTOPTC_CHI_175
		hidden_tooltip = {
			set_variable = { which = mission_chivalry_training_variable value = 0 }
			set_variable = { which = mission_chivalry_training_variable_round value = 0 }
		}
		clr_character_flag = mission_chivalry_training_martial
		clr_character_flag = mission_chivalry_training_virtue
		clr_character_flag = mission_chivalry_training_sin
		clr_character_flag = chivalry_being_trained
		clr_character_flag = mission_chivalry_training_option_book
		clr_character_flag = mission_chivalry_training_option_spare
		clr_character_flag = mission_chivalry_training_option_meditate
		clr_character_flag = mission_chivalry_training_option_talk
		clr_character_flag = mission_chivalry_training_option_waterfall
		clr_character_flag = mission_chivalry_training_option_pray
		clr_character_flag = mission_chivalry_training_option_train
		clr_character_flag = mission_chivalry_training_option_drug
		clr_character_flag = mission_chivalry_training_option_fake
		clr_character_flag = mission_chivalry_training_option_group
		FROM = { letter_event = { id = CHI.179 } }
		ai_chance = { 
			factor = 0.01
			modifier = {
				factor = 100
				NOT = { check_variable = { which = mission_chivalry_training_variable value = -4 } }
			}
		}
	}
	
	after = {
		hidden_tooltip = {
			if = { 
				limit = { #training done
					has_character_flag = chivalry_being_trained
					OR = {
						check_variable = { which = mission_chivalry_training_variable value = 4 }
						check_variable = { which = mission_chivalry_training_variable value = 5 }
					}
				}
				FROM = { letter_event = { id = CHI.176  days = 5 } } #trainer reward quest
			}
			if = { 
				limit = { #need more training
					has_character_flag = chivalry_being_trained
					NOT = { check_variable = { which = mission_chivalry_training_variable value = 4 } }
					NOT = { check_variable = { which = mission_chivalry_training_variable value = 5 } }
				}
				FROM = { character_event = { id = CHI.174 days = 5 } } #back to choose type
			}
			if = { 
				limit = {
					has_character_flag = chivalry_being_trained
				}
				change_variable = { which = mission_chivalry_training_variable_round value = 1 }	
			}
			clr_character_flag = mission_chivalry_training_poor
			clr_character_flag = mission_chivalry_training_good
			clr_character_flag = mission_chivalry_training_guess
			# if = { #if the trainer died #obsolete
				# limit = {
					# FROM = { is_alive = no }
				# }
				# character_event = { id = CHI.1751 }
			# }
		}
	}
}

#HO training trainee react to trainer death
character_event = {
	id = CHI.1751
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_large_army
	
	desc = {
		text = EVTDESC_CHI_1751
		trigger = {
			is_female = yes
		}
		picture = GFX_evt_bad_news_female
	}
	desc = {
		text = EVTDESC_CHI_1751
		trigger = {
			is_female = no
		}
		picture = GFX_evt_bad_news
	}	
	
	is_triggered_only = yes
	
	option = { #return to queue
		name = EVTOPTA_CHI_1751
	}
	
	option = { #give up
		name = EVTOPTB_CHI_1751
		clr_character_flag = chivalry_requested_training
	}
	
	after = { #cleaning
		hidden_tooltip = {
			set_variable = { which = mission_chivalry_training_variable value = 0 }
			set_variable = { which = mission_chivalry_training_variable_round value = 0 }
		}
		clr_character_flag = mission_chivalry_training_martial
		clr_character_flag = mission_chivalry_training_virtue
		clr_character_flag = mission_chivalry_training_sin
		clr_character_flag = chivalry_being_trained
		clr_character_flag = mission_chivalry_training_option_book
		clr_character_flag = mission_chivalry_training_option_spare
		clr_character_flag = mission_chivalry_training_option_meditate
		clr_character_flag = mission_chivalry_training_option_talk
		clr_character_flag = mission_chivalry_training_option_waterfall
		clr_character_flag = mission_chivalry_training_option_pray
		clr_character_flag = mission_chivalry_training_option_train
		clr_character_flag = mission_chivalry_training_option_drug
		clr_character_flag = mission_chivalry_training_option_fake
		clr_character_flag = mission_chivalry_training_option_group
	}
}

#HO training trainer reward
letter_event = {
	id = CHI.176
	desc = EVTDESC_CHI_176
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTA_CHI_176
			trigger = { FROM = { NOT = { society_member_of = society_holy_one } } }
		}
		name = {
			text = EVTOPTA_CHI_176_custom
			trigger = { FROM = { society_member_of = society_holy_one } }
		}
		
		clr_quest = mission_chivalry_training
		clr_character_flag = mission_chivalry_training_flag
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 100
		piety = 50
		prestige = 50
		FROM = { character_event = { id = CHI.177 } } #trainee get trait
	}
}

#HO training trainee reward
character_event = {
	id = CHI.177
	picture = GFX_evt_religious_exultation
	border = GFX_event_normal_frame_war_chivalry
	desc = EVTDESC_CHI_177
	
	is_triggered_only = yes
	
	option = { #get trait
		name = EVTOPTA_CHI_177
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_martial
			}
			random_list = {
				10 = {
					trigger = {
						FROM = { NOT = { trait = craven } }
						trait = craven
					}
					remove_trait = craven
				}
				10 = {
					trigger = {
						FROM = { trait = brave }
						NOT = { trait = craven }
						NOT = { trait = brave }
					}
					add_trait = brave
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = arbitrary } }
						trait = arbitrary
					}
					remove_trait = arbitrary
				}
				10 = {
					trigger = {
						FROM = { trait = just }
						NOT = { trait = arbitrary }
						NOT = { trait = just }
					}
					add_trait = just
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = cynical } }
						trait = cynical
					}
					remove_trait = cynical
				}
				10 = {
					trigger = {
						FROM = { trait = zealous } 
						NOT = { trait = cynical }
						NOT = { trait = zealous }
					}
					add_trait = zealous
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = cruel } }
						trait = cruel
					}
					remove_trait = cruel
				}
				10 = {
					trigger = {
						OR = {
							FROM = { trait = tough_soldier }
							FROM = { trait = skilled_tactician }
							FROM = { trait = brilliant_strategist }
						}
						trait = misguided_warrior
					}
					remove_trait = misguided_warrior
					add_trait = tough_soldier
				}
				10 = {
					trigger = {
						OR = {
							FROM = { trait = skilled_tactician }
							FROM = { trait = brilliant_strategist }
						}
						trait = tough_soldier
					}
					remove_trait = tough_soldier
					add_trait = skilled_tactician
				}
				10 = {
					trigger = {
						FROM = { trait = strategist }
						OR = {
							FROM = { trait = brilliant_strategist }
							FROM = { trait = master_warrior }
						}
						trait = skilled_tactician
					}
					remove_trait = skilled_tactician
					add_trait = brilliant_strategist
				}	
				
				10 = { #just too messy
					chivalry_warrior_trait_upgrade = yes
				}
				# 10 = {
					# trigger = { #100% chance to get the first
						# NOR = {
							# trait = poor_warrior
							# trait = trained_warrior
							# trait = skilled_warrior
							# trait = master_warrior
						# }
					# }
					# add_trait = poor_warrior
				# }
				# 10 = {
					# trigger = { #faster training since FROM has the trait or need to wait for flags
						# trait = poor_warrior ##Wont happen if i'm not a poor warrior and if one of these 2 return true
						# OR = {
							# has_character_flag = chivalry_training_warrior_flag_one #I don't have the training flags
							# OR = {
								# FROM = { trait = trained_warrior } #he doesn't have any better warrior trait
								# FROM = { trait = skilled_warrior }
								# FROM = { trait = master_warrior }
							# }
						# }
					# }
					# add_trait = trained_warrior
					# clr_character_flag = chivalry_training_warrior_flag_one
				# }
				# 10 = {
					# trigger = { #get flag for later trained_warrior
						# trait = poor_warrior
						# NOT = { has_character_flag = chivalry_training_warrior_flag_one }
					# }
					# set_character_flag = chivalry_training_warrior_flag_one
					# custom_tooltip = { text = chivalry_training_warrior_tooltip_one }
					# character_event = { id = CHI.1771 }
					
				# }
				# 10 = {
					# trigger = { #skilled warrior
						# trait = trained_warrior 
						# OR = {
							# AND = {
								# has_character_flag = chivalry_training_warrior_flag_one
								# has_character_flag = chivalry_training_warrior_flag_two
							# }
							# OR = {
								# FROM = { trait = skilled_warrior }
								# FROM = { trait = master_warrior }
							# }
						# }
					# }
					# add_trait = skilled_warrior
					# clr_character_flag = chivalry_training_warrior_flag_one
					# clr_character_flag = chivalry_training_warrior_flag_two
				# }
				# 10 = {
					# trigger = {
						# trait = trained_warrior
						# NOT = { has_character_flag = chivalry_training_warrior_flag_one }
					# }
					# set_character_flag = chivalry_training_warrior_flag_one
					# custom_tooltip = { text = chivalry_training_warrior_tooltip_one }
					# character_event = { id = CHI.1771 }
				# }
				# 10 = {
					# trigger = {
						# trait = trained_warrior
						# has_character_flag = chivalry_training_warrior_flag_one
						# NOT = { has_character_flag = chivalry_training_warrior_flag_two }
					# }
					# set_character_flag = chivalry_training_warrior_flag_two
					# custom_tooltip = { text = chivalry_training_warrior_tooltip_two }
					# character_event = { id = CHI.1771 }
				# }
				# 10 = {
					# trigger = { #master warrior
						 # trait = skilled_warrior
						# OR = {
							# AND = {
								# has_character_flag = chivalry_training_warrior_flag_one
								# has_character_flag = chivalry_training_warrior_flag_two
								# has_character_flag = chivalry_training_warrior_flag_three
							# }
							# OR = {
								# FROM = { trait = duelist }
								# OR = {
									# FROM = { trait = brilliant_strategist }
									# FROM = { trait = master_warrior }
								# }
							# }
						# }
					# }
					# add_trait = master_warrior
					# clr_character_flag = chivalry_training_warrior_flag_one
					# clr_character_flag = chivalry_training_warrior_flag_two
					# clr_character_flag = chivalry_training_warrior_flag_three
				# }
				# 10 = {
					# trigger = {
						# trait = skilled_warrior
						# NOT = { has_character_flag = chivalry_training_warrior_flag_one }
					# }
					# set_character_flag = chivalry_training_warrior_flag_one
					# custom_tooltip = { text = chivalry_training_warrior_tooltip_one }
					# character_event = { id = CHI.1771 }
				# }
				# 10 = {
					# trigger = {
						# trait = skilled_warrior
						# has_character_flag = chivalry_training_warrior_flag_one
						# NOT = { has_character_flag = chivalry_training_warrior_flag_two }
					# }
					# set_character_flag = chivalry_training_warrior_flag_two
					# custom_tooltip = { text = chivalry_training_warrior_tooltip_two }
					# character_event = { id = CHI.1771 }
				# }
				# 10 = {
					# trigger = {
						# trait = skilled_warrior
						# has_character_flag = chivalry_training_warrior_flag_two
						# NOT = { has_character_flag = chivalry_training_warrior_flag_three }
					# }
					# set_character_flag = chivalry_training_warrior_flag_three
					# custom_tooltip = { text = chivalry_training_warrior_tooltip_three }
					# character_event = { id = CHI.1771 }
				# }
			}
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_sin
			}
			random_list = {
				10 = {
					trigger = {
						FROM = { NOT = { trait = lustful } }
						trait = lustful
					}
					remove_trait = lustful
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = gluttonous } }
						trait = gluttonous
					}
					remove_trait = gluttonous
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = greedy } }
						trait = greedy
					}
					remove_trait = greedy
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = slothful } }
						trait = slothful
					}
					remove_trait = slothful
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = wroth } }
						trait = wroth
					}
					remove_trait = wroth
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = envious } }
						trait = envious
					}
					remove_trait = envious
				}
				10 = {
					trigger = {
						FROM = { NOT = { trait = proud } }
						trait = proud
					}
					remove_trait = proud
				}
			}
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_virtue
			}
			random_list = {
				10 = {
					trigger = {
						FROM = { trait = chaste } 
						NOT = { trait = lustful }
						NOT = { trait = chaste }
						NOT = { religion_group = muslim }
					}
					add_trait = chaste
				}
				10 = {
					trigger = {
						FROM = { trait = temperate }
						NOT = { trait = gluttonous }
						NOT = { trait = temperate }
					}
					add_trait = temperate
				}
				10 = {
					trigger = {
						FROM = { trait = charitable }
						NOT = { trait = greedy }
						NOT = { trait = charitable }
					}
					add_trait = charitable
				}
				10 = {
					trigger = {
						FROM = { trait = diligent }
						NOT = { trait = slothful }
						NOT = { trait = diligent }
					}
					add_trait = diligent
				}
				10 = {
					trigger = {
						FROM = { trait = patient }
						NOT = { trait = wroth }
						NOT = { trait = patient }
					}
					add_trait = patient
				}
				10 = {
					trigger = {
						FROM = { trait = kind }
						NOT = { trait = envious }
						NOT = { trait = kind }
					}
					add_trait = kind
				}
				10 = {
					trigger = {
						FROM = { trait = humble }
						NOT = { trait = proud }
						NOT = { trait = humble }
					}
					add_trait = humble
				}
			}
		}
	}
	after = { #Give up
		hidden_tooltip = {
			set_variable = { which = mission_chivalry_training_variable value = 0 }
			set_variable = { which = mission_chivalry_training_variable_round value = 0 }
		}
		clr_character_flag = mission_chivalry_training_martial
		clr_character_flag = mission_chivalry_training_virtue
		clr_character_flag = mission_chivalry_training_sin
		clr_character_flag = chivalry_requested_training
		clr_character_flag = chivalry_being_trained
		clr_character_flag = mission_chivalry_training_option_book
		clr_character_flag = mission_chivalry_training_option_spare
		clr_character_flag = mission_chivalry_training_option_meditate
		clr_character_flag = mission_chivalry_training_option_talk
		clr_character_flag = mission_chivalry_training_option_waterfall
		clr_character_flag = mission_chivalry_training_option_pray
		clr_character_flag = mission_chivalry_training_option_train
		clr_character_flag = mission_chivalry_training_option_drug
		clr_character_flag = mission_chivalry_training_option_fake
		clr_character_flag = mission_chivalry_training_option_group
	}
}

#HO training trainer give up
letter_event = {
	id = CHI.178
	desc = EVTDESC_CHI_178
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_178
		opinion = {
			who = FROM
			modifier = opinion_chivalry_bad_teacher
			years = 1
		}
	}
}

#HO training trainee give up
letter_event = {
	id = CHI.179
	desc = EVTDESC_CHI_179
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_179
		opinion = {
			who = FROM
			modifier = opinion_chivalry_bad_student
			years = 1
		}
		change_society_currency = 50 #half the reward
		prestige = 50 
		clr_quest = mission_chivalry_training
		clr_character_flag = mission_chivalry_training_flag
	}
}

#HO/FG fighter trait upgrade notification
character_event = {
	id = CHI.1771
	desc = EVTDESC_CHI_1771
	picture = GFX_evt_child_sword
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	option = {
		name = OK 
	}
}


####Mission: FG Training ping
character_event = {
	id = CHI.180
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { society_quest_event = { id = CHI.181 } } 
	}
}

#FG Training quest
society_quest_event = {
	id = CHI.181
	desc = EVTDESC_CHI_181

	is_triggered_only = yes
	
	quest_target = event_target:quest_order_member
	
	option = {
		name = ACCEPT
		ai_chance = { factor = 1 }
		
		event_target:quest_order_member = {
			set_quest_target = {
				id = mission_chivalry_training
				holder = ROOT
			}
		}
		if = {
			limit = { #ai skip decision
				ai = yes
			}
			FROM = { character_event = { id = CHI.1821 days = 20 random = 10 } }
		}
	}

	option = {
		name = DECLINE
		ai_chance = { factor = 0 }
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		event_target:quest_order_member = {
			clr_character_flag = chivalry_being_trained
		}
	}
}

#FG Training decision ping
character_event = {
	id = CHI.182
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROMFROM = { character_event = { id = CHI.183 } }
	}
}

#FG Training ai ping
character_event = {
	id = CHI.1821
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { character_event = { id = CHI.183 } }
	}
}

#FG training trainer choose type of training
character_event = {
	id = CHI.183
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_war_chivalry
	desc = EVTDESC_CHI_183
	
	is_triggered_only = yes

	
	immediate = { 
		FROM = { set_variable = { which = mission_chivalry_training_variable value = 0 } }
		FROM = { set_variable = { which = mission_chivalry_training_variable_round value = 0 } }
	}
	
	option = { #Martial
		name = EVTOPTA_CHI_183
		FROM = { character_event = { id = CHI.1833 } }
	}	
}

#FG training trainee see which type
character_event = {
	id = CHI.1833
	desc = EVTDESC_CHI_1833
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = { #Start training, random quest ping
		name = EVTOPTA_CHI_1833
		FROM = { character_event = { id = CHI.184 } }
	}
}

#FG training trainer choose a method
character_event = {
	id = CHI.184
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_war_chivalry
	desc = EVTDESC_CHI_184
	
	is_triggered_only = yes
	
	immediate = { 
		set_character_flag = chivalry_block_currency
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		random_list = { #option 1
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_book } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_spare } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_meditate } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_talk } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_waterfall } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_pray } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_train } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_drug } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_fake } }
			10 = { FROM = { set_character_flag = mission_chivalry_training_option_group } }
		}
		random_list = { #option 2
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_book } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_book }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_spare } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_spare }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_meditate } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_meditate }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_talk } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_talk }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_waterfall } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_waterfall }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_pray } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_pray }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_train } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_train }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_drug } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_drug }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_fake } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_fake }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_group } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_group }
			}
		}
		random_list = { #option 3
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_book } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_book }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_spare } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_spare }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_meditate } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_meditate }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_talk } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_talk }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_waterfall } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_waterfall }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_pray } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_pray }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_train } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_train }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_drug } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_drug }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_fake } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_fake }
			}
			10 = { 
				modifier = { 
					factor = 0 
					FROM = { has_character_flag = mission_chivalry_training_option_group } 
				}
				FROM = { set_character_flag = mission_chivalry_training_option_group }
			}
		}
	}
	
	option = { #Read a book
		name = EVTOPTA_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_book } NOT = { learning = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { learning = 8 }
					trait = slow
					trait = imbecile
					trait = blinded
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					learning = 12
					trait = erudite
					trait = faqih
					trait = scholar
					trait = quick
					trait = genius
					trait = scholarly_theologian
					trait = mastermind_theologian
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Read a book
		name = EVTOPTA_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_book } learning = 15 }
		tooltip_info = learning
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { learning = 8 }
					trait = slow
					trait = imbecile
					trait = blinded
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					learning = 12
					trait = erudite
					trait = faqih
					trait = scholar
					trait = quick
					trait = genius
					trait = scholarly_theologian
					trait = mastermind_theologian
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Friendly combat
		name = EVTOPTB_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_spare } NOT = { martial = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { martial = 8 }
					trait = cruel
					trait = craven
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					martial = 12
					trait = brave
					trait = duelist
					trait = strategist
					trait = quick
					trait = genius
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Friendly combat
		name = EVTOPTB_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_spare } martial = 15 }
		tooltip_info = martial
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { martial = 8 }
					trait = cruel
					trait = craven
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					martial = 12
					trait = brave
					trait = duelist
					trait = strategist
					trait = quick
					trait = genius
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Meditate
		name = EVTOPTC_CHI_184
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_meditate } 
			NOR = {
				trait = mystic
				trait = celibate
				trait = patient
				trait = temperate
				trait = content
			}
		}
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = possessed
					trait = wroth
					trait = slow
					trait = imbecile
					trait = arbitrary
					trait = zealous
					trait = proud
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = mystic
					trait = celibate
					trait = chaste
					trait = quick
					trait = genius
					trait = patient
					trait = temperate
					trait = shy
					trait = content
					trait = humble
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Meditate
		name = EVTOPTC_CHI_184
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_meditate } 
			OR = {
				trait = mystic
				trait = celibate
				trait = patient
				trait = temperate
				trait = content
			}
		}
		tooltip_info = learning
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = possessed
					trait = wroth
					trait = slow
					trait = imbecile
					trait = arbitrary
					trait = zealous
					trait = proud
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = mystic
					trait = celibate
					trait = chaste
					trait = quick
					trait = genius
					trait = patient
					trait = temperate
					trait = shy
					trait = content
					trait = humble
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Talk
		name = EVTOPTD_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_talk } NOT = { diplomacy = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { diplomacy = 8 }
					trait = shy
					trait = wroth
					trait = slow
					trait = imbecile
					trait = arbitrary
					trait = deceitful
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					diplomacy = 12
					trait = charismatic_negotiator
					trait = grey_eminence
					trait = socializer
					trait = quick
					trait = genius
					trait = poet
					trait = gregarious
					trait = honest
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Talk
		name = EVTOPTD_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_talk } diplomacy = 15 }
		tooltip_info = diplomacy
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { diplomacy = 8 }
					trait = shy
					trait = wroth
					trait = slow
					trait = imbecile
					trait = arbitrary
					trait = deceitful
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					diplomacy = 12
					trait = charismatic_negotiator
					trait = grey_eminence
					trait = socializer
					trait = quick
					trait = genius
					trait = poet
					trait = gregarious
					trait = honest
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Waterfall
		name = EVTOPTE_CHI_184
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_waterfall } 
			NOR = {
				trait = strong
				trait = robust
				trait = stubborn
				trait = brave
			}
		}
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = weak
					trait = feeble
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = strong
					trait = robust
					trait = patient
					trait = quick
					trait = genius
					trait = brave
					trait = stubborn
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Waterfall
		name = EVTOPTE_CHI_184
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_waterfall } 
			OR = {
				trait = strong
				trait = robust
				trait = stubborn
				trait = brave
			}
		}
		tooltip_info = martial
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = weak
					trait = feeble
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = strong
					trait = robust
					trait = patient
					trait = quick
					trait = genius
					trait = brave
					trait = stubborn
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Pray
		name = EVTOPTF_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_pray } NOT = { learning = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { learning = 8 }
					trait = cynical
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					learning = 12
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = mystic
					trait = theologian
					trait = zealous
					trait = genius
					trait = quick
					is_ascetic_trigger = yes
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Pray
		name = EVTOPTF_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_pray } learning = 15 }
		tooltip_info = learning
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { learning = 8 }
					trait = cynical
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					learning = 12
					trait = scholarly_theologian
					trait = mastermind_theologian
					trait = mystic
					trait = theologian
					trait = zealous
					trait = genius
					trait = quick
					is_ascetic_trigger = yes
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Train
		name = EVTOPTG_CHI_184
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_train }  
			NOR = {
				trait = ambitious
				trait = diligent
				trait = administrator
			}
		}
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = dull
					trait = slow
					trait = imbecile
					trait = slothful
					trait = content
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = ambitious
					trait = diligent
					trait = administrator
					trait = shrewd
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Train
		name = EVTOPTG_CHI_184
		trigger = { 
			FROM = { has_character_flag = mission_chivalry_training_option_train }  
			OR = {
				trait = ambitious
				trait = diligent
				trait = administrator
			}
		}
		tooltip_info = martial
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					trait = dull
					trait = slow
					trait = imbecile
					trait = slothful
					trait = content
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					trait = ambitious
					trait = diligent
					trait = administrator
					trait = shrewd
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Drug
		name = EVTOPTH_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_drug } NOT = { intrigue = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { intrigue = 8 }
					trait = lunatic
					trait = possessed
					trait = slow
					trait = imbecile
					trait = temperate
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					intrigue = 12
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = mystic
					trait = physician
					trait = drunkard
					trait = hedonist
					trait = scholar
					trait = schemer
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Drug
		name = EVTOPTH_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_drug } intrigue = 15 }
		tooltip_info = intrigue
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { intrigue = 8 }
					trait = lunatic
					trait = possessed
					trait = slow
					trait = imbecile
					trait = temperate
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					intrigue = 12
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = mystic
					trait = physician
					trait = drunkard
					trait = hedonist
					trait = scholar
					trait = schemer
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Faking
		name = EVTOPTI_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_fake } NOT = { intrigue = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { intrigue = 8 }
					trait = honest
					trait = shy
					trait = just
					trait = trusting
					trait = slow
					trait = imbecile
					trait = temperate
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					intrigue = 12
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = socializer
					trait = gamer
					trait = proud
					trait = deceitful
					trait = gregarious
					trait = arbitrary
					trait = schemer
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Faking
		name = EVTOPTI_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_fake } intrigue = 15 }
		tooltip_info = intrigue
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_group }
		if = {
			limit = {
				OR = {
					NOT = { intrigue = 8 }
					trait = honest
					trait = shy
					trait = just
					trait = trusting
					trait = slow
					trait = imbecile
					trait = temperate
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					intrigue = 12
					trait = intricate_webweaver
					trait = elusive_shadow
					trait = socializer
					trait = gamer
					trait = proud
					trait = deceitful
					trait = gregarious
					trait = arbitrary
					trait = schemer
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Group
		name = EVTOPTJ_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_group } NOT = { diplomacy = 15 } }
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		if = {
			limit = {
				OR = {
					NOT = { diplomacy = 8 }
					trait = slothful
					trait = shy
					trait = craven
					trait = paranoid
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					diplomacy = 12
					trait = grey_eminence
					trait = charismatic_negotiator
					trait = socializer
					trait = gamer
					trait = diligent
					trait = gregarious
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Group
		name = EVTOPTJ_CHI_184
		trigger = { FROM = { has_character_flag = mission_chivalry_training_option_group } diplomacy = 15 }
		tooltip_info = diplomacy
		FROM = { clr_character_flag = mission_chivalry_training_option_book }
		FROM = { clr_character_flag = mission_chivalry_training_option_spare }
		FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
		FROM = { clr_character_flag = mission_chivalry_training_option_talk }
		FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
		FROM = { clr_character_flag = mission_chivalry_training_option_pray }
		FROM = { clr_character_flag = mission_chivalry_training_option_train }
		FROM = { clr_character_flag = mission_chivalry_training_option_drug }
		FROM = { clr_character_flag = mission_chivalry_training_option_fake }
		if = {
			limit = {
				OR = {
					NOT = { diplomacy = 8 }
					trait = slothful
					trait = shy
					trait = craven
					trait = paranoid
					trait = slow
					trait = imbecile
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_poor }
		}
		if = {
			limit = {
				OR = {
					diplomacy = 12
					trait = grey_eminence
					trait = charismatic_negotiator
					trait = socializer
					trait = gamer
					trait = diligent
					trait = gregarious
					trait = genius
					trait = quick
				}
			}
			FROM = { set_character_flag = mission_chivalry_training_good }
		}
		if = {
			limit = {
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 8 } }
			}
			change_society_currency = -50
		}
		FROM = { character_event = { id = CHI.185 days = 30 } }
	}
	option = { #Give up
		name = EVTOPTK_CHI_184
		change_society_currency = -200
		add_mission_fail_influence_effect = yes
		clr_character_flag = mission_chivalry_training_flag
		clr_quest = mission_chivalry_training
		hidden_tooltip = {
			FROM = { set_variable = { which = mission_chivalry_training_variable value = 0 } }
			FROM = { set_variable = { which = mission_chivalry_training_variable_round value = 0 } }
			FROM = { clr_character_flag = chivalry_being_trained }
			FROM = { clr_character_flag = mission_chivalry_training_option_book }
			FROM = { clr_character_flag = mission_chivalry_training_option_spare }
			FROM = { clr_character_flag = mission_chivalry_training_option_meditate }
			FROM = { clr_character_flag = mission_chivalry_training_option_talk }
			FROM = { clr_character_flag = mission_chivalry_training_option_waterfall }
			FROM = { clr_character_flag = mission_chivalry_training_option_pray }
			FROM = { clr_character_flag = mission_chivalry_training_option_train }
			FROM = { clr_character_flag = mission_chivalry_training_option_drug }
			FROM = { clr_character_flag = mission_chivalry_training_option_fake }
			FROM = { clr_character_flag = mission_chivalry_training_option_group }
			FROM = { clr_character_flag = mission_chivalry_training_poor }
			FROM = { clr_character_flag = mission_chivalry_training_good }
		}
		FROM = { letter_event = { id = CHI.188 } }
		ai_chance = { 
			factor = 0.01
			modifier = {
				factor = 100
				FROM = { check_variable = { which = mission_chivalry_training_variable_round value = 10 } }
			}
		}
	}
	
	after = {
		clr_character_flag = chivalry_block_currency
		# if = { #if the trainee died #obsolete
			# limit = {
				# FROM = { is_alive = no }
			# }
			# character_event = { id = CHI.1842 }
		# }
		# FROM = { character_event = { id = CHI.1841 } } #death ping
	}
}

#FG Training trainee death ping
character_event = {
	id = CHI.1841
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { character_event = { id = CHI.1842 days = 30 } } #death ping
	}
}

#FG training trainer react to trainee death
character_event = {
	id = CHI.1842
	picture = GFX_evt_shadowy_cabal

	desc = {
		text = EVTDESC_CHI_1842
		trigger = {
			is_female = yes
		}
		picture = GFX_evt_bad_news_female
	}
	desc = {
		text = EVTDESC_CHI_1842
		trigger = {
			is_female = no
		}
		picture = GFX_evt_bad_news
	}	

	is_triggered_only = yes
	
	trigger = {
		FROM = { is_alive = no }
	}
	
	option = { #i tried
		name = EVTOPTA_CHI_1842
		clr_character_flag = mission_chivalry_training_flag
		change_society_currency = 50 #half the reward
		prestige = 50 
		clr_quest = mission_chivalry_training
	}
}

#FG training trainee receive training type
character_event = {
	id = CHI.185
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_large_army
	
	is_triggered_only = yes
	
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_book
		}
		text = EVTDESC_CHI_185_BOOK
		picture = GFX_evt_library
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_spare
		}
		text = EVTDESC_CHI_185_SPARE
		picture = GFX_evt_melee
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_meditate
		}
		text = EVTDESC_CHI_185_MEDITATE
		picture = GFX_evt_garden
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_talk
		}
		text = EVTDESC_CHI_185_TALK
		picture = GFX_evt_courtiers_talking
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_waterfall
		}
		text = EVTDESC_CHI_185_WATERFALL
		picture = GFX_evt_rider_adventure
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_pray
		}
		text = EVTDESC_CHI_185_PRAY
		picture = GFX_evt_knight_kneeling
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_train
		}
		text = EVTDESC_CHI_185_TRAIN
		picture = GFX_evt_family_feud_republic
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_drug
		}
		text = EVTDESC_CHI_185_DRUG
		picture = GFX_evt_scientist
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_fake
		}
		text = EVTDESC_CHI_185_FAKE
		picture = GFX_evt_dancing
	}
	desc = {
		trigger = {
			has_character_flag = mission_chivalry_training_option_group
		}
		text = EVTDESC_CHI_185_GROUP
		picture = GFX_evt_church_council
	}
	
	immediate = {
		random = {
			chance = 30
			set_character_flag = mission_chivalry_training_guess
		}
	}
	
	option = { #Follow the advices
		name = EVTOPTA_CHI_185
		trigger = {
			has_character_flag = mission_chivalry_training_guess
			has_character_flag = mission_chivalry_training_good
		}
		tooltip_info_custom = chivalry_available_because_good_tt
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_poor
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = -1 } }
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_good
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 2 } }
			
		}
		if = {
			limit = {
				NOT = { has_character_flag = mission_chivalry_training_good }
				NOT = { has_character_flag = mission_chivalry_training_poor }
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 1 } }
		}
		trigger_switch = {
			on_trigger = has_character_flag
			mission_chivalry_training_option_book		= { random = { chance = 10 add_trait = erudite } }
			mission_chivalry_training_option_spare		= { random = { chance = 10 add_trait = brave } }
			mission_chivalry_training_option_meditate	= { random = { chance = 10 add_trait = content } }
			mission_chivalry_training_option_talk		= { random = { chance = 10 add_trait = gregarious } }
			mission_chivalry_training_option_waterfall	= { random = { chance = 10 add_trait = trusting } }
			mission_chivalry_training_option_pray		= { random = { chance = 10 add_trait = zealous } }
			mission_chivalry_training_option_train	  = { random = { chance = 10 add_trait = stubborn } }
			mission_chivalry_training_option_drug	   = { random = { chance = 10 add_trait = arbitrary } }
			mission_chivalry_training_option_fake	   = { random = { chance = 10 add_trait = deceitful } }
			mission_chivalry_training_option_group	  = { random = { chance = 10 add_trait = shy } }	
		}
	}
	
	option = { #Follow the advices
		name = EVTOPTA_CHI_185
		trigger = {
			NAND = {
				has_character_flag = mission_chivalry_training_guess
				has_character_flag = mission_chivalry_training_good
			}
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_poor
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = -1 } }
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_good
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 2 } }
			
		}
		if = {
			limit = {
				NOT = { has_character_flag = mission_chivalry_training_good }
				NOT = { has_character_flag = mission_chivalry_training_poor }
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 1 } }
		}
		trigger_switch = {
			on_trigger = has_character_flag
			mission_chivalry_training_option_book		= { random = { chance = 10 add_trait = erudite } }
			mission_chivalry_training_option_spare		= { random = { chance = 10 add_trait = brave } }
			mission_chivalry_training_option_meditate	= { random = { chance = 10 add_trait = content } }
			mission_chivalry_training_option_talk		= { random = { chance = 10 add_trait = gregarious } }
			mission_chivalry_training_option_waterfall	= { random = { chance = 10 add_trait = trusting } }
			mission_chivalry_training_option_pray		= { random = { chance = 10 add_trait = zealous } }
			mission_chivalry_training_option_train	  = { random = { chance = 10 add_trait = stubborn } }
			mission_chivalry_training_option_drug	   = { random = { chance = 10 add_trait = arbitrary } }
			mission_chivalry_training_option_fake	   = { random = { chance = 10 add_trait = deceitful } }
			mission_chivalry_training_option_group	  = { random = { chance = 10 add_trait = shy } }	
		}
	}
	
	option = { #Dont follow advices
		name = EVTOPTB_CHI_185
		trigger = {
			NAND = {
				has_character_flag = mission_chivalry_training_guess
				has_character_flag = mission_chivalry_training_poor
			}
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_poor
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 2 } }
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_good
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = -1 } }
		}
		if = {
			limit = {
				NOT = { has_character_flag = mission_chivalry_training_good }
				NOT = { has_character_flag = mission_chivalry_training_poor }
			}
			hidden_tooltip = { 
				random = {
					chance = 50
					change_variable = { which = "mission_chivalry_training_variable" value = 1 }
				}
			}
		}
	}
	
	option = { #Dont follow advices
		name = EVTOPTB_CHI_185
		trigger = {
			has_character_flag = mission_chivalry_training_guess
			has_character_flag = mission_chivalry_training_poor
		}
		# tooltip_info = yes
		tooltip_info_custom = chivalry_available_because_bad_tt
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_poor
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = 2 } }
		}
		if = {
			limit = {
				has_character_flag = mission_chivalry_training_good
			}
			hidden_tooltip = { change_variable = { which = "mission_chivalry_training_variable" value = -1 } }
		}
		if = {
			limit = {
				NOT = { has_character_flag = mission_chivalry_training_good }
				NOT = { has_character_flag = mission_chivalry_training_poor }
			}
			hidden_tooltip = { 
				random = {
					chance = 50
					change_variable = { which = "mission_chivalry_training_variable" value = 1 }
				}
			}
		}
	}
	
	option = { #Give up
		name = EVTOPTC_CHI_185
		hidden_tooltip = {
			set_variable = { which = mission_chivalry_training_variable value = 0 }
			set_variable = { which = mission_chivalry_training_variable_round value = 0 }
		}
		clr_character_flag = chivalry_being_trained
		clr_character_flag = mission_chivalry_training_option_book
		clr_character_flag = mission_chivalry_training_option_spare
		clr_character_flag = mission_chivalry_training_option_meditate
		clr_character_flag = mission_chivalry_training_option_talk
		clr_character_flag = mission_chivalry_training_option_waterfall
		clr_character_flag = mission_chivalry_training_option_pray
		clr_character_flag = mission_chivalry_training_option_train
		clr_character_flag = mission_chivalry_training_option_drug
		clr_character_flag = mission_chivalry_training_option_fake
		clr_character_flag = mission_chivalry_training_option_group
		FROM = { letter_event = { id = CHI.189 } }
		ai_chance = { 
			factor = 0.01
			modifier = {
				factor = 100
				NOT = { check_variable = { which = mission_chivalry_training_variable value = -4 } }
			}
		}
	}
	
	after = {
		hidden_tooltip = {
			if = { 
				limit = { #training done
					has_character_flag = chivalry_being_trained
					OR = {
						check_variable = { which = mission_chivalry_training_variable value = 4 }
						check_variable = { which = mission_chivalry_training_variable value = 5 }
					}
				}
				FROM = { letter_event = { id = CHI.186  days = 5 } } #trainer reward quest
			}
			if = { 
				limit = { #need more training
					has_character_flag = chivalry_being_trained
					NOT = { check_variable = { which = mission_chivalry_training_variable value = 4 } }
					NOT = { check_variable = { which = mission_chivalry_training_variable value = 5 } }
				}
				FROM = { character_event = { id = CHI.184 days = 5 } } #back to choose type
			}
			if = { 
				limit = {
					has_character_flag = chivalry_being_trained
				}
				change_variable = { which = mission_chivalry_training_variable_round value = 1 }	
			}
			clr_character_flag = mission_chivalry_training_poor
			clr_character_flag = mission_chivalry_training_good
			clr_character_flag = mission_chivalry_training_guess
			# if = { #if the trainer died #obsolete
				# limit = {
					# FROM = { is_alive = no }
				# }
				# character_event = { id = CHI.1851 }
			# }
		}
	}
}

#FG training trainee react to trainer death
character_event = {
	id = CHI.1851
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_large_army
	
	desc = {
		text = EVTDESC_CHI_1851
		trigger = {
			is_female = yes
		}
		picture = GFX_evt_bad_news_female
	}
	desc = {
		text = EVTDESC_CHI_1851
		trigger = {
			is_female = no
		}
		picture = GFX_evt_bad_news
	}	
	
	is_triggered_only = yes
	
	option = { #return to queue
		name = EVTOPTA_CHI_1851
	}
	
	option = { #give up
		name = EVTOPTB_CHI_1851
		clr_character_flag = chivalry_requested_training
	}
	
	after = { #Give up
		hidden_tooltip = {
			set_variable = { which = mission_chivalry_training_variable value = 0 }
			set_variable = { which = mission_chivalry_training_variable_round value = 0 }
		}
		clr_character_flag = chivalry_being_trained
		clr_character_flag = mission_chivalry_training_option_book
		clr_character_flag = mission_chivalry_training_option_spare
		clr_character_flag = mission_chivalry_training_option_meditate
		clr_character_flag = mission_chivalry_training_option_talk
		clr_character_flag = mission_chivalry_training_option_waterfall
		clr_character_flag = mission_chivalry_training_option_pray
		clr_character_flag = mission_chivalry_training_option_train
		clr_character_flag = mission_chivalry_training_option_drug
		clr_character_flag = mission_chivalry_training_option_fake
		clr_character_flag = mission_chivalry_training_option_group
	}
}

#FG training trainer reward
letter_event = {
	id = CHI.186
	desc = EVTDESC_CHI_186
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_186

		clr_quest = mission_chivalry_training
		clr_character_flag = mission_chivalry_training_flag
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		change_society_currency = 150
		prestige = 50
		risk_society_extra_reward = yes
		FROM = { character_event = { id = CHI.187 } } #trainee get trait
	}
}

#FG training trainee reward
character_event = {
	id = CHI.187
	picture = GFX_evt_melee
	border = GFX_event_normal_frame_war_chivalry
	desc = EVTDESC_CHI_187
	
	is_triggered_only = yes
	
	option = { #get trait
		name = EVTOPTA_CHI_187
		random_list = {
		
			10 = {
				trigger = {
					FROM = { trait = patient }
					NOT = { trait = patient }
					NOT = { trait = wroth }
				}
				add_trait = patient
			}
			10 = {
				trigger = {
					FROM = { trait = wroth }
					NOT = { trait = wroth }
					NOT = { trait = patient }
				}
				add_trait = wroth
			}
			10 = {
				trigger = {
					FROM = { NOT = { trait = craven } }
					trait = craven
				}
				remove_trait = craven
			}
			10 = {
				trigger = {
					FROM = { trait = brave }
					NOT = { trait = craven }
					NOT = { trait = brave }
				}
				add_trait = brave
			}
			10 = {
				trigger = {
					FROM = { NOT = { trait = arbitrary } }
					trait = arbitrary
				}
				remove_trait = arbitrary
			}
			10 = {
				trigger = {
					FROM = { trait = just }
					NOT = { trait = arbitrary }
					NOT = { trait = just }
				}
				add_trait = just
			}
			10 = {
				trigger = {
					FROM = { NOT = { trait = content } }
					trait = content
				}
				remove_trait = content
			}
			10 = {
				trigger = {
					FROM = { trait = ambitious } 
					NOT = { trait = content }
					NOT = { trait = ambitious }
				}
				add_trait = ambitious
			}
			10 = {
				trigger = {
					FROM = { NOT = { trait = cruel } }
					trait = cruel
				}
				remove_trait = cruel
			}
			10 = {
				trigger = {
					OR = {
						FROM = { trait = tough_soldier }
						FROM = { trait = skilled_tactician }
						FROM = { trait = brilliant_strategist }
					}
					trait = misguided_warrior
				}
				remove_trait = misguided_warrior
				add_trait = tough_soldier
			}
			10 = {
				trigger = {
					OR = {
						FROM = { trait = skilled_tactician }
						FROM = { trait = brilliant_strategist }
					}
					trait = tough_soldier
				}
				remove_trait = tough_soldier
				add_trait = skilled_tactician
			}
			10 = {
				trigger = {
					FROM = { trait = strategist }
					OR = {
						FROM = { trait = brilliant_strategist }
						FROM = { trait = master_warrior }
					}
					trait = skilled_tactician
				}
				remove_trait = skilled_tactician
				add_trait = brilliant_strategist
			}
			
			10 = { #just too messy
				chivalry_warrior_trait_upgrade = yes
			}
			# 10 = {
				# trigger = { #100% chance to get the first
					# NOR = {
						# trait = poor_warrior
						# trait = trained_warrior
						# trait = skilled_warrior
						# trait = master_warrior
					# }
				# }
				# add_trait = poor_warrior
			# }
			# 10 = {
				# trigger = { #faster training since FROM has the trait or need to wait for flags
					# trait = poor_warrior ##Wont happen if i'm not a poor warrior and if one of these 2 return true
					# OR = {
						# has_character_flag = chivalry_training_warrior_flag_one #I don't have the training flags
						# OR = {
							# FROM = { trait = trained_warrior } #he doesn't have any better warrior trait
							# FROM = { trait = skilled_warrior }
							# FROM = { trait = master_warrior }
						# }
					# }
				# }
				# add_trait = trained_warrior
				# clr_character_flag = chivalry_training_warrior_flag_one
			# }
			# 10 = {
				# trigger = { #get flag for later trained_warrior
					# trait = poor_warrior
					# NOT = { has_character_flag = chivalry_training_warrior_flag_one }
				# }
				# set_character_flag = chivalry_training_warrior_flag_one
				# custom_tooltip = { text = chivalry_training_warrior_tooltip_one }
				# character_event = { id = CHI.1771 }
			# }
			# 10 = {
				# trigger = { #skilled warrior
					# trait = trained_warrior 
					# OR = {
						# AND = {
							# has_character_flag = chivalry_training_warrior_flag_one
							# has_character_flag = chivalry_training_warrior_flag_two
						# }
						# OR = {
							# FROM = { trait = skilled_warrior }
							# FROM = { trait = master_warrior }
						# }
					# }
				# }
				# add_trait = skilled_warrior
				# clr_character_flag = chivalry_training_warrior_flag_one
				# clr_character_flag = chivalry_training_warrior_flag_two
			# }
			# 10 = {
				# trigger = {
					# trait = trained_warrior
					# NOT = { has_character_flag = chivalry_training_warrior_flag_one }
				# }
				# set_character_flag = chivalry_training_warrior_flag_one
				# custom_tooltip = { text = chivalry_training_warrior_tooltip_one }
				# character_event = { id = CHI.1771 }
			# }
			# 10 = {
				# trigger = {
					# trait = trained_warrior
					# has_character_flag = chivalry_training_warrior_flag_one
					# NOT = { has_character_flag = chivalry_training_warrior_flag_two }
				# }
				# set_character_flag = chivalry_training_warrior_flag_two
				# custom_tooltip = { text = chivalry_training_warrior_tooltip_two }
				# character_event = { id = CHI.1771 }
			# }
			# 10 = {
				# trigger = { #master warrior
					 # trait = skilled_warrior
					# OR = {
						# AND = {
							# has_character_flag = chivalry_training_warrior_flag_one
							# has_character_flag = chivalry_training_warrior_flag_two
							# has_character_flag = chivalry_training_warrior_flag_three
						# }
						# OR = {
							# FROM = { trait = duelist }
							# OR = {
								# FROM = { trait = brilliant_strategist }
								# FROM = { trait = master_warrior }
							# }
						# }
					# }
				# }
				# add_trait = master_warrior
				# clr_character_flag = chivalry_training_warrior_flag_one
				# clr_character_flag = chivalry_training_warrior_flag_two
				# clr_character_flag = chivalry_training_warrior_flag_three
			# }
			# 10 = {
				# trigger = {
					# trait = skilled_warrior
					# NOT = { has_character_flag = chivalry_training_warrior_flag_one }
				# }
				# set_character_flag = chivalry_training_warrior_flag_one
				# custom_tooltip = { text = chivalry_training_warrior_tooltip_one }
				# character_event = { id = CHI.1771 }
			# }
			# 10 = {
				# trigger = {
					# trait = skilled_warrior
					# has_character_flag = chivalry_training_warrior_flag_one
					# NOT = { has_character_flag = chivalry_training_warrior_flag_two }
				# }
				# set_character_flag = chivalry_training_warrior_flag_two
				# custom_tooltip = { text = chivalry_training_warrior_tooltip_two }
				# character_event = { id = CHI.1771 }
			# }
			# 10 = {
				# trigger = {
					# trait = skilled_warrior
					# has_character_flag = chivalry_training_warrior_flag_two
					# NOT = { has_character_flag = chivalry_training_warrior_flag_three }
				# }
				# set_character_flag = chivalry_training_warrior_flag_three
				# custom_tooltip = { text = chivalry_training_warrior_tooltip_three }
				# character_event = { id = CHI.1771 }
			# }
		}
	}
	after = {
		hidden_tooltip = {
			set_variable = { which = mission_chivalry_training_variable value = 0 }
			set_variable = { which = mission_chivalry_training_variable_round value = 0 }
		}
		clr_character_flag = chivalry_requested_training
		clr_character_flag = chivalry_being_trained
		clr_character_flag = mission_chivalry_training_option_book
		clr_character_flag = mission_chivalry_training_option_spare
		clr_character_flag = mission_chivalry_training_option_meditate
		clr_character_flag = mission_chivalry_training_option_talk
		clr_character_flag = mission_chivalry_training_option_waterfall
		clr_character_flag = mission_chivalry_training_option_pray
		clr_character_flag = mission_chivalry_training_option_train
		clr_character_flag = mission_chivalry_training_option_drug
		clr_character_flag = mission_chivalry_training_option_fake
		clr_character_flag = mission_chivalry_training_option_group
	}
}

#FG training trainer give up
letter_event = {
	id = CHI.188
	desc = EVTDESC_CHI_188
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_188
		opinion = {
			who = FROM
			modifier = opinion_chivalry_bad_teacher
			years = 1
		}
	}
}

#FG training trainee give up
letter_event = {
	id = CHI.189
	desc = EVTDESC_CHI_189
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_189
		change_society_currency = 50 #half the reward
		prestige = 50 
		opinion = {
			who = FROM
			modifier = opinion_chivalry_bad_student
			years = 1
		}
		clr_quest = mission_chivalry_training
		clr_character_flag = mission_chivalry_training_flag
	}
}


####Mission: HO Hunt heretic
character_event = {
	id = CHI.190
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { society_quest_event = { id = CHI.191 } } 
	}
}

#HO Hunt quest
society_quest_event = {
	id = CHI.191
	desc = EVTDESC_CHI_191

	is_triggered_only = yes
	
	quest_target = event_target:chivalry_hunt_target
	
	option = {
		name = ACCEPT
		ai_chance = { factor = 1 }
		
		event_target:chivalry_hunt_target = {
			set_quest_target = {
				id = mission_chivalry_hunt_heretic
				holder = ROOT
			}
		}
		if = {
			limit = { #ai skip decision
				ai = yes
			}
			event_target:chivalry_hunt_target = { 
				character_event = { id = CHI.196 days = 20 random = 10 } 
				set_character_flag = mission_was_hunted
			}
			set_character_flag = mission_chivalry_hunt_flag
		}
	}

	option = {
		name = DECLINE
		ai_chance = { factor = 0 }
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		event_target:chivalry_hunt_target = {
			clr_character_flag = chivalry_hunt_target
		}
	}
}

#HO Hunt target reaction
character_event = {
	id = CHI.192
	# desc = EVTDESC_CHI_192
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_combat_hf
	
	desc = {
		trigger = {
			FROMFROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_192
	}
	desc = {
		trigger = {
			FROMFROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_192_custom
	}
	
	is_triggered_only = yes
	
	option = { #Bribe
		name = EVTOPTA_CHI_192
		trigger = { is_ruler = yes }
		custom_tooltip = { text = chivalry_tooltip_hunt_bribe }
		FROMFROM = { character_event = { id = CHI.193 } }
		tooltip = { transfer_scaled_wealth = { to = FROMFROM value = 2 min = 50 max = 500 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 0
				NOT = { scaled_wealth = { value = 1 min = 30 max = 300 } }
			}
		}
	}
	
	option = { #Flee
		name = EVTOPTB_CHI_192
		trigger = { 
			is_ruler = no 
			NOT = {	any_spouse = { is_ruler = yes } }
			NOT = { has_character_flag = eternal_life_mystic }
			NOT = { has_character_flag = immortal_rival }
		}
		FROMFROM = { character_event = { id = CHI.1942 } }
		# FROMFROM = { #to GM
			# society = {
				# any_society_member = {
					# limit = { 
						# is_society_grandmaster = yes
					# }
					# character_event = { id = CHI.1941 }
				# }
			# }
		# }
		liege = { character_event = { id = CHI.194 } }
		add_trait = craven
		prestige = -100
		clr_character_flag = chivalry_hunt_target
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 0
				trait = brave
			}
		}
	}
	
	option = { #Accept Duel
		name = EVTOPTC_CHI_192
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		FROMFROM = { character_event = { id = CHI.195 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				trait = craven
			}
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 0.5
				trait = wounded
			}
		}
	}
	option = { #Accept Duel SKIP
		name = EVTOPTD_CHI_192
		trigger = { ai = no }
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROMFROM = { set_character_flag = chivalry_duel_death }
		chivalry_skip_duel_FROMFROM = yes
	}
}

#HO Hunt receive bribe
character_event = {
	id = CHI.193
	desc = EVTDESC_CHI_193
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_bribe_accepted
	
	is_triggered_only = yes
	
	option = { #Is bribed
		name = EVTOPTA_CHI_193
		FROM = { transfer_scaled_wealth = { to = ROOT value = 2 min = 50 max = 500 } }
		piety = -100
		clr_quest = mission_chivalry_hunt_heretic
		clr_character_flag = mission_chivalry_hunt_flag
		FROM = { clr_character_flag = chivalry_hunt_target }
		FROM = { character_event = { id = CHI.1931 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 3
				trait = cynical
			}
			modifier = {
				factor = 3
				NOT = { wealth = 0 }
			}
		}
	}
	
	option = { #Refuse and duel
		name = EVTOPTB_CHI_193
		FROM = { character_event = { id = CHI.1951 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = zealous
			}
			modifier = {
				factor = 3
				trait = just
			}
		}
	}
	
	option = { #Refuse and SKIP duel
		name = EVTOPTC_CHI_193
		trigger = { AI = no }
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		chivalry_skip_duel = yes
	}
}

#HO Hunt no duel due to bribe
character_event = {
	id = CHI.1931
	desc = EVTDESC_CHI_1931
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_bribe_accepted
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_1931
	}
}

#HO Hunt courtier fled tell liege
character_event = {
	id = CHI.194
	# desc = EVTDESC_CHI_194
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_hiding_from_pursuers

	desc = {
		trigger = {
			FROMFROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_194
	}
	desc = {
		trigger = {
			FROMFROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_194_custom
	}
	
	trigger = {
		FROM = { NOT = { has_character_flag = chivalry_no_death_warning } }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_194
	}
}

#HO Hunt courtier fled tell GM #unused
# character_event = {
	# id = CHI.1941
	# hide_window = yes 
	# is_triggered_only = yes
	# immediate = { 
		# FROMFROMFROM = { letter_event = { id = CHI.1942 } }
	# }
# }

#HO Hunt courtier fled tell hunter
character_event = {
	id = CHI.1942
	desc = EVTDESC_CHI_1942
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_hiding_from_pursuers
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_1942
		prestige = 50
		change_society_currency = 50
		# sound_effect = battle_won
		# add_mission_succeed_influence_effect = yes
		clr_quest = mission_chivalry_hunt_heretic
		clr_character_flag = mission_chivalry_hunt_flag
	}
}

#HO Hunt courtier died tell liege
character_event = {
	id = CHI.1943
	# desc = EVTDESC_CHI_1943
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_bloody_man
	
	desc = {
		trigger = {
			FROMFROM = { NOT = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_1943
	}
	desc = {
		trigger = {
			FROMFROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_1943_custom
	}
	
	trigger = {
		FROM = { NOT = { has_character_flag = chivalry_no_death_warning } }
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_1943
	}
}

#HO Hunt duel accepted (hunter reaction)
character_event = {
	id = CHI.195
	border = GFX_event_normal_frame_war_chivalry
	# picture = GFX_evt_melee_chivalry
	desc = EVTDESC_CHI_195
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team

	is_triggered_only = yes
	
	option = { #Duel Start
		name = EVTOPTC_CHI_195
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		FROM = { character_event = { id = CHI.1952 } } #to choose which one attack
	}
	option = { #Duel Skip
		name = EVTOPTD_CHI_195
		trigger = { AI = no }
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		chivalry_skip_duel = yes
	}
}

#HO Hunt duel start refused bribe (hunted reaction)
character_event = {
	id = CHI.1951
	border = GFX_event_normal_frame_war_chivalry
	# picture = GFX_evt_melee_chivalry
	desc = EVTDESC_CHI_1951

	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes
	
	option = { #Duel Start
		name = EVTOPTC_CHI_1951
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		FROM = { character_event = { id = CHI.1952 } } #to choose which one attack
	}
	
	option = { #Duel Skip
		name = EVTOPTD_CHI_1951
		trigger = { AI = no }
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		chivalry_skip_duel = yes
	}
}

#HO Hunt duel start ping
character_event = {
	id = CHI.1952
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		random_list = {
			2 = { FROM = { character_event = { id = CHI.3119 } } } #Root will attack first, ping
			2 = { FROM = { character_event = { id = CHI.311 } } }
		}
	}
}

#HO Hunt AI ping
character_event = {
	id = CHI.196
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { character_event = { id = CHI.1961 } }
	}
}

#HO Hunt AI ping
character_event = {
	id = CHI.1961
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		character_event = { id = CHI.1962 }
	}
}

#HO Hunt AI ping
character_event = {
	id = CHI.1962
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROMFROM = { character_event = { id = CHI.192 } }
	}
}


####Mission: FG Hunt bounty
character_event = {
	id = CHI.200
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { society_quest_event = { id = CHI.201 } } 
	}
}

#FG Hunt quest
society_quest_event = {
	id = CHI.201
	desc = EVTDESC_CHI_201

	is_triggered_only = yes
	
	quest_target = event_target:chivalry_hunt_target
	
	option = {
		name = ACCEPT
		ai_chance = { factor = 1 }
		
		event_target:chivalry_hunt_target = {
			set_quest_target = {
				id = mission_chivalry_hunt_bounty
				holder = ROOT
			}
		}
		if = {
			limit = { #ai skip decision
				ai = yes
			}
			event_target:chivalry_hunt_target = { 
				character_event = { id = CHI.206 days = 20 random = 10 } 
				set_character_flag = mission_was_hunted
			}
			set_character_flag = mission_chivalry_hunt_flag
		}
	}

	option = {
		name = DECLINE
		ai_chance = { factor = 0 }
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		event_target:chivalry_hunt_target = {
			clr_character_flag = chivalry_hunt_target
		}
	}
}

#FG Hunt target reaction
character_event = {
	id = CHI.202
	desc = EVTDESC_CHI_202
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_combat_hf
	
	
	is_triggered_only = yes
	
	option = { #Bribe
		name = EVTOPTA_CHI_202
		trigger = { is_ruler = yes }
		custom_tooltip = { text = chivalry_tooltip_hunt_bribe }
		FROMFROM = { character_event = { id = CHI.203 } }
		tooltip = { transfer_scaled_wealth = { to = FROM value = 2 min = 50 max = 500 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 0
				NOT = { scaled_wealth = { value = 1 min = 30 max = 300 } }
			}
		}
	}
	
	option = { #Flee
		name = EVTOPTB_CHI_202
		trigger = { 
			is_ruler = no 
			NOT = {	any_spouse = { is_ruler = yes } }
			NOT = { has_character_flag = eternal_life_mystic }
			NOT = { has_character_flag = immortal_rival }
		}
		FROMFROM = { character_event = { id = CHI.2042 } }
		# FROMFROM = { #to random member
			# society = {
				# random_society_member = {
					# limit = { 
						# NOT = { character = ROOT }
					# }
					# character_event = { id = CHI.2041 }
				# }
			# }
		# }
		liege = { character_event = { id = CHI.204 } }
		add_trait = craven
		prestige = -100
		clr_character_flag = chivalry_hunt_target
		if = {
			limit = {
				NOR = {
					any_spouse = { is_ruler = yes }
					has_character_flag = eternal_life_mystic
					has_character_flag = immortal_rival
				}
			}
			any_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					NOT = { character = liege }
				}
				save_event_target_as = new_court
			}
			move_character = event_target:new_court
			any_spouse = {
				# limit = {
					# liege = { character = FROM }
				# }
				move_character = event_target:new_court
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 0
				trait = brave
			}
		}
	}
	
	option = { #Accept Duel
		name = EVTOPTC_CHI_202
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		FROMFROM = { character_event = { id = CHI.205 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				trait = craven
			}
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 0.5
				trait = wounded
			}
		}
	}
	
	option = { #Accept Duel SKIP
		name = EVTOPTD_CHI_202
		trigger = { ai = no }
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROMFROM = { set_character_flag = chivalry_duel_death }
		chivalry_skip_duel_FROMFROM = yes
	}
}

#FG Hunt receive bribe
character_event = {
	id = CHI.203
	desc = EVTDESC_CHI_203
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_bribe_accepted
	
	is_triggered_only = yes
	
	option = { #Is bribed
		name = EVTOPTA_CHI_203
		FROM = { transfer_scaled_wealth = { to = ROOT value = 2 min = 50 max = 500 } }
		prestige = -100
		if = {
			limit = {
				has_quest = mission_chivalry_hunt_bounty
			}
			clr_quest = mission_chivalry_hunt_bounty
		}
		clr_character_flag = mission_chivalry_hunt_flag
		FROM = { clr_character_flag = chivalry_hunt_target }
		FROM = { character_event = { id = CHI.2031 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 3
				NOT = { wealth = 0 }
			}
		}
	}
	
	option = { #Refuse and duel
		name = EVTOPTB_CHI_203
		FROM = { character_event = { id = CHI.2051 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 3
				trait = just
			}
		}
	}
	
	option = { #Refuse and SKIP duel
		name = EVTOPTC_CHI_203
		trigger = { AI = no }
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		chivalry_skip_duel = yes
	}
}

#FG Hunt no duel due to bribe
character_event = {
	id = CHI.2031
	desc = EVTDESC_CHI_2031
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_bribe_accepted
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_2031
	}
}

#FG Hunt courtier fled tell liege
character_event = {
	id = CHI.204
	desc = EVTDESC_CHI_204
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_hiding_from_pursuers
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { NOT = { has_character_flag = chivalry_no_death_warning } }
	}
	
	option = {
		name = EVTOPTA_CHI_204
	}
}

#FG Hunt courtier fled tell random member #unused
# character_event = {
	# id = CHI.2041
	# hide_window = yes 
	# is_triggered_only = yes
	# immediate = { 
		# FROMFROMFROM = { letter_event = { id = CHI.2042 } }
	# }
# }

#FG Hunt courtier fled tell hunter
character_event = {
	id = CHI.2042
	desc = EVTDESC_CHI_2042
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_hiding_from_pursuers
	
	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_2042
		if = {
			limit = { 
				has_quest = mission_chivalry_hunt_bounty
			}
			prestige = 50
			change_society_currency = 50
			wealth = 25
		}
		# sound_effect = battle_won
		# add_mission_succeed_influence_effect = yes
		clr_quest = mission_chivalry_hunt_bounty
		clr_character_flag = mission_chivalry_hunt_flag
	}
}

#FG Hunt courtier died tell liege
character_event = {
	id = CHI.2043
	desc = EVTDESC_CHI_2043
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_bloody_man
	
	is_triggered_only = yes
	
	trigger = {
		FROM = { NOT = { has_character_flag = chivalry_no_death_warning } }
	}
	
	option = {
		name = EVTOPTA_CHI_2043
	}
}

#FG Hunt duel accepted (hunter reaction)
character_event = {
	id = CHI.205
	desc = EVTDESC_CHI_205
	border = GFX_event_normal_frame_war_chivalry
	# picture = GFX_evt_death_hashshashin
	
	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team

	is_triggered_only = yes
	
	option = { #Duel Start
		name = EVTOPTA_CHI_205
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		FROM = { character_event = { id = CHI.2052 } } #to choose which one attack
	}
	option = { #Duel Skip
		name = EVTOPTB_CHI_205
		trigger = { AI = no }
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		chivalry_skip_duel = yes
	}
}

#FG Hunt duel start refused bribe (hunted reaction)
character_event = {
	id = CHI.2051
	desc = EVTDESC_CHI_2051
	border = GFX_event_normal_frame_war_chivalry
	# picture = GFX_evt_death_hashshashin

	picture = {
		trigger = { # Nomad/rep/theo vs Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			AND = {
				is_feudal = no
				is_tribal = no
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_scene"
	}
	picture = {
		trigger = { # Feudal VS Tribal
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			OR = {
				AND = {
					FROM = { is_feudal = yes }
					OR = {
						is_tribal = yes
						is_nomadic = yes
						is_republic = yes
					}	
				}
				AND = {
					FROM = { is_tribal = yes }
					is_feudal = yes
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_melee_chivalry"
	}
	picture = { # Priest/Feudal VS Priest/Feudal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				OR = {
					is_feudal = yes
					AND = {
						is_theocracy = yes
						NOT = { religion_group = pagan_group }
					}
				}
			}
			OR = {
				is_feudal = yes
				AND = {
					is_theocracy = yes
					NOT = { religion_group = pagan_group }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_dueling_knights_hf"
	}
	picture = { # VS Tribal
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { is_republic = no }
			FROM = { is_theocracy = no }
			FROM = { is_tribal = yes }
			is_tribal = yes
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_duel_team"
	}
	picture = { # VS Nomad
		trigger = {
			FROM = { is_nomadic = yes }
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_eagle_warriors"
	}
	picture = {  # VS Republic
		trigger = {
			OR = {
				FROM = { is_republic = yes }
				AND = {
					is_republic = yes
					FROM = { is_theocracy = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		picture = "GFX_evt_family_feud_republic"
	}
	picture = { # VS Shaman
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { 
				is_theocracy = yes
				OR = {
					religion_group = pagan_group
					ROOT = { is_tribal = yes }
					ROOT = { is_nomadic = yes }
				}
			}
			FROM = { NOT = { religion_group = muslim } }
			FROM = { NOT = { religion_group = indian_group } }
			FROM = { NOT = { religion_group = zoroastrian_group } }
		}
		
		picture = "GFX_evt_shaman"
	}
	picture = { # VS Muslim Zoro
		trigger = {
			FROM = { is_nomadic = no }
			OR = {
				FROM = { religion_group = muslim }
				FROM = { religion_group = zoroastrian_group }
			}
		}
		picture = "GFX_evt_death_hashshashin"
	}
	picture = { # VS india
		trigger = {
			FROM = { is_nomadic = no }
			FROM = { religion_group = indian_group }
		}
		picture = "GFX_evt_cathedral_indian_group"
	}
	#picture = GFX_evt_duel_team
	
	is_triggered_only = yes
	
	option = { #Duel Start
		name = EVTOPTA_CHI_2051
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		FROM = { character_event = { id = CHI.2052 } } #to choose which one attack
	}
	option = { #Duel Skip
		name = EVTOPTB_CHI_2051
		trigger = { AI = no }
		custom_tooltip = { text = chivalry_tooltip_hunt_duel }
		set_character_flag = chivalry_duel_death
		FROM = { set_character_flag = chivalry_duel_death }
		chivalry_skip_duel = yes
	}
}

#FG Hunt duel start ping
character_event = {
	id = CHI.2052
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		random_list = {
			2 = { FROM = { character_event = { id = CHI.3119 } } } #Root will attack first, ping
			2 = { FROM = { character_event = { id = CHI.311 } } }
		}
	}
}

#FG Hunt AI ping from
character_event = {
	id = CHI.206
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		if = {
			limit = {
				has_character_flag = chivalry_hunt_bounty
			}
			FROM = { character_event = { id = CHI.2061 } }
		}
		else = {
			FROM = {
				if = {
					limit = {
						has_quest = mission_chivalry_hunt_bounty
					}
					clr_quest = mission_chivalry_hunt_bounty
				}
			}
		}
	}
}

#FG Hunt AI ping self
character_event = {
	id = CHI.2061
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		character_event = { id = CHI.2062 }
	}
}

#FG Hunt AI ping fromfrom
character_event = {
	id = CHI.2062
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROMFROM = { character_event = { id = CHI.202 } }
	}
}

#FG Hunt clear bounty client
character_event = {
	id = CHI.207
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		remove_opinion = {
			who = event_target:target_bounty
			modifier = opinion_chivalry_bounty
		}
		# remove_opinion = {
			# who = ROOT
			# modifier = opinion_chivalry_bounty
		# }
		event_target:target_bounty = {
			remove_opinion = {
				who = ROOT
				modifier = opinion_chivalry_client
			}
		}
		# event_target:target_bounty = {
			# remove_opinion = {
				# who = event_target:target_bounty
				# modifier = opinion_chivalry_bounty
			# }
		# }
		
		event_target:target_bounty = { clr_character_flag = chivalry_hunt_bounty }
	}
}

#FG Hunt clear bounty hunted
character_event = {
	id = CHI.2071
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		remove_opinion = {
			who = event_target:target_client
			modifier = opinion_chivalry_client
		}
		# remove_opinion = {
			# who = ROOT
			# modifier = opinion_chivalry_bounty
		# }
		event_target:target_client = {
			remove_opinion = {
				who = ROOT
				modifier = opinion_chivalry_bounty
			}
			character_event = { id = CHI.2072 days = 200 random = 100 }
		}
		# event_target:target_bounty = {
			# remove_opinion = {
				# who = event_target:target_bounty
				# modifier = opinion_chivalry_bounty
			# }
		# }
	}
}

#FG Hunt clear bounty client noticed
character_event = {
	id = CHI.2072
	desc = EVTDESC_CHI_2072
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_stressed_ruler

	is_triggered_only = yes
	
	option = { #damn
		name = EVTOPTC_CHI_2072
	}

}

#FG Hunt bounty deaded
character_event = {
	id = CHI.208
	desc = EVTDESC_CHI_208
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_powerful_ruler

	is_triggered_only = yes
	
	option = { #Neat
		name = EVTOPTA_CHI_208
	}
	
	after = {
		hidden_tooltip = {
			remove_opinion = {
				who = FROM
				modifier = opinion_chivalry_bounty
			}
		}
	}
}

#FG Hunt decision bounty board
character_event = {
	id = CHI.209
	# desc = EVTDESC_CHI_209
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_china_diplomatic_success

	is_triggered_only = yes
	
	desc = {
		trigger = {
			has_character_flag = chivalry_bounty_available
		}
		text = EVTDESC_CHI_209_OK
	}
	
	desc = {
		trigger = {
			NOT = { has_character_flag = chivalry_bounty_available }
		}
		text = EVTDESC_CHI_209_NONE
	}
	
	hide_from = yes
	
	immediate = {
		top_liege = { #pick bounty 1
			random_realm_character = {
				limit = { 
					chivalry_valid_target = yes
					OR = { #time out of 2 years
						NOT = { has_character_flag = mission_was_hunted }
						had_character_flag = { flag = mission_was_hunted days = 720 }
					}
					NOR = { #leave those to HO
						has_character_modifier = known_satanist
						has_character_modifier = known_secret_society_member
						has_character_modifier = known_witch
					}
					is_quest_target = no
					has_character_flag = chivalry_hunt_bounty
					is_fighter_societies_trigger = no
					NOT = { same_society_as = ROOT }
					NOT = { has_character_flag = witch_nanny } #spare spacial npc
					NOT = { has_character_flag = special_marshal } #spare spacial npc
				}
				save_event_target_as = chivalry_hunt_target_one
				ROOT = { set_character_flag = chivalry_bounty_available }
				# set_character_flag = chivalry_hunt_target
			}
		}
		top_liege = { #pick bounty 2
			random_realm_character = {
				limit = { 
					NOT = { character = event_target:chivalry_hunt_target_one }
					chivalry_valid_target = yes
					OR = { #time out of 2 years
						NOT = { has_character_flag = mission_was_hunted }
						had_character_flag = { flag = mission_was_hunted days = 720 }
					}
					NOR = { #leave those to HO
						has_character_modifier = known_satanist
						has_character_modifier = known_secret_society_member
						has_character_modifier = known_witch
					}
					NOT = { has_character_flag = witch_nanny } #spare spacial npc
					NOT = { has_character_flag = special_marshal } #spare spacial npc
					is_quest_target = no
					has_character_flag = chivalry_hunt_bounty
					is_fighter_societies_trigger = no
					NOT = { same_society_as = ROOT }
				}
				save_event_target_as = chivalry_hunt_target_two
				# set_character_flag = chivalry_hunt_target
			}
		}
		top_liege = { #pick bounty 3
			random_realm_character = {
				limit = { 
					NOT = { character = event_target:chivalry_hunt_target_one }
					NOT = { character = event_target:chivalry_hunt_target_two }
					chivalry_valid_target = yes
					OR = { #time out of 2 years
						NOT = { has_character_flag = mission_was_hunted }
						had_character_flag = { flag = mission_was_hunted days = 720 }
					}
					NOR = { #leave those to HO
						has_character_modifier = known_satanist
						has_character_modifier = known_secret_society_member
						has_character_modifier = known_witch
					}
					NOT = { has_character_flag = witch_nanny } #spare spacial npc
					NOT = { has_character_flag = special_marshal } #spare spacial npc
					is_quest_target = no
					has_character_flag = chivalry_hunt_bounty
					is_fighter_societies_trigger = no
					NOT = { same_society_as = ROOT }
				}
				save_event_target_as = chivalry_hunt_target_three
				# set_character_flag = chivalry_hunt_target
			}
		}
	}
	
	option = { #target 1
		name = EVTOPTA_CHI_209
		trigger = { 
			event_target:chivalry_hunt_target_one = {
				is_alive = yes
			}
		}
		set_character_flag = mission_chivalry_hunt_flag
		event_target:chivalry_hunt_target_one = {
			save_event_target_as = chivalry_hunt_target
			set_character_flag = chivalry_hunt_target
			set_character_flag = mission_was_hunted
			character_event = { id = CHI.202 }
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				combat_rating_diff = {
					character = event_target:chivalry_hunt_target_one
					value < 20
				}
			}
		}
	}
	option = { #target 2
		name = EVTOPTB_CHI_209
		trigger = { 
			event_target:chivalry_hunt_target_two = {
				is_alive = yes
			}
		}
		set_character_flag = mission_chivalry_hunt_flag
		event_target:chivalry_hunt_target_two = {
			save_event_target_as = chivalry_hunt_target
			set_character_flag = chivalry_hunt_target
			set_character_flag = mission_was_hunted
			character_event = { id = CHI.202 }
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				combat_rating_diff = {
					character = event_target:chivalry_hunt_target_two
					value < 20
				}
			}
		}
	}
	option = { #target 3
		name = EVTOPTC_CHI_209
		trigger = { 
			event_target:chivalry_hunt_target_three = {
				is_alive = yes
			}
		}
		set_character_flag = mission_chivalry_hunt_flag
		event_target:chivalry_hunt_target_three = {
			save_event_target_as = chivalry_hunt_target
			set_character_flag = chivalry_hunt_target
			set_character_flag = mission_was_hunted
			character_event = { id = CHI.202 }
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				combat_rating_diff = {
					character = event_target:chivalry_hunt_target_three
					value < 20
				}
			}
		}
	}
	option = { #none
		name = EVTOPTD_CHI_209
	}
	after = {
		clr_character_flag = chivalry_duel_ongoing
		clr_character_flag = chivalry_bounty_available
	}
}

####Mission: HO/FG Win Battle
character_event = {
	id = CHI.210
	hide_window = yes 
	is_triggered_only = yes
	immediate = { 
		FROM = { society_quest_event = { id = CHI.211 } } 
	}
}

#HO/FG Win Battle quest
society_quest_event = {
	id = CHI.211
	
	desc = {
		trigger = {
			is_holyorder_societies_trigger = yes
		}
		text = EVTDESC_CHI_211_HOLY
	}
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
		}
		text = EVTDESC_CHI_211_FIGHT
	}

	is_triggered_only = yes
	
	option = {
		name = ACCEPT
		ai_chance = { factor = 1 }
		
		set_quest = mission_chivalry_win_battle
	}

	option = {
		name = DECLINE
		ai_chance = { factor = 0 }
		custom_tooltip = { text = decline_quest_tooltip }
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
	}
}

#HO/FG Win Battle won PING
character_event = {
	id = CHI.212
	hide_window = yes 
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		has_quest = mission_chivalry_win_battle
	}
	
	immediate = { 
		character_event = { id = CHI.2121 days = 1 }
	}
}

#HO/FG Win Battle won HOLY
character_event = {
	id = CHI.2120
	hide_window = yes 
	is_triggered_only = yes
	
	only_playable = yes
	
	trigger = {
		has_quest = mission_chivalry_win_battle
		is_holyorder_societies_trigger = yes
		FROM = { NOT = { religion = ROOT } }
		in_command = yes
	}
	
	immediate = { 
		set_character_flag = chivalry_won_holy_battle
	}
}

#HO/FG Win Battle won
character_event = {
	id = CHI.2121
	hide_window = yes 
	is_triggered_only = yes
	
	trigger = {
		OR = {
			AND = {
				has_character_flag = chivalry_won_holy_battle
				is_holyorder_societies_trigger = yes
			}
			is_fighter_societies_trigger = yes
		}
	}
	
	immediate = { 
		if = {
			limit = {
				is_holyorder_societies_trigger = yes
			}
			society = {
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						is_society_grandmaster = yes
					}
					character_event = { id = CHI.213 }
				}
			}
		}
		if = {
			limit = {
				is_fighter_societies_trigger = yes
			}
			society = {
				random_society_member = {
					limit = { 	
						NOT = { character = ROOT }
						is_society_grandmaster = no
						prisoner = no
					}
					character_event = { id = CHI.213 }
				}
			}
		}
	}
}

#HO/FG Win Battle won PING
character_event = {
	id = CHI.213
	hide_window = yes 
	is_triggered_only = yes
	
	immediate = { 
		FROM = { character_event = { id = CHI.214 } }
	}
}

#HO/FG Win Battle completion
letter_event = {
	id = CHI.214
	border = GFX_event_letter_frame_war_chivalry
	
	desc = {
		trigger = {
			is_holyorder_societies_trigger = yes
		}
		text = EVTDESC_CHI_214_HOLY
	}
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
		}
		text = EVTDESC_CHI_214_FIGHT
	}

	is_triggered_only = yes

	option = { #Quest will success, HOLY
		name = EVTOPTA_CHI_214
		trigger = { is_holyorder_societies_trigger = yes }
		clr_quest = mission_chivalry_win_battle
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		chivalry_warrior_trait_upgrade = yes
		change_society_currency = 200
		piety = 50
		clr_character_flag = chivalry_won_holy_battle
	}
	option = { #Quest will success, FIGHT
		name = EVTOPTB_CHI_214
		trigger = { is_fighter_societies_trigger = yes }
		clr_quest = mission_chivalry_win_battle
		sound_effect = battle_won
		add_mission_succeed_influence_effect = yes
		chivalry_warrior_trait_upgrade = yes
		change_society_currency = 200
		prestige = 50
		risk_society_extra_reward = yes
	}
}

########Squire education
character_event = {
	id = CHI.300
	picture = GFX_evt_child_sword
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			NOR = {
				trait = chivalry_squire_one
				trait = chivalry_squire_two
				trait = chivalry_squire_three
				trait = chivalry_squire_four
			}
		}
		text = EVTDESC_CHI_300_1
	}
	
	desc = {
		trigger = {
			trait = chivalry_squire_one
		}
		text = EVTDESC_CHI_300_2
	}
	
	desc = {
		trigger = {
			trait = chivalry_squire_two
		}
		text = EVTDESC_CHI_300_3
	}
	
	desc = {
		trigger = {
			trait = chivalry_squire_three
		}
		text = EVTDESC_CHI_300_4
	}
	
	trigger = {
		NOT = { trait = chivalry_squire_four }
		OR = {
			has_minor_title = title_chivalry_ladywaiting
			has_minor_title = title_chivalry_squire
		}
	}
	
	is_triggered_only = yes
	
	option = { #Receive trait 1
		name = EVTOPTA_CHI_300
		trigger = {
			NOR = {
				trait = chivalry_squire_one
				trait = chivalry_squire_two
				trait = chivalry_squire_three
				trait = chivalry_squire_four
			}
		}
		add_trait = chivalry_squire_one
		liege = { character_event = { id = CHI.301 } }
		FROM = { character_event = { id = CHI.300 days = 730 } }
	}
	option = { #Receive trait 2
		name = EVTOPTB_CHI_300
		trigger = {
			trait = chivalry_squire_one
		}
		add_trait = chivalry_squire_two
		liege = { character_event = { id = CHI.301 } }
		FROM = { character_event = { id = CHI.300 days = 730 } }
	}
	option = { #Receive trait 3
		name = EVTOPTC_CHI_300
		trigger = {
			trait = chivalry_squire_two
		}
		add_trait = chivalry_squire_three
		liege = { character_event = { id = CHI.301 } }
		FROM = { character_event = { id = CHI.300 days = 730 } }
	}
	option = { #Receive trait 4
		name = EVTOPTD_CHI_300
		trigger = {
			trait = chivalry_squire_three
			# is_female = no
		}
		add_trait = chivalry_squire_four
		liege = { character_event = { id = CHI.301 } }
	}
	# option = { #Receive trait 4 female
		# name = EVTOPTE_CHI_300
		# trigger = {
			# trait = chivalry_squire_three
			# is_female = yes
		# }
		# add_trait = chivalry_lady_four
		# liege = { character_event = { id = CHI.301 } }
	# }
	after = {
		hidden_tooltip = {
			if = {
				limit = {
					OR = {
						age = 16
						is_abroad = yes
						AND = {
							liege = { NOT = { is_holyorder_societies_trigger = yes } }
							liege = { NOT = { is_fighter_societies_trigger = yes } }
						}
					}
				}
				ROOT = { remove_title = title_chivalry_squire }
			}
		}
	}
}

#Squire trait upgrade notification
character_event = {
	id = CHI.301
	desc = EVTDESC_CHI_301
	picture = GFX_evt_child_sword
	
	notification = yes
	
	is_triggered_only = yes
	# hide_from = yes
	
	option = {
		name = OK 
	}
}


#######FG Rank up duels CHI.310

##########FG Hire Fighter
character_event = {
	id = CHI.330
	desc = EVTDESC_CHI_330
	picture = GFX_evt_large_army
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			70 = {
				modifier = {
					factor = 0
					society_member_of = society_female_fighter_guild
				}
				chivalry_create_fighter = yes
			}
			30 = {
				chivalry_create_amazon = yes
			}
		}
		event_target:chivalry_event_commander = {
			join_root_chivalry_order_society = yes
			if = {
				limit = {
					society_can_rank_up = yes
				}
				random = {
					chance = 33
					society_rank_up = 1	
				}
			}
			if = {
				limit = {
					society_can_rank_up = yes
					society_rank == 2
				}
				random = {
					chance = 33
					society_rank_up = 1	
				}
			}
		}
	}

	
	option = {
		name = EVTOPTA_CHI_330 
		event_target:chivalry_event_commander = {
			opinion = {
				modifier = opinion_bound_honor
				who = ROOT
				years = 5
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 2 } }
						OR = {
							tier = COUNT
							AND = {
								tier = KING
								is_nomadic = yes
							}
						}
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 4 } }
						OR = {
							tier = DUKE
							AND = {
								tier = EMPEROR
								is_nomadic = yes
							}
						}
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 6 } }
						tier = KING
						is_nomadic = no
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 8 } }
						tier = EMPEROR
						is_nomadic = no
					}
				}
			}
			event_target:chivalry_event_commander = {
				give_minor_title = title_commander
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHI_330
		
		trigger = {
			OR = {
				AND = {
					has_assigned_minor_title = { title = title_commander count = 2 } 
					OR = {
						tier = COUNT
						AND = {
							tier = KING
							is_nomadic = yes
						}
					}
				}
				AND = {
					has_assigned_minor_title = { title = title_commander count = 4 } 
					OR = {
						tier = DUKE
						AND = {
							tier = EMPEROR
							is_nomadic = yes
						}
					}
				}
				AND = {
					has_assigned_minor_title = { title = title_commander count = 6 } 
					tier = KING
					is_nomadic = no
				}
				AND = {
					has_assigned_minor_title = { title = title_commander count = 8 } 
					tier = EMPEROR
					is_nomadic = no
				}
			}
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_commander
				NOT = {
					chivalry_leader_trait = yes
				}
			}
		}
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_minor_title = title_commander
				NOT = {
					chivalry_leader_trait = yes
				}
			}
			remove_title = title_commander
			opinion = {
				modifier = insulted
				who = ROOT
				years = 2
			}
		}
		
		event_target:chivalry_event_commander = {
			give_minor_title = title_commander
			opinion = {
				modifier = opinion_bound_honor
				who = ROOT
				years = 5
			}
		}
	}
}

#HO Hire Crusader
character_event = {
	id = CHI.331
	desc = EVTDESC_CHI_331
	picture = GFX_evt_large_army
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			NOT = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_331
	}
	desc = {
		trigger = {
			society_member_of = society_holy_one
		}
		text = EVTDESC_CHI_331_custom
	}
	
	is_triggered_only = yes
	
	immediate = {
		chivalry_create_knights = yes
		event_target:chivalry_event_commander = {
			join_root_chivalry_order_society = yes
			if = {
				limit = {
					society_can_rank_up = yes
				}
				random = {
					chance = 33
					society_rank_up = 1	
				}
			}
			if = {
				limit = {
					society_can_rank_up = yes
					society_rank == 2
				}
				random = {
					chance = 33
					society_rank_up = 1	
				}
			}
		}
	}

	
	option = {
		name = EVTOPTA_CHI_331 
		event_target:chivalry_event_commander = {
			opinion = {
				modifier = opinion_bound_honor
				who = ROOT
				years = 5
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 2 } }
						OR = {
							tier = COUNT
							AND = {
								tier = KING
								is_nomadic = yes
							}
						}
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 4 } }
						OR = {
							tier = DUKE
							AND = {
								tier = EMPEROR
								is_nomadic = yes
							}
						}
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 6 } }
						tier = KING
						is_nomadic = no
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 8 } }
						tier = EMPEROR
						is_nomadic = no
					}
				}
			}
			event_target:chivalry_event_commander = {
				give_minor_title = title_commander
			}
		}
	}
	
	option = {
		name = EVTOPTB_CHI_331
		trigger = {
			OR = {
				AND = {
					has_assigned_minor_title = { title = title_commander count = 2 } 
					OR = {
						tier = COUNT
						AND = {
							tier = KING
							is_nomadic = yes
						}
					}
				}
				AND = {
					has_assigned_minor_title = { title = title_commander count = 4 } 
					OR = {
						tier = DUKE
						AND = {
							tier = EMPEROR
							is_nomadic = yes
						}
					}
				}
				AND = {
					has_assigned_minor_title = { title = title_commander count = 6 } 
					tier = KING
					is_nomadic = no
				}
				AND = {
					has_assigned_minor_title = { title = title_commander count = 8 } 
					tier = EMPEROR
					is_nomadic = no
				}
			}
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				has_minor_title = title_commander
				NOT = {
					chivalry_leader_trait = yes
				}
			}
		}
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_minor_title = title_commander
				NOT = {
					chivalry_leader_trait = yes
				}
			}
			remove_title = title_commander
			opinion = {
				modifier = insulted
				who = ROOT
				years = 2
			}
		}
		
		event_target:chivalry_event_commander = {
			give_minor_title = title_commander
			opinion = {
				modifier = opinion_bound_honor
				who = ROOT
				years = 5
			}
		}
	}
}

#FG Warrior Pilgrim start
character_event = {
	id = CHI.332
	desc = EVTDESC_CHI_332
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_332
		character_event = { id = CHI.3321 days = 400 random = 100 }
	}
	after = {
		hidden_tooltip = {
			random_list = {
				5 = { character_event = { id = CHI.334 days = 120 random = 30 } } #Bandit
				5 = { character_event = { id = CHI.335 days = 120 random = 30 } } #Inn rent
				5 = { character_event = { id = CHI.336 days = 120 random = 30 } } #Old mentor
				5 = { character_event = { id = CHI.337 days = 120 random = 30 } } #Ronin duel
				5 = { character_event = { id = CHI.338 days = 120 random = 30 } } #Ruins
				5 = { character_event = { id = CHI.339 days = 120 random = 30 } } #Hunt
			}
		}
	}
}

#FG Warrior Pilgrim end
character_event = { 
	id = CHI.3321
	desc = EVTDESC_CHI_3321
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_3321
		remove_trait = chivalry_warrior_pilgrim
		random_list = {
			5 = {
				trigger = {
					trait = light_foot_leader 
				}
				remove_trait = light_foot_leader 
				add_trait = chivalry_fight_light_foot_leader 
			}
			5 = {
				trigger = {
					trait = heavy_infantry_leader 
				}
				remove_trait = heavy_infantry_leader
				add_trait = chivalry_fight_heavy_infantry_leader
			}
			5 = {
				trigger = {
					trait = cavalry_leader
				}
				remove_trait = cavalry_leader
				add_trait = chivalry_fight_cavalry_leader
			}
			5 = {
				trigger = {
					trait = inspiring_leader
				}
				remove_trait = inspiring_leader
				add_trait = chivalry_fight_inspiring_leader
			}
			5 = {
				trigger = {
					trait = trickster
				}
				remove_trait = trickster
				add_trait = chivalry_fight_trickster
			}
			5 = {
				trigger = {
					trait = organizer
				}
				remove_trait = organizer
				add_trait = chivalry_fight_organizer
			}
			5 = {
				trigger = {
					trait = defensive_leader
				}
				remove_trait = defensive_leader
				add_trait = chivalry_fight_defensive_leader
			}
			5 = {
				trigger = {
					trait = experimenter
				}
				remove_trait = experimenter
				add_trait = chivalry_fight_experimenter
			}
			5 = {
				trigger = {
					trait = flanker 
				}
				remove_trait = flanker
				add_trait = chivalry_fight_flanker
			}
			5 = {
				trigger = {
					trait = aggressive_leader
				}
				remove_trait = aggressive_leader
				add_trait = chivalry_fight_aggressive_leader
			}
			5 = {
				trigger = {
					trait = siege_leader
				}
				remove_trait = siege_leader
				add_trait = chivalry_fight_siege_leader
			}
			5 = {
				trigger = {
					trait = holy_warrior
				}
				remove_trait = holy_warrior
				add_trait = chivalry_fight_holy_warrior
			}
			5 = {
				trigger = {
					trait = unyielding_leader
				}
				remove_trait = unyielding_leader
				add_trait = chivalry_fight_unyielding_leader
			}
			5 = {
				trigger = {
					trait = narrow_flank_leader
				}
				remove_trait = narrow_flank_leader
				add_trait = chivalry_fight_narrow_flank_leader
			}
			5 = {
				trigger = {
					trait = war_elephant_leader
				}
				remove_trait = war_elephant_leader
				add_trait = chivalry_fight_war_elephant_leader
			}
			5 = {
				trigger = {
					trait = flat_terrain_leader
				}
				remove_trait = flat_terrain_leader
				add_trait = chivalry_flat_terrain_leader
			}
			5 = {
				trigger = {
					trait = rough_terrain_leader
				}
				remove_trait = rough_terrain_leader
				add_trait = chivalry_rough_terrain_leader
			}
			5 = {
				trigger = {
					trait = mountain_terrain_leader
				}
				remove_trait = mountain_terrain_leader
				add_trait = chivalry_mountain_terrain_leader
			}
			5 = {
				trigger = {
					trait = desert_terrain_leader
				}
				remove_trait = desert_terrain_leader
				add_trait = chivalry_desert_terrain_leader
			}
			5 = {
				trigger = {
					trait = jungle_terrain_leader
				}
				remove_trait = jungle_terrain_leader
				add_trait = chivalry_jungle_terrain_leader
			}
			5 = {
				trigger = {
					trait = winter_soldier
				}
				remove_trait = winter_soldier
				add_trait = chivalry_winter_soldier
			}  
		}
	}
}

#HO Warrior Pilgrim start
character_event = {
	id = CHI.333
	desc = EVTDESC_CHI_333
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_333
		character_event = { id = CHI.3331 days = 400 random = 100 }
	}
	after = {
		hidden_tooltip = {
			random_list = {
				5 = { character_event = { id = CHI.334 days = 120 random = 30 } } #Bandit
				5 = { character_event = { id = CHI.335 days = 120 random = 30 } } #Inn rent
				5 = { character_event = { id = CHI.336 days = 120 random = 30 } } #Old mentor
				5 = { character_event = { id = CHI.337 days = 120 random = 30 } } #Ronin duel
				5 = { character_event = { id = CHI.338 days = 120 random = 30 } } #Ruins
				5 = { character_event = { id = CHI.339 days = 120 random = 30 } } #Hunt
			}
		}
	}
}

#HO Warrior Pilgrim end
character_event = {
	id = CHI.3331
	desc = EVTDESC_CHI_3331
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_3331
		remove_trait = chivalry_warrior_pilgrim
		random_list = {
			5 = {
				trigger = {
					trait = light_foot_leader 
				}
				remove_trait = light_foot_leader 
				add_trait = chivalry_holy_light_foot_leader 
			}
			5 = {
				trigger = {
					trait = heavy_infantry_leader 
				}
				remove_trait = heavy_infantry_leader
				add_trait = chivalry_holy_heavy_infantry_leader
			}
			5 = {
				trigger = {
					trait = cavalry_leader
				}
				remove_trait = cavalry_leader
				add_trait = chivalry_holy_cavalry_leader
			}
			5 = {
				trigger = {
					trait = inspiring_leader
				}
				remove_trait = inspiring_leader
				add_trait = chivalry_holy_inspiring_leader
			}
			5 = {
				trigger = {
					trait = trickster
				}
				remove_trait = trickster
				add_trait = chivalry_holy_trickster
			}
			5 = {
				trigger = {
					trait = organizer
				}
				remove_trait = organizer
				add_trait = chivalry_holy_organizer
			}
			5 = {
				trigger = {
					trait = defensive_leader
				}
				remove_trait = defensive_leader
				add_trait = chivalry_holy_defensive_leader
			}
			5 = {
				trigger = {
					trait = experimenter
				}
				remove_trait = experimenter
				add_trait = chivalry_holy_experimenter
			}
			5 = {
				trigger = {
					trait = flanker 
				}
				remove_trait = flanker
				add_trait = chivalry_holy_flanker
			}
			5 = {
				trigger = {
					trait = aggressive_leader
				}
				remove_trait = aggressive_leader
				add_trait = chivalry_holy_aggressive_leader
			}
			5 = {
				trigger = {
					trait = siege_leader
				}
				remove_trait = siege_leader
				add_trait = chivalry_holy_siege_leader
			}
			5 = {
				trigger = {
					trait = holy_warrior
				}
				remove_trait = holy_warrior
				add_trait = chivalry_fight_holy_warrior
			}
			5 = {
				trigger = {
					trait = unyielding_leader
				}
				remove_trait = unyielding_leader
				add_trait = chivalry_holy_unyielding_leader
			}
			5 = {
				trigger = {
					trait = narrow_flank_leader
				}
				remove_trait = narrow_flank_leader
				add_trait = chivalry_holy_narrow_flank_leader
			}
			5 = {
				trigger = {
					trait = war_elephant_leader
				}
				remove_trait = war_elephant_leader
				add_trait = chivalry_holy_war_elephant_leader
			}
			5 = {
				trigger = {
					trait = flat_terrain_leader
				}
				remove_trait = flat_terrain_leader
				add_trait = chivalry_flat_terrain_leader
			}
			5 = {
				trigger = {
					trait = rough_terrain_leader
				}
				remove_trait = rough_terrain_leader
				add_trait = chivalry_rough_terrain_leader
			}
			5 = {
				trigger = {
					trait = mountain_terrain_leader
				}
				remove_trait = mountain_terrain_leader
				add_trait = chivalry_mountain_terrain_leader
			}
			5 = {
				trigger = {
					trait = desert_terrain_leader
				}
				remove_trait = desert_terrain_leader
				add_trait = chivalry_desert_terrain_leader
			}
			5 = {
				trigger = {
					trait = jungle_terrain_leader
				}
				remove_trait = jungle_terrain_leader
				add_trait = chivalry_jungle_terrain_leader
			}
			5 = {
				trigger = {
					trait = winter_soldier
				}
				remove_trait = winter_soldier
				add_trait = chivalry_winter_soldier
			}	
		}
	}
}

#Warrior Pilgrim Bandit Attack
character_event = {
	id = CHI.334
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			is_holyorder_societies_trigger = yes
		}
		text = EVTDESC_CHI_334_INFIDEL
	}
	
	desc = {
		trigger = {
			is_fighter_societies_trigger = yes
		}
		text = EVTDESC_CHI_334_BANDIT
	}
	
	
	is_triggered_only = yes
	
	trigger = {
		trait = chivalry_warrior_pilgrim
	}
	
	option = { #Charge by yourself
		name = EVTOPTA_CHI_334 #high risk
		random_list = {
			0 = { #nothing
			}
			10 = { #good stuff
				trigger = {
					is_holyorder_societies_trigger = yes
					trait = cynical
				}
				remove_trait = cynical
			}
			10 = {
				trigger = {
					is_holyorder_societies_trigger = yes
					NOT = { trait = cynical }
					NOT = { trait = zealous }
				}
				add_trait_zealous_effect = yes
			}
			10 = {
				trigger = {
					trait = patient
				}
				remove_trait = patient
			}
			10 = {
				trigger = {
					NOT = { trait = wroth }
					NOT = { trait = patient }
				}
				add_trait_wroth_effect = yes
			}
			10 = {
				trigger = {
					trait = craven
				}
				remove_trait = craven
			}
			10 = {
				trigger = {
					NOT = { trait = brave }
					NOT = { trait = craven }
				}
				add_trait_brave_effect = yes	
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					NOT = { trait = robust }
				}
				add_trait = robust
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					trait = robust
				}
				remove_trait = robust
				add_trait = strong
			}
			10 = {
				trigger = {
					NOT = { trait = master_warrior }
				}
				chivalry_warrior_trait_upgrade = yes
			}
			20 = { #bad stuff
				trigger = {
					NOT = { trait = severely_injured }
				}
				if = {
					limit = {
						NOT = { trait = wounded }
					}
					add_trait_wounded_effect = yes
				}
				else = {
					add_trait_severely_injured_effect = yes
				}
			}
			10 = {
				add_maimed_trait_effect = yes
			}
			5 = {
				death = { death_reason = death_battle } 
			}
		}
	}
	option = { #Lead the charge 
		name = EVTOPTB_CHI_334
		random_list = {
			20 = { #nothing
			}
			10 = { #good stuff
				trigger = {
					is_holyorder_societies_trigger = yes
					trait = cynical
				}
				remove_trait = cynical
			}
			10 = {
				trigger = {
					is_holyorder_societies_trigger = yes
					NOT = { trait = cynical }
					NOT = { trait = zealous }
				}
				add_trait_zealous_effect = yes
			}
			10 = {
				trigger = {
					trait = wroth
				}
				remove_trait = wroth
			}
			10 = {
				trigger = {
					NOT = { trait = wroth }
					NOT = { trait = patient }
				}
				add_trait_patient_effect = yes
			}
			10 = {
				trigger = {
					trait = craven
				}
				remove_trait = craven
			}
			10 = {
				trigger = {
					NOT = { trait = brave }
					NOT = { trait = craven }
				}
				add_trait_brave_effect = yes	
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					NOT = { trait = robust }
				}
				add_trait = robust
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					trait = robust
				}
				remove_trait = robust
				add_trait = strong
			}
			10 = {
				trigger = {
					NOT = { trait = master_warrior }
				}
				chivalry_warrior_trait_upgrade = yes
			}
			15 = { #bad stuff
				trigger = {
					NOT = { trait = severely_injured }
				}
				if = {
					limit = {
						NOT = { trait = wounded }
					}
					add_trait_wounded_effect = yes
				}
				else = {
					add_trait_severely_injured_effect = yes
				}
			}
			8 = {
				add_maimed_trait_effect = yes
			}
			4 = {
				death = { death_reason = death_battle } 
			}
		}
	}
	option = { #Help the bandits
		name = {
			trigger = {
				is_holyorder_societies_trigger = yes
			}
			text = EVTOPTC_CHI_334_INFIDEL
		}
		name = {
			trigger = {
				is_fighter_societies_trigger = yes
			}
			text = EVTOPTC_CHI_334_BANDIT
		}
		random_list = {
			20 = { wealth = 250 }
			20 = { wealth = 150 }
			20 = { wealth = 100 }
			20 = { wealth = 50 }
		}
		random_list = {
			20 = { #nothing
			}
			10 = { #bad stuff
				trigger = {
					is_holyorder_societies_trigger = yes
					trait = zealous
				}
				remove_trait = zealous
			}
			10 = {
				trigger = {
					is_holyorder_societies_trigger = yes
					NOT = { trait = zealous }
					NOT = { trait = cynical }
				}
				add_trait_cynical_effect = yes
			}
			10 = {
				trigger = {
					trait = patient
				}
				remove_trait = patient
			}
			10 = {
				trigger = {
					NOT = { trait = wroth }
					NOT = { trait = patient }
				}
				add_trait_wroth_effect = yes
			}
			10 = {
				trigger = {
					trait = craven
				}
				remove_trait = craven
			}
			10 = {
				trigger = {
					trait = just
				}
				remove_trait = just
			}
			10 = {
				trigger = {
					NOT = { trait = arbitrary }
					NOT = { trait = just }
				}
				add_trait_arbitrary_effect = yes	
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					NOT = { trait = robust }
				}
				add_trait = robust
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					trait = robust
				}
				remove_trait = robust
				add_trait = strong
			}
			10 = {
				trigger = {
					NOT = { trait = master_warrior }
				}
				chivalry_warrior_trait_upgrade = yes
			}
			10 = { #bad stuff
				trigger = {
					NOT = { trait = severely_injured }
				}
				if = {
					limit = {
						NOT = { trait = wounded }
					}
					add_trait_wounded_effect = yes
				}
				else = {
					add_trait_severely_injured_effect = yes
				}
			}
			5 = {
				add_maimed_trait_effect = yes
			}
			0 = {
				death = { death_reason = death_battle } 
			}
		}
	}
	option = { #Nothing
		name = EVTOPTD_CHI_334
		if = {
			limit = {
				NOT = { trait = brave }
			}
			random = {
				chance = 20
				add_trait_craven_effect = yes
			}
		}
		else_if = {
			limit = {
				trait = brave
			}
			random = {
				chance = 30
				remove_trait = brave
			}
		}
	}
	after = {
		hidden_tooltip = {
			random_list = {
				# 5 = { character_event = { id = CHI.334 days = 120 random = 30 } } #Bandit
				5 = { character_event = { id = CHI.335 days = 120 random = 30 } } #Inn rent
				5 = { character_event = { id = CHI.336 days = 120 random = 30 } } #Old mentor
				5 = { character_event = { id = CHI.337 days = 120 random = 30 } } #Ronin duel
				5 = { character_event = { id = CHI.338 days = 120 random = 30 } } #Ruins
				5 = { character_event = { id = CHI.339 days = 120 random = 30 } } #Hunt
			}
		}
	}
}

#Warrior Pilgrim Inn
character_event = {
	id = CHI.335
	desc = EVTDESC_CHI_335
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	trigger = {
		trait = chivalry_warrior_pilgrim
	}
	
	option = { #Start a fight
		name = EVTOPTA_CHI_335
		random_list = {
			5 = { #nothing
			}
			10 = {
				trigger = {
					trait = patient
				}
				remove_trait = patient
			}
			10 = {
				trigger = {
					NOT = { trait = wroth }
					NOT = { trait = patient }
				}
				add_trait_wroth_effect = yes
			}
			10 = {
				trigger = {
					trait = just
				}
				remove_trait = just
			}
			10 = {
				trigger = {
					NOT = { trait = arbitrary }
					NOT = { trait = just }
				}
				add_trait_arbitrary_effect = yes
			}
			10 = {
				trigger = {
					trait = craven
				}
				remove_trait = craven
			}
			10 = {
				trigger = {
					trait = kind
				}
				remove_trait = kind
			}
			10 = {
				trigger = {
					NOT = { trait = brave }
					NOT = { trait = craven }
				}
				add_trait_brave_effect = yes	
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					NOT = { trait = robust }
				}
				add_trait = robust
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					trait = robust
				}
				remove_trait = robust
				add_trait = strong
			}
			10 = {
				trigger = {
					NOT = { trait = master_warrior }
				}
				chivalry_warrior_trait_upgrade = yes
			}
			15 = { #bad stuff
				trigger = {
					NOT = { trait = severely_injured }
				}
				if = {
					limit = {
						NOT = { trait = wounded }
					}
					add_trait_wounded_effect = yes
				}
				else = {
					add_trait_severely_injured_effect = yes
				}
			}
			8 = {
				add_maimed_trait_effect = yes
			}
			4 = {
				death = { death_reason = death_battle } 
			}
		}
	}
	option = { #Rent the whole inn
		name = EVTOPTB_CHI_335
		prestige = 50
		wealth = -50
		random_list = {
			20 = { #nothing
			}
			10 = {
				trigger = {
					trait = charitable
				}
				remove_trait = charitable
			}
			10 = {
				trigger = {
					NOT = { trait = greedy }
					NOT = { trait = charitable }
				}
				add_trait_greedy_effect = yes
			}
			10 = {
				trigger = {
					trait = humble
				}
				remove_trait = humble
			}
			10 = {
				trigger = {
					NOT = { trait = proud }
					NOT = { trait = humble }
				}
				add_trait_proud_effect = yes
			}
			10 = {
				trigger = {
					NOT = { trait = paranoid }
				}
				add_trait_paranoid_effect = yes
			}
		}
	}
	option = { #Pick a normal room
		name = EVTOPTC_CHI_335
		prestige = -50
		wealth = -5
		random_list = {
			20 = { #nothing
			}
			10 = {
				trigger = {
					trait = proud
				}
				remove_trait = proud
			}
			10 = {
				trigger = {
					NOT = { trait = humble }
					NOT = { trait = proud }
				}
				# add_trait_humble_effect = yes
				add_trait = humble
			}
			10 = {
				trigger = {
					NOT = { trait = content }
				}
				# add_trait_content_effect = yes
				add_trait = content
			}
			10 = {
				trigger = {
					trait = arbitrary
				}
				remove_trait = arbitrary
			}
			10 = {
				trigger = {
					NOT = { trait = just }
					NOT = { trait = arbitrary }
				}
				add_trait = just
			}
		}
	}
	option = { #Keep Walking
		name = EVTOPTD_CHI_335
		random = {
			chance = 10
			give_ill_effect = yes
		}
	}
	after = {
		hidden_tooltip = {
			random_list = {
				5 = { character_event = { id = CHI.334 days = 120 random = 30 } } #Bandit
				# 5 = { character_event = { id = CHI.335 days = 120 random = 30 } } #Inn rent
				5 = { character_event = { id = CHI.336 days = 120 random = 30 } } #Old mentor
				5 = { character_event = { id = CHI.337 days = 120 random = 30 } } #Ronin duel
				5 = { character_event = { id = CHI.338 days = 120 random = 30 } } #Ruins
				5 = { character_event = { id = CHI.339 days = 120 random = 30 } } #Hunt
			}
		}
	}
}

#Warrior Pilgrim Old Mentor
character_event = {
	id = CHI.336
	desc = EVTDESC_CHI_336
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	trigger = {
		trait = chivalry_warrior_pilgrim
	}
	
	immediate = {
		if = {
			limit = {
				is_fighter_societies_trigger = yes
			}
			# chivalry_create_fighter = yes #must be old and random culture
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				attributes = {
					martial = 10
				}
				age = 53
				culture = random
			}
			new_character = {
				remove_trait = weak
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = dull
				remove_trait = craven
				
				remove_trait = mystic
				remove_trait = socializer
				remove_trait = gamer
				remove_trait = hedonist
				remove_trait = duelist
				remove_trait = hunter
				remove_trait = strategist
				remove_trait = administrator
				remove_trait = architect
				remove_trait = gardener
				remove_trait = schemer
				remove_trait = impaler
				remove_trait = seducer
				remove_trait = seductress
				remove_trait = theologian
				remove_trait = scholar
				
				remove_trait = light_foot_leader 
				remove_trait = heavy_infantry_leader 
				remove_trait = cavalry_leader
				remove_trait = inspiring_leader 
				remove_trait = trickster 
				remove_trait = organizer 
				remove_trait = defensive_leader 
				remove_trait = experimenter
				remove_trait = flanker
				remove_trait = aggressive_leader 
				remove_trait = siege_leader 
				remove_trait = flat_terrain_leader 
				remove_trait = rough_terrain_leader 
				remove_trait = mountain_terrain_leader 
				remove_trait = desert_terrain_leader 
				remove_trait = holy_warrior 
				remove_trait = unyielding_leader
				remove_trait = narrow_flank_leader 
				remove_trait = war_elephant_leader  
				remove_trait = jungle_terrain_leader 
				remove_trait = winter_soldier			  
							
				random_list = { #add fighter leader trait
					10 = {
						add_trait = chivalry_fight_inspiring_leader
					}
					10 = {
						add_trait = chivalry_fight_trickster
					}
					10 = {
						add_trait = chivalry_fight_organizer
					}
					10 = {
						add_trait = chivalry_fight_defensive_leader
					}
					10 = {
						add_trait = chivalry_fight_experimenter
					}
					10 = {
						add_trait = chivalry_fight_flanker
					}
					10 = {
						add_trait = chivalry_fight_aggressive_leader
					}
					10 = {
						add_trait = chivalry_fight_siege_leader
					}
					10 = {
						add_trait = chivalry_fight_holy_warrior
					}
					10 = {
						add_trait = chivalry_fight_unyielding_leader
					}
					10 = {
						add_trait = chivalry_fight_narrow_flank_leader
					}
					10 = {
						trigger = {
							religion_group = indian_group
						}
						add_trait = chivalry_fight_war_elephant_leader
					}
					10 = {
						add_trait = chivalry_fight_light_foot_leader
					}
					10 = {
						add_trait = chivalry_fight_heavy_infantry_leader
					}
					10 = {
						add_trait = chivalry_fight_cavalry_leader
					}
					10 = {
						trigger = {
							ROOT = {
								OR = {
									location = { terrain = forest }
									location = { terrain = hills }
								}
							}
						}
						add_trait = chivalry_rough_terrain_leader
					}
					10 = {
						trigger = {
							ROOT = {
								OR = {
									location = { terrain = plains }
									location = { terrain = farmlands }
									location = { terrain = steppe }
								}
							}
						}
						add_trait = chivalry_flat_terrain_leader
					}
					10 = {
						trigger = {
							ROOT = {
								location = { is_winter = yes }
							}
						}
						add_trait = chivalry_winter_soldier
					}
					10 = {
						trigger = {
							ROOT = {
								location = { terrain = mountain }
							}
						}
						add_trait = chivalry_mountain_terrain_leader
					}
					10 = {
						trigger = {
							ROOT = {
								location = { terrain = desert }
							}
						}
						add_trait = chivalry_desert_terrain_leader
					}
					10 = {
						trigger = {
							ROOT = {
								OR = {
									location = { terrain = jungle }
									location = { terrain = marsh }
								}
							}
						}
						add_trait = chivalry_jungle_terrain_leader
					}
				}		   
				
				random_list = { # Flavor Randomization maybe more
					10 = {
						add_trait = robust
					}
					10 = {
						add_trait = duelist
					}
					10 = {
						add_trait = hunter
					}
					5 = {
						add_trait = strategist
					}
					5 = {
						trigger = {
							has_dlc = "Reapers"
						}
						if = {
							limit = {
								has_dlc = "Reapers"
							}
							add_trait = one_eyed
							change_martial = 1
						}
					}
					5 = { 
						add_trait = shrewd
					}
					5 = { 
						add_trait = strong
					}
					10 = { 
						add_trait = chivalry_squire_one
					}
					8 = { 
						add_trait = chivalry_squire_two
					}
					5 = { 
						add_trait = chivalry_squire_three
					}
					4 = { 
						add_trait = chivalry_squire_four
					}
				}
				random_list = {
					30 = {
						add_trait = poor_warrior
					}
					30 = {
						add_trait = trained_warrior
					}
					15 = {
						add_trait = skilled_warrior
					}
					5 = {
						add_trait = master_warrior
					}
				}
				add_trait = chivalry_commander
				save_event_target_as = chivalry_event_commander
				set_character_flag = chivalry_no_death_warning
			}
		}
		if = { 
			limit = {
				is_holyorder_societies_trigger = yes
			}
			# chivalry_create_knights = yes
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				attributes = {
					martial = 10
				}
				age = 53
				culture = random
			}
			new_character = {
				remove_trait = weak
				remove_trait = slow
				remove_trait = imbecile
				remove_trait = dull
				remove_trait = craven
				remove_trait = cynical
				
				remove_trait = mystic
				remove_trait = socializer
				remove_trait = gamer
				remove_trait = hedonist
				remove_trait = duelist
				remove_trait = hunter
				remove_trait = strategist
				remove_trait = administrator
				remove_trait = architect
				remove_trait = gardener
				remove_trait = schemer
				remove_trait = impaler
				remove_trait = seducer
				remove_trait = seductress
				remove_trait = theologian
				remove_trait = scholar
				
				remove_trait = light_foot_leader 
				remove_trait = heavy_infantry_leader 
				remove_trait = cavalry_leader
				remove_trait = inspiring_leader 
				remove_trait = trickster 
				remove_trait = organizer 
				remove_trait = defensive_leader 
				remove_trait = experimenter
				remove_trait = flanker
				remove_trait = aggressive_leader 
				remove_trait = siege_leader 
				remove_trait = flat_terrain_leader 
				remove_trait = rough_terrain_leader 
				remove_trait = mountain_terrain_leader 
				remove_trait = desert_terrain_leader 
				remove_trait = holy_warrior 
				remove_trait = unyielding_leader
				remove_trait = narrow_flank_leader 
				remove_trait = war_elephant_leader  
				remove_trait = jungle_terrain_leader 
				remove_trait = winter_soldier			  
							
				random_list = { #add holy leader trait
					10 = {
						add_trait = chivalry_holy_inspiring_leader
					}
					10 = {
						add_trait = chivalry_holy_trickster
					}
					10 = {
						add_trait = chivalry_holy_organizer
					}
					10 = {
						add_trait = chivalry_holy_defensive_leader
					}
					10 = {
						add_trait = chivalry_holy_experimenter
					}
					10 = {
						add_trait = chivalry_holy_flanker
					}
					10 = {
						add_trait = chivalry_holy_aggressive_leader
					}
					10 = {
						add_trait = chivalry_holy_siege_leader
					}
					10 = {
						add_trait = chivalry_fight_holy_warrior
					}
					10 = {
						add_trait = chivalry_holy_unyielding_leader
					}
					10 = {
						add_trait = chivalry_holy_narrow_flank_leader
					}
					10 = {
						trigger = {
							religion_group = indian_group
						}
						add_trait = chivalry_holy_war_elephant_leader
					}
					10 = {
						add_trait = chivalry_holy_light_foot_leader
					}
					10 = {
						add_trait = chivalry_holy_heavy_infantry_leader
					}
					10 = {
						add_trait = chivalry_holy_cavalry_leader
					}
					10 = {
						trigger = {
							ROOT = {
								OR = {
									location = { terrain = forest }
									location = { terrain = hills }
								}
							}
						}
						add_trait = chivalry_rough_terrain_leader
					}
					10 = {
						trigger = {
							ROOT = {
								OR = {
									location = { terrain = plains }
									location = { terrain = farmlands }
									location = { terrain = steppe }
								}
							}
						}
						add_trait = chivalry_flat_terrain_leader
					}
					10 = {
						trigger = {
							ROOT = {
								location = { is_winter = yes }
							}
						}
						add_trait = chivalry_winter_soldier
					}
					10 = {
						trigger = {
							ROOT = {
								location = { terrain = mountain }
							}
						}
						add_trait = chivalry_mountain_terrain_leader
					}
					10 = {
						trigger = {
							ROOT = {
								location = { terrain = desert }
							}
						}
						add_trait = chivalry_desert_terrain_leader
					}
					10 = {
						trigger = {
							ROOT = {
								OR = {
									location = { terrain = jungle }
									location = { terrain = marsh }
								}
							}
						}
						add_trait = chivalry_jungle_terrain_leader
					}
				}		   
				
				random_list = { # Flavor Randomization maybe more
					10 = {
						add_trait = robust
					}
					10 = {
						add_trait = zealous
					}
					10 = {
						add_trait = hunter
					}
					5 = {
						add_trait = strategist
					}
					5 = {
						trigger = {
							has_dlc = "Reapers"
						}
						if = {
							limit = {
								has_dlc = "Reapers"
							}
							add_trait = one_eyed
							change_martial = 1
						}
					}
					5 = { 
						add_trait = shrewd
					}
					5 = { 
						add_trait = strong
					}
					10 = { 
						add_trait = chivalry_squire_one
					}
					8 = { 
						add_trait = chivalry_squire_two
					}
					5 = { 
						add_trait = chivalry_squire_three
					}
					4 = { 
						add_trait = chivalry_squire_four
					}
				}
				random_list = {
					30 = {
						add_trait = poor_warrior
					}
					30 = {
						add_trait = trained_warrior
					}
					15 = {
						add_trait = skilled_warrior
					}
					5 = {
						add_trait = master_warrior
					}
				}
				add_trait = chivalry_commander
				save_event_target_as = chivalry_event_commander
				set_character_flag = chivalry_no_death_warning
			}
		}
	}
	
	option = { #Teach me master
		name = EVTOPTA_CHI_336
		wealth = -50
		random_list = {
			20 = { #nothing
			}
			40 = {
				trigger = {
					NOT = { trait = master_warrior }
				}
				chivalry_warrior_trait_upgrade = yes
			}
			10 = { #bad stuff
				trigger = {
					NOT = { trait = severely_injured }
				}
				if = {
					limit = {
						NOT = { trait = wounded }
					}
					add_trait_wounded_effect = yes
				}
				else = {
					add_trait_severely_injured_effect = yes
				}
			}
			5 = {
				add_maimed_trait_effect = yes
			}
			1 = {
				death = { death_reason = death_battle } 
			}
		}
		hidden_tooltip = {
			event_target:chivalry_event_commander = {
				death = {
					death_reason = death_missing
				}
			}
		}
	}
	option = { #I am ready for anything
		name = EVTOPTB_CHI_336
		wealth = -50
		random_list = {
			0 = { #nothing
			}
			40 = {
				trigger = {
					NOT = { trait = master_warrior }
				}
				chivalry_warrior_trait_upgrade = yes
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					NOT = { trait = robust }
				}
				add_trait = robust
			}
			5 = {
				trigger = {
					NOT = { trait = strong }
					trait = robust
				}
				remove_trait = robust
				add_trait = strong
			}
			10 = { #bad stuff
				trigger = {
					NOT = { trait = severely_injured }
				}
				if = {
					limit = {
						NOT = { trait = wounded }
					}
					add_trait_wounded_effect = yes
				}
				else = {
					add_trait_severely_injured_effect = yes
				}
			}
			8 = {
				add_maimed_trait_effect = yes
			}
			4 = {
				death = { death_reason = death_battle } 
			}
		}
		hidden_tooltip = {
			event_target:chivalry_event_commander = {
				death = {
					death_reason = death_missing
				}
			}
		}
	}
	option = { #Come to my court
		name = EVTOPTC_CHI_336
		wealth = -200
		event_target:chivalry_event_commander = {
			opinion = {
				modifier = opinion_bound_honor
				who = ROOT
				years = 5
			}
		}
		if = {
			limit = {
				OR = {
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 2 } }
						OR = {
							tier = COUNT
							AND = {
								tier = KING
								is_nomadic = yes
							}
						}
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 4 } }
						OR = {
							tier = DUKE
							AND = {
								tier = EMPEROR
								is_nomadic = yes
							}
						}
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 6 } }
						tier = KING
						is_nomadic = no
					}
					AND = {
						NOT = { has_assigned_minor_title = { title = title_commander count = 8 } }
						tier = EMPEROR
						is_nomadic = no
					}
				}
			}
			event_target:chivalry_event_commander = {
				give_minor_title = title_commander
			}
		}
	}
	option = { #Nothing
		name = EVTOPTD_CHI_336
		random = {
			chance = 10
			add_trait_shy_effect = yes
		}
		hidden_tooltip = {
			event_target:chivalry_event_commander = {
				death = {
					death_reason = death_missing
				}
			}
		}
	}
	after = {
		hidden_tooltip = {
			random_list = {
				5 = { character_event = { id = CHI.334 days = 120 random = 30 } } #Bandit
				5 = { character_event = { id = CHI.335 days = 120 random = 30 } } #Inn rent
				# 5 = { character_event = { id = CHI.336 days = 120 random = 30 } } #Old mentor
				5 = { character_event = { id = CHI.337 days = 120 random = 30 } } #Ronin duel
				5 = { character_event = { id = CHI.338 days = 120 random = 30 } } #Ruins
				5 = { character_event = { id = CHI.339 days = 120 random = 30 } } #Hunt
			}
		}
	}
}

#Warrior Pilgrim Ronin Duel
character_event = {
	id = CHI.337
	desc = EVTDESC_CHI_337
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	trigger = {
		trait = chivalry_warrior_pilgrim
	}
	
	immediate = {
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			female = no
			age = 30
			culture = random
			attributes = {
				martial = 10
			}
		}
		new_character = {
			remove_trait = weak
			remove_trait = slow
			remove_trait = imbecile
			remove_trait = dull
			remove_trait = craven
			
			remove_trait = mystic
			remove_trait = socializer
			remove_trait = gamer
			remove_trait = hedonist
			remove_trait = duelist
			remove_trait = hunter
			remove_trait = strategist
			remove_trait = administrator
			remove_trait = architect
			remove_trait = gardener
			remove_trait = schemer
			remove_trait = impaler
			remove_trait = seducer
			remove_trait = seductress
			remove_trait = theologian
			remove_trait = scholar				  
			
			random_list = { # Flavor Randomization maybe more
				10 = {
					add_trait = robust
				}
				10 = {
					add_trait = duelist
				}
				10 = {
					add_trait = hunter
				}
				5 = {
					add_trait = strategist
				}
				5 = {
					trigger = {
						has_dlc = "Reapers"
					}
					if = {
						limit = {
							has_dlc = "Reapers"
						}
						add_trait = one_eyed
						change_martial = 1
					}
				}
				5 = { 
					add_trait = shrewd
				}
				5 = { 
					add_trait = strong
				}
			}
			random_list = {
				30 = {
					add_trait = poor_warrior
				}
				30 = {
					add_trait = trained_warrior
				}
				15 = {
					add_trait = skilled_warrior
				}
				5 = {
					add_trait = master_warrior
				}
			}
			save_event_target_as = chivalry_event_duel
			set_character_flag = chivalry_no_death_warning
		}
	}
	
	option = { #Death duel
		name = EVTOPTA_CHI_337 #high risk
		if = {
			limit = {
				NOT = { trait = craven }
				NOT = { trait = brave }
			}
			add_trait_brave_effect = yes
		}
		if = {
			limit = {
				trait = craven
			}
			remove_trait = craven
		}
		set_character_flag = chivalry_duel_ongoing
		set_character_flag = chivalry_duel_death
		event_target:chivalry_event_duel = {
			set_character_flag = chivalry_duel_ongoing
			set_character_flag = chivalry_duel_death
			character_event = { id = CHI.3102 }
		}
	}
	option = { #Duel to blood
		name = EVTOPTB_CHI_337
		trigger = {
			NOT = { trait = wounded }
		}
		set_character_flag = chivalry_duel_ongoing
		set_character_flag = chivalry_duel_wounded
		event_target:chivalry_event_duel = {
			set_character_flag = chivalry_duel_ongoing
			set_character_flag = chivalry_duel_wounded
			character_event = { id = CHI.3102 }
		}
	}
	option = { #Friendly spare
		name = EVTOPTC_CHI_337
		random_list = {
			30 = { #nothing happen
			}
			30 = { #small boost
				chivalry_warrior_trait_upgrade = yes
			}
			10 = {
				trigger = {
					NOT = { trait = severely_injured }
				}
				if = {
					limit = {
						NOT = { trait = wounded }
					}
					add_trait_wounded_effect = yes
				}
				else = {
					add_trait_severely_injured_effect = yes
				}
			}
		}
		hidden_tooltip = {
			event_target:chivalry_event_duel = {
				death = {
					death_reason = death_missing
				}
			}
		}
	}
	option = { #Flee
		name = EVTOPTD_CHI_337
		random = {
			chance = 25
			add_trait_craven_effect = yes
		}
	}
	after = {
		hidden_tooltip = {
			random_list = {
				5 = { character_event = { id = CHI.334 days = 120 random = 30 } } #Bandit
				5 = { character_event = { id = CHI.335 days = 120 random = 30 } } #Inn rent
				5 = { character_event = { id = CHI.336 days = 120 random = 30 } } #Old mentor
				# 5 = { character_event = { id = CHI.337 days = 120 random = 30 } } #Ronin duel
				5 = { character_event = { id = CHI.338 days = 120 random = 30 } } #Ruins
				5 = { character_event = { id = CHI.339 days = 120 random = 30 } } #Hunt
			}
		}
	}
}

#Warrior Pilgrim Ruins Delving
character_event = {
	id = CHI.338
	desc = EVTDESC_CHI_338
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	trigger = {
		trait = chivalry_warrior_pilgrim
	}
	
	option = { #Burn what is left
		name = EVTOPTA_CHI_338
		random_list = {
			20 = { #nothing
			}
			10 = { #good stuff
				trigger = {
					trait = cynical
				}
				remove_trait = cynical
			}
			10 = {
				trigger = {
					NOT = { trait = cynical }
					NOT = { trait = zealous }
				}
				add_trait_zealous_effect = yes
			}
			5 = {
				trigger = {
					trait = just
				}
				remove_trait = just
			}
			5 = {
				trigger = {
					NOT = { trait = arbitrary }
					NOT = { trait = just }
				}
				add_trait_arbitrary_effect = yes
			}
			10 = {
				trigger = {
					trait = trusting
				}
				remove_trait = trusting
			}
			10 = {
				trigger = {
					NOT = { trait = paranoid }
					NOT = { trait = trusting }
				}
				add_trait_paranoid_effect = yes	
			}
		}
	}
	option = { #Sleep
		name = EVTOPTB_CHI_338
		random_list = {
			20 = { #nothing
			}
			10 = { #good stuff
				trigger = {
					trait = craven
				}
				remove_trait = craven
			}
			5 = {
				trigger = {
					NOT = { trait = brave }
					NOT = { trait = craven }
				}
				add_trait_brave_effect = yes	
			}
			10 = {
				trigger = {
					trait = paranoid
				}
				remove_trait = paranoid
			}
			10 = {
				trigger = {
					NOT = { trait = trusting }
					NOT = { trait = paranoid }
				}
				add_trait_trusting_effect = yes	
			}
			10 = {
				add_character_modifier = {
					modifier = chivalry_pilgrim_rested
					months = 12
				}
			}
			10 = { #bad stuff
				trigger = {
					NOT = { trait = possessed }
				}
				add_trait_possessed_effect = yes
			}
			3 = {
				death = { death_reason = death_vanished } 
			}
		}
	}
	option = { #Try to loot
		name = EVTOPTC_CHI_338
		random_list = {
			20 = { wealth = 250 }
			20 = { wealth = 150 }
			20 = { wealth = 100 }
			20 = { wealth = 50 }
			20 = { }
		}
		random_list = {
			10 = { #nothing
			}
			10 = { #good stuff
				trigger = {
					trait = craven
				}
				remove_trait = craven
			}
			10 = {
				trigger = {
					NOT = { trait = brave }
					NOT = { trait = craven }
				}
				add_trait_brave_effect = yes	
			}
			10 = {
				trigger = {
					trait = paranoid
				}
				remove_trait = paranoid
			}
			10 = {
				trigger = {
					NOT = { trait = trusting }
					NOT = { trait = paranoid }
				}
				add_trait_trusting_effect = yes	
			}
			5 = {
				death = { death_reason = death_vanished } 
			}
		}
	}
	option = { #Nothing
		name = EVTOPTD_CHI_338
		random = {
			chance = 10
			add_trait_paranoid_effect = yes
		}
	}
	after = {
		hidden_tooltip = {
			random_list = {
				5 = { character_event = { id = CHI.334 days = 120 random = 30 } } #Bandit
				5 = { character_event = { id = CHI.335 days = 120 random = 30 } } #Inn rent
				5 = { character_event = { id = CHI.336 days = 120 random = 30 } } #Old mentor
				5 = { character_event = { id = CHI.337 days = 120 random = 30 } } #Ronin duel
				# 5 = { character_event = { id = CHI.338 days = 120 random = 30 } } #Ruins
				5 = { character_event = { id = CHI.339 days = 120 random = 30 } } #Hunt
			}
		}
	}
}

#Warrior Pilgrim Hunt
character_event = { #forget may use an improvement
	id = CHI.339
	desc = EVTDESC_CHI_339
	picture = GFX_evt_rider_adventure
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	trigger = {
		trait = chivalry_warrior_pilgrim
	}
	
	option = { #Try to find to buy
		name = EVTOPTA_CHI_339
		random_list = {
			50 = { #nothing
				wealth = -25
				random = {
					chance = 20
					give_food_poisoning_effect = yes
					hidden_tooltip = {
						if = {
							limit = { 
								NOR = { 
									has_dlc = "Reapers" 
									trait = ill
								} 
							}
							add_trait = ill
							hidden_tooltip = {
								character_event = {
									days = 3
									id = 38290 #Notify Ill
								}
							}
						}
					}
				}
			}
			50 = { #Starve
				add_character_modifier = {
					modifier = chivalry_pilgrim_hunger
					months = 12
				}
			}
		}
	}
	option = { #Hunt big
		name = EVTOPTB_CHI_339
		random_list = {
			20 = { #Starve
				add_character_modifier = {
					modifier = chivalry_pilgrim_hunger
					months = 12
				}
			}
			40 = { #chance to get brave and strong
				modifier = {
					factor = 1.5
					trait = hunter
				}
				random = {
					chance = 33
					give_food_poisoning_effect = yes
					hidden_tooltip = {
						if = {
							limit = { 
								NOR = { 
									has_dlc = "Reapers" 
									trait = ill
								} 
							}
							add_trait = ill
							hidden_tooltip = {
								character_event = {
									days = 3
									id = 38290 #Notify Ill
								}
							}
						}
					}
				}
				random_list = {
					10 = {
						trigger = {
							trait = craven
						}
						remove_trait = craven
					}
					10 = {
						trigger = {
							NOT = { trait = brave }
							NOT = { trait = craven }
						}
						add_trait_brave_effect = yes	
					}
					2 = {
						trigger = {
							NOT = { trait = strong }
							NOT = { trait = robust }
						}
						add_trait = robust
					}
					2 = {
						trigger = {
							NOT = { trait = strong }
							trait = robust
						}
						remove_trait = robust
						add_trait = strong
					}
					12 = { #bad stuff
						trigger = {
							NOT = { trait = severely_injured }
						}
						if = {
							limit = {
								NOT = { trait = wounded }
							}
							add_trait_wounded_effect = yes
						}
						else = {
							add_trait_severely_injured_effect = yes
						}
					}
				}
			}
		}
	}
	option = { #Hunt small
		name = EVTOPTC_CHI_339
		random_list = {
			20 = { #Starve
				add_character_modifier = {
					modifier = chivalry_pilgrim_hunger
					months = 12
				}
			}
			40 = { #safer than big gme but no reward
				modifier = {
					factor = 1.5
					trait = hunter
				}
				random = {
					chance = 33
					give_food_poisoning_effect = yes
					hidden_tooltip = {
						if = {
							limit = { 
								NOR = { 
									has_dlc = "Reapers" 
									trait = ill
								} 
							}
							add_trait = ill
							hidden_tooltip = {
								character_event = {
									days = 3
									id = 38290 #Notify Ill
								}
							}
						}
					}
				}
				random = {
					chance = 33
					# trigger = {
						# NOT = { trait = craven }
						# NOT = { trait = brave }
					# }
					add_trait_craven_effect = yes	
				}
			}
		}
	}
	option = { #Go without food
		name = EVTOPTD_CHI_339
		add_character_modifier = {
			modifier = chivalry_pilgrim_hunger
			months = 12
		}
	}
	after = {
		hidden_tooltip = {
			random_list = {
				5 = { character_event = { id = CHI.334 days = 120 random = 30 } } #Bandit
				5 = { character_event = { id = CHI.335 days = 120 random = 30 } } #Inn rent
				5 = { character_event = { id = CHI.336 days = 120 random = 30 } } #Old mentor
				5 = { character_event = { id = CHI.337 days = 120 random = 30 } } #Ronin duel
				5 = { character_event = { id = CHI.338 days = 120 random = 30 } } #Ruins
				# 5 = { character_event = { id = CHI.339 days = 120 random = 30 } } #Hunt
			}
		}
	}
}


#############HO Vote
character_event = {
	id = CHI.340
	desc = EVTDESC_CHI_340
	picture = GFX_evt_book_carolingian_script
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	trigger = {
		society_rank == 3
		is_holyorder_societies_trigger = yes
	}
	
	immediate = {
		chivalry_vote_cleaning = yes
	}

	option = { #Change Law
		name = EVTOPTA_CHI_340 
		character_event = { id = CHI.341 }
	}
	option = { #Allow educations
		name = EVTOPTB_CHI_340 
		character_event = { id = CHI.342 }
	}
	option = { #Request Boon
		name = EVTOPTC_CHI_340 
		character_event = { id = CHI.343 }
	}
	option = { #Cancel
		name = EVTOPTD_CHI_340 
		change_society_currency = 800
		chivalry_vote_cleaning = yes
		clr_character_flag = chivalry_power_law_timer
	}
}

#HO Vote Laws
character_event = {
	id = CHI.341
	desc = EVTDESC_CHI_341
	picture = GFX_evt_book_carolingian_script
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	trigger = {
		society_rank == 3
		is_holyorder_societies_trigger = yes
	}
	
	immediate = {
		set_variable = { which = "chivalry_holy_vote" value = 0 }
	}

	option = { #feminist to on
		name = EVTOPTA_CHI_341 
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					NOT = { has_character_modifier = chivalry_law_feminist }
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_feminist_on
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	option = { #feminist to off
		name = EVTOPTB_CHI_341
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					has_character_modifier = chivalry_law_feminist
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_feminist_off
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	
	option = { #heretic to on
		name = EVTOPTC_CHI_341 
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					NOT = { has_character_modifier = chivalry_law_heretic }
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_heretic_on
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				limit = { society_rank == 3 }
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	option = { #heretic to off
		name = EVTOPTD_CHI_341
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					has_character_modifier = chivalry_law_heretic
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_heretic_off
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	
	# option = { #allow other education
		# name = EVTOPTE_CHI_341 
		# trigger = {
			# society = {
				# any_society_member = {
					# is_society_grandmaster = yes
					# NAND = {
						# has_character_modifier = chivalry_law_diplomat
						# has_character_modifier = chivalry_law_steward
						# has_character_modifier = chivalry_law_spy
						# has_character_modifier = chivalry_law_scholar
					# }
				# }
			# }
		# }
		# character_event = { id = CHI.342 }
	# }	
	
	option = { #animals to on
		name = EVTOPTF_CHI_341 
		trigger = {
			trait = lunatic
			NOT = { has_global_flag = chivalry_animals_kingdom_active }
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					NOT = { has_character_modifier = chivalry_law_animal }
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_animal_on
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	option = { #animals to off
		name = EVTOPTG_CHI_341
		trigger = {
			NOT = { trait = lunatic }
			NOT = { has_global_flag = chivalry_animals_kingdom_active }
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					has_character_modifier = chivalry_law_animal
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_animal_off
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	
	option = { #return to choice
		name = EVTOPTH_CHI_341
		# trigger = { #trigger to force animal on/off if I add another law
			# OR = {
				# AND = {
					# NOT = { trait = lunatic }
					# society = {
						# any_society_member = {
							# is_society_grandmaster = yes
							# NOT = { has_character_modifier = chivalry_law_animal }
						# }
					# }
				# }
				# AND = {
					# trait = lunatic
					# society = {
						# any_society_member = {
							# is_society_grandmaster = yes
							# has_character_modifier = chivalry_law_animal
						# }
					# }
				# }
			# }
		# }
		character_event = { id = CHI.340 }
	}
}

#HO Vote Education
character_event = {
	id = CHI.342
	desc = EVTDESC_CHI_342
	picture = GFX_evt_book_carolingian_script
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes

	option = { #diplomat
		name = EVTOPTA_CHI_342 
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					NOT = { has_character_modifier = chivalry_law_diplomat }
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_diplomat
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	option = { #steward
		name = EVTOPTB_CHI_342 
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					NOT = { has_character_modifier = chivalry_law_steward }
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_steward
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	option = { #spy
		name = EVTOPTC_CHI_342 
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					NOT = { has_character_modifier = chivalry_law_spy }
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_spy
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	option = { #scholar
		name = EVTOPTD_CHI_342 
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					NOT = { has_character_modifier = chivalry_law_scholar }
				}
			}
		}
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_scholar
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	
	option = { #return to choice
		name = EVTOPTE_CHI_342
		trigger = {
			society = {
				any_society_member = {
					is_society_grandmaster = yes
					NAND = {
						has_character_modifier = chivalry_law_diplomat
						has_character_modifier = chivalry_law_steward
						has_character_modifier = chivalry_law_spy
						has_character_modifier = chivalry_law_scholar
					}
				}
			}
		}
		character_event = { id = CHI.340 }
	}
}

#HO Vote Boon
character_event = {
	id = CHI.343
	desc = EVTDESC_CHI_343
	picture = GFX_evt_book_carolingian_script
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes

	option = { #Piety
		name = EVTOPTA_CHI_343 
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_piety
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	option = { #Gold
		name = EVTOPTB_CHI_343 
		# trigger = { #nothing for now
			# society = {
				# any_society_member = {
					# is_society_grandmaster = yes
					# wealth XXXXXXXXXXXXXX
				# }
			# }
		# }
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
		set_character_flag = chivalry_law_gold
		society = {
			any_society_member = {
				limit = { 
					society_rank == 3 
					NOT = { character = ROOT }
				}
				letter_event = { id = CHI.3410 }
			}
		}
		character_event = { id = CHI.3414 days = 30 }
	}
	# option = {
		# name = EVTOPTC_CHI_343 
	# }
	option = { #return to choice
		name = EVTOPTD_CHI_343
		character_event = { id = CHI.340 }
	}
}

#HO Vote Laws Voter
letter_event = {
	id = CHI.3410
	# desc = EVTDESC_CHI_3410
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_feminist_on }
		}
		text = EVTDESC_CHI_3410_FEM_ON
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_feminist_off }
		}
		text = EVTDESC_CHI_3410_FEM_OFF
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_heretic_on }
		}
		text = EVTDESC_CHI_3410_HER_ON
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_heretic_off }
		}
		text = EVTDESC_CHI_3410_HER_OFF
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_animal_on }
		}
		text = EVTDESC_CHI_3410_ANI_ON
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_animal_off }
		}
		text = EVTDESC_CHI_3410_ANI_OFF
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_diplomat }
		}
		text = EVTDESC_CHI_3410_DIPLOMAT
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_steward }
		}
		text = EVTDESC_CHI_3410_STEWARD
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_spy }
		}
		text = EVTDESC_CHI_3410_SPY
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_scholar }
		}
		text = EVTDESC_CHI_3410_SCHOLAR
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_piety }
		}
		text = EVTDESC_CHI_3410_PIETY
	}
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_law_gold }
		}
		text = EVTDESC_CHI_3410_GOLD
	}
	
	trigger = {
		society_rank == 3
		is_holyorder_societies_trigger = yes
	}

	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Accept law
		name = EVTOPTA_CHI_3410
		FROM = {
			opinion = {
				modifier = opinion_glad
				who = ROOT
				years = 2
			}
		}
		hidden_tooltip = {
		FROM = { change_variable = { which = "chivalry_holy_vote" value = 1 } }
		}
		FROM = { letter_event = { id = CHI.3411 days = 15 random = 10 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					AND = {
						FROM = { has_character_flag = chivalry_law_animal_on }
						NOT = { trait = lunatic }
					}
					AND = {
						trait = zealous
						OR = {
							FROM = { has_character_flag = chivalry_law_heretic_on }
							FROM = { has_character_flag = chivalry_law_feminist_on }
						}
					}
					AND = {
						is_female = yes
						FROM = { has_character_flag = chivalry_law_feminist_off }
					}
					AND = {
						is_heretic = yes
						FROM = { has_character_flag = chivalry_law_heretic_off }
					}
					AND = {
						trait = cynical
						FROM = { has_character_flag = chivalry_law_piety }
					}
				}
			}
			modifier = {
				factor = 3
				OR = {
					opinion = { who = FROM value = 25 } 
					AND = {
						FROM = { has_character_flag = chivalry_law_animal_on }
						trait = lunatic
					}
					AND = {
						trait = cynical
						OR = {
							FROM = { has_character_flag = chivalry_law_heretic_on }
							FROM = { has_character_flag = chivalry_law_feminist_on }
						}
					}
				}
			}
		}
	}
	option = { #Request bribe
		name = EVTOPTB_CHI_3410
		trigger = { NOT = { owes_favor_to = FROM } }
		FROM = { letter_event = { id = CHI.3412 days = 15 random = 10 } }
		custom_tooltip = { text = EVTOPTB_CHI_3410_TT }
		piety = -50
		change_society_currency = -50
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 0
				OR = { 
					AND = {
						is_female = yes
						OR = {
							FROM = { has_character_flag = chivalry_law_feminist_off }
							FROM = { has_character_flag = chivalry_law_feminist_on }
						}
					}
					AND = {
						is_heretic = yes
						OR = {
							FROM = { has_character_flag = chivalry_law_heretic_off }
							FROM = { has_character_flag = chivalry_law_heretic_on }
						}
					}
					AND = {
						trait = greedy
						FROM = { has_character_flag = chivalry_law_gold }
					}
				}
			}
		}
	}
	option = { #Refuse law
		name = EVTOPTC_CHI_3410
		trigger = { NOT = { owes_favor_to = FROM } }
		FROM = { letter_event = { id = CHI.3413 days = 15 random = 10 } }
		FROM = {
			opinion = {
				modifier = opinion_upset
				who = ROOT
				years = 2
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				is_rival = FROM
			}
			modifier = {
				factor = 0
				is_female = yes
				FROM = { has_character_flag = chivalry_law_feminist_on }
			}
			modifier = {
				factor = 0
				is_heretic = yes
				FROM = { has_character_flag = chivalry_law_heretic_on }
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						trait = greedy
						FROM = { has_character_flag = chivalry_law_gold }
					}
					AND = {
						trait = zealous
						FROM = { has_character_flag = chivalry_law_piety }
					}
				}
			}
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#HO Vote Laws Voter Accept
letter_event = {
	id = CHI.3411
	desc = EVTDESC_CHI_3411
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes

	option = { #OK
		name = EVTOPTA_CHI_3411 
	}
}

#HO Vote Laws Voter Bribe
letter_event = {
	id = CHI.3412
	desc = EVTDESC_CHI_3412
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes

	immediate = {
		set_character_flag = chivalry_block_currency
	}
	
	option = { #Favor
		name = EVTOPTA_CHI_3412
		trigger = { NOT = { owes_favor_to = FROM } }
		FROM = { letter_event = { id = CHI.34121 } }
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
	}
	option = { #Gold
		name = EVTOPTB_CHI_3412
		FROM = { letter_event = { id = CHI.34122 } }
		wealth = -50
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
	}
	option = { #Piety
		name = EVTOPTC_CHI_3412
		trigger = {
			piety = 100
			society_currency = 100
		}
		FROM = { letter_event = { id = CHI.34123 } }
		piety = -100
		change_society_currency = -100
		hidden_tooltip = {
			change_variable = { which = "chivalry_holy_vote" value = 1 }
		}
	}
	option = { #Don't
		name = EVTOPTD_CHI_3412
		ai_chance = {
			factor = 0.1
		}
	}
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#HO Vote Laws Voter Bribe Favor
letter_event = {
	id = CHI.34121
	desc = EVTDESC_CHI_34121
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes

	option = { #Favor
		name = EVTOPTA_CHI_34121
		ROOT = { add_favor = FROM }
	}
}

#HO Vote Laws Voter Bribe Gold
letter_event = {
	id = CHI.34122
	desc = EVTDESC_CHI_34122
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes

	option = { #Gold
		name = EVTOPTA_CHI_34122
		wealth = 50
	}
}

#HO Vote Laws Voter Bribe Piety
letter_event = {
	id = CHI.34123
	desc = EVTDESC_CHI_34123
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes

	option = { #Piety
		name = EVTOPTA_CHI_34123
		piety = 100
		change_society_currency = 100
	}
}

#HO Vote Laws Voter Refuse
letter_event = {
	id = CHI.3413
	desc = EVTDESC_CHI_3413
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes

	option = { #OK
		name = EVTOPTA_CHI_3413
	}
}

#HO Vote Laws
character_event = {
	id = CHI.3414
	# desc = EVTDESC_CHI_3414
	picture = GFX_evt_throne_room
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			has_holyorder_societies_religion_catholic = yes
		}
		text = EVTDESC_CHI_3414_4
	}
	desc = {
		trigger = {
			NOT = { has_holyorder_societies_religion_catholic = yes }
		}
		text = EVTDESC_CHI_3414_8
	}
	
	is_triggered_only = yes

	option = { #send law to leader
		name = EVTOPTA_CHI_3414
		society = {
			any_society_member = {
				limit = { is_society_grandmaster = yes }
				character_event = { id = CHI.3415 }
			}
		}
	}
	option = {
		name = EVTOPTB_CHI_3414
		chivalry_vote_cleaning = yes
		change_society_currency = 400
	}
}

#HO Vote Law Leader choose
character_event = {
	id = CHI.3415
	hide_window = yes
	
	is_triggered_only = yes

	immediate = {
		random_list = {
			5 = { #accept feminism
				trigger = {
					OR = {
						FROM = { has_character_flag = chivalry_law_feminist_on }
						FROM = { has_character_flag = chivalry_law_feminist_off }
					}
				}
				modifier = { #tend toward feminism
					factor = 2
					is_feminist_holyorder_societies_trigger = yes
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = { 
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				add_character_modifier = {
					modifier = chivalry_law_feminist
					duration = -1
					inherit = yes
				}
				if = {
					limit = {
						FROM = { has_character_flag = chivalry_law_feminist_on }
					}
					any_playable_ruler = {
						limit = { 
							ai = no
							OR = {
								religion = ROOT
								is_heresy_of = ROOT
							}
						}
						character_event = { id = CHI.3416 }
					}
				}
				else = {
					FROM = { letter_event = { id = CHI.3425 } }
				}
			}
			10 = { #refuse feminism
				trigger = {
					OR = {
						FROM = { has_character_flag = chivalry_law_feminist_on }
						FROM = { has_character_flag = chivalry_law_feminist_off }
					}
				}
				modifier = { #tend toward feminism
					factor = 0.5
					is_feminist_holyorder_societies_trigger = yes
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { 
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_feminist_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				remove_character_modifier = chivalry_law_feminist
				if = {
					limit = {
						FROM = { has_character_flag = chivalry_law_feminist_off }
					}
					any_playable_ruler = {
						limit = { 
							ai = no
							OR = {
								religion = ROOT
								is_heresy_of = ROOT
							}
						}
						character_event = { id = CHI.3416 }
					}
				}
				else = {
					FROM = { letter_event = { id = CHI.3425 } }
				}
			}
			5 = { #accept heretic
				trigger = {
					OR = {
						FROM = { has_character_flag = chivalry_law_heretic_on }
						FROM = { has_character_flag = chivalry_law_heretic_off }
					}
				}
				modifier = { #tend toward heretism
					factor = 2
					is_heretic_holyorder_societies_trigger = yes
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = { 
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				add_character_modifier = {
					modifier = chivalry_law_heretic
					duration = -1
					inherit = yes
				}
				if = {
					limit = {
						FROM = { has_character_flag = chivalry_law_heretic_on }
					}
					any_playable_ruler = {
						limit = { 
							ai = no
							OR = {
								religion = ROOT
								is_heresy_of = ROOT
							}
						}
						character_event = { id = CHI.3417 }
					}
				}
				else = {
					FROM = { letter_event = { id = CHI.3425 } }
				}
			}
			10 = { #refuse heretic
				trigger = {
					OR = {
						FROM = { has_character_flag = chivalry_law_heretic_on }
						FROM = { has_character_flag = chivalry_law_heretic_off }
					}
				}
				modifier = { #tend toward heretism
					factor = 0.5
					is_heretic_holyorder_societies_trigger = yes
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = { 
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_heretic_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				remove_character_modifier = chivalry_law_heretic
				if = {
					limit = {
						FROM = { has_character_flag = chivalry_law_heretic_off }
					}
					any_playable_ruler = {
						limit = { 
							ai = no
							OR = {
								religion = ROOT
								is_heresy_of = ROOT
							}
						}
						character_event = { id = CHI.3417 }
					}
				}
				else = {
					FROM = { letter_event = { id = CHI.3425 } }
				}
			}
			5 = { #accept animal
				trigger = {
					OR = {
						FROM = { has_character_flag = chivalry_law_animal_on }
						FROM = { has_character_flag = chivalry_law_animal_off }
					}
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_on }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				add_character_modifier = {
					modifier = chivalry_law_animal
					duration = -1
					inherit = yes
				}
				if = {
					limit = {
						FROM = { has_character_flag = chivalry_law_animal_on }
					}
					any_playable_ruler = {
						limit = { 
							ai = no
							OR = {
								religion = ROOT
								is_heresy_of = ROOT
							}
						}
						character_event = { id = CHI.3418 }
					}
				}
				else = {
					FROM = { letter_event = { id = CHI.3425 } }
				}
			}
			15 = { #refuse animal
				trigger = {
					OR = {
						FROM = { has_character_flag = chivalry_law_animal_on }
						FROM = { has_character_flag = chivalry_law_animal_off }
					}
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_animal_off }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				remove_character_modifier = chivalry_law_animal
				if = {
					limit = {
						FROM = { has_character_flag = chivalry_law_animal_off }
					}
					any_playable_ruler = {
						limit = { 
							ai = no
							OR = {
								religion = ROOT
								is_heresy_of = ROOT
							}
						}
						character_event = { id = CHI.3418 }
					}
				}
				else = {
					FROM = { letter_event = { id = CHI.3425 } }
				}
			}
			
			5 = { #accept diplomat
				trigger = {
					FROM = { has_character_flag = chivalry_law_diplomat }
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_diplomat }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				add_character_modifier = {
					modifier = chivalry_law_diplomat
					years = 5
					inherit = yes
				}
				any_playable_ruler = {
					limit = { 
						ai = no
						OR = {
							religion = ROOT
							is_heresy_of = ROOT
						}
					}
					character_event = { id = CHI.3421 }
				}
			}
			5 = { #accept steward
				trigger = {
					FROM = { has_character_flag = chivalry_law_steward }
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_steward }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				add_character_modifier = {
					modifier = chivalry_law_steward
					years = 5
					inherit = yes
				}
				any_playable_ruler = {
					limit = { 
						ai = no
						OR = {
							religion = ROOT
							is_heresy_of = ROOT
						}
					}
					character_event = { id = CHI.3422 }
				}
			}
			5 = { #accept spy
				trigger = {
					FROM = { has_character_flag = chivalry_law_spy }
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_spy }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				add_character_modifier = {
					modifier = chivalry_law_spy
					years = 5
					inherit = yes
				}
				any_playable_ruler = {
					limit = { 
						ai = no
						OR = {
							religion = ROOT
							is_heresy_of = ROOT
						}
					}
					character_event = { id = CHI.3423 }
				}
			}
			5 = { #accept scholar
				trigger = {
					FROM = { has_character_flag = chivalry_law_scholar }
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_scholar }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				add_character_modifier = {
					modifier = chivalry_law_scholar
					years = 5
					inherit = yes
				}
				any_playable_ruler = {
					limit = { 
						ai = no
						OR = {
							religion = ROOT
							is_heresy_of = ROOT
						}
					}
					character_event = { id = CHI.3424 }
				}
			}
			5 = { #refuse education
				trigger = {
					OR = {
						FROM = { has_character_flag = chivalry_law_diplomat }
						FROM = { has_character_flag = chivalry_law_steward }
						FROM = { has_character_flag = chivalry_law_spy }
						FROM = { has_character_flag = chivalry_law_scholar }
					}
				}
				FROM = {
					letter_event = { id = CHI.3425 }
				}
			}
			
			5 = { #accept piety
				trigger = {
					FROM = { has_character_flag = chivalry_law_piety }
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_piety }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				society = {
					any_society_member = {
						limit = { 
							society_rank == 3
						}
						letter_event = { id = CHI.3431 }
					}
				}
			}
			5 = { #accept gold
				trigger = {
					FROM = { has_character_flag = chivalry_law_gold }
				}
				modifier = { #catholic order have 4 tier 3, thus each vote is worth more.
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = {
					factor = 1.4
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					has_holyorder_societies_religion_catholic = yes
				}
				modifier = { #non-catholics have more tier 3
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 1 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 2 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 3 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 4 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 5 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 6 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 7 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				modifier = {
					factor = 1.2
					FROM = { has_character_flag = chivalry_law_gold }
					FROM = { check_variable = { which = chivalry_holy_vote value = 8 } }
					NOT = { has_holyorder_societies_religion_catholic = yes }
				}
				society = {
					any_society_member = {
						limit = { 
							society_rank == 3
						}
						letter_event = { id = CHI.3432 }
					}
				}
			}
			#third boon 3433
			5 = { #refuse boon
				trigger = {
					OR = {
						FROM = { has_character_flag = chivalry_law_piety }
						FROM = { has_character_flag = chivalry_law_gold }
						# FROM = { has_character_flag = chivalry_law_steward }
					}
				}
				society = {
					any_society_member = {
						limit = { 
							society_rank == 3
						}
						letter_event = { id = CHI.3434 }
					}
				}
			}
		}
	}
	after = {
		FROM = { chivalry_vote_cleaning = yes } 
	}
}

#HO Vote Laws Result Feminist
character_event = {
	id = CHI.3416
	# desc = EVTDESC_CHI_3416
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_war_chivalry
	
	notification = yes
	
	desc = {
		trigger = {
			FROM = { has_character_modifier = chivalry_law_feminist }
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3416_HAS
	}
	
	desc = {
		trigger = {
			NOT = { FROM = { has_character_modifier = chivalry_law_feminist } }
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3416_NOT
	}
	
	desc = {
		trigger = {
			FROM = { has_character_modifier = chivalry_law_feminist }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3416_HAS_custom
	}
	
	desc = {
		trigger = {
			NOT = { FROM = { has_character_modifier = chivalry_law_feminist } }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3416_NOT_custom
	}
	
	is_triggered_only = yes

	option = { #is woman allowed
		name = EVTOPTA_CHI_3416
		trigger = {
			is_female = yes
			FROM = { has_character_modifier = chivalry_law_feminist }
		}
	}

	option = { #is woman blocked
		name = EVTOPTB_CHI_3416
		trigger = {
			is_female = yes
			NOT = { FROM = { has_character_modifier = chivalry_law_feminist } }
		}
	}
	option = { #is man
		name = EVTOPTC_CHI_3416
		trigger = {
			NOT = { is_female = yes }
		}
	}
}

#HO Vote Laws Result Heretic
character_event = {
	id = CHI.3417
	# desc = EVTDESC_CHI_3417
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_war_chivalry
	
	notification = yes
	
	desc = {
		trigger = {
			FROM = { has_character_modifier = chivalry_law_heretic }
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3417_HAS
	}
	
	desc = {
		trigger = {
			NOT = { FROM = { has_character_modifier = chivalry_law_heretic } }
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3417_NOT
	}
	
	desc = {
		trigger = {
			FROM = { has_character_modifier = chivalry_law_heretic }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3417_HAS_custom
	}
	
	desc = {
		trigger = {
			NOT = { FROM = { has_character_modifier = chivalry_law_heretic } }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3417_NOT_custom
	}
	
	is_triggered_only = yes

	option = { #is heretic allowed
		name = EVTOPTA_CHI_3417
		trigger = {
			is_heretic = yes
			FROM = { has_character_modifier = chivalry_law_heretic }
		}
	}
	
	option = { #is heretic blocked
		name = EVTOPTB_CHI_3417
		trigger = {
			is_heretic = yes
			NOT = { FROM = { has_character_modifier = chivalry_law_heretic } }
		}
	}
	
	option = { #is not
		name = EVTOPTC_CHI_3417
		trigger = {
			NOT = { is_heretic = yes }
		}
	}
}

#HO Vote Laws Result Animals
character_event = {
	id = CHI.3418
	# desc = EVTDESC_CHI_3418
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_war_chivalry
	
	notification = yes
	
	desc = {
		trigger = {
			FROM = { has_character_modifier = chivalry_law_animal }
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3418_HAS
	}
	
	desc = {
		trigger = {
			NOT = { FROM = { has_character_modifier = chivalry_law_animal } }
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3418_NOT
	}
	
	desc = {
		trigger = {
			FROM = { has_character_modifier = chivalry_law_animal }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3418_HAS_custom
	}
	
	desc = {
		trigger = {
			NOT = { FROM = { has_character_modifier = chivalry_law_animal } }
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3418_NOT_custom
	}
	
	is_triggered_only = yes

	option = { #is lunatic animal allowed
		name = EVTOPTA_CHI_3418
		trigger = {
			trait = lunatic
			FROM = { has_character_modifier = chivalry_law_animal }
		}
	}
	
	option = { #is lunatic animal blocked
		name = EVTOPTB_CHI_3418
		trigger = {
			trait = lunatic
			NOT = { FROM = { has_character_modifier = chivalry_law_animal } }
		}
	}
	
	option = { #is not lunactic animal allowed
		name = EVTOPTC_CHI_3418
		trigger = {
			FROM = { has_character_modifier = chivalry_law_animal }
			NOT = { trait = lunatic }
		}
	}
	
	option = { #is not lunactic animal blocked
		name = EVTOPTD_CHI_3418
		trigger = {
			NOT = { trait = lunatic }
			NOT = { FROM = { has_character_modifier = chivalry_law_animal } }
		}
	}
}

#HO Vote Laws Result Diplomat
character_event = {
	id = CHI.3421
	# desc = EVTDESC_CHI_3421
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3421
	}
	
	desc = {
		trigger = {
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3421_custom
	}
	
	notification = yes

	is_triggered_only = yes

	option = { #is diplomat
		name = EVTOPTA_CHI_3421
		trigger = {
			has_education_diplomacy_trigger = yes
		}
	}
	
	option = { #is not
		name = EVTOPTB_CHI_3421
		trigger = {
			NOT = { has_education_diplomacy_trigger = yes }
		}
	}
}

#HO Vote Laws Result Steward
character_event = {
	id = CHI.3422
	# desc = EVTDESC_CHI_3422
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3422
	}
	
	desc = {
		trigger = {
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3422_custom
	}
	
	notification = yes

	is_triggered_only = yes

	option = { #is steward
		name = EVTOPTA_CHI_3422
		trigger = {
			has_education_stewardship_trigger = yes
		}
	}
	
	option = { #is not
		name = EVTOPTB_CHI_3422
		trigger = {
			NOT = { has_education_stewardship_trigger = yes }
		}
	}
}

#HO Vote Laws Result Spy
character_event = {
	id = CHI.3423
	# desc = EVTDESC_CHI_3423
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3423
	}
	
	desc = {
		trigger = {
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3423_custom
	}
	
	notification = yes

	is_triggered_only = yes

	option = { #is spy
		name = EVTOPTA_CHI_3423
		trigger = {
			has_education_intrigue_trigger = yes
		}
	}
	
	option = { #is not
		name = EVTOPTB_CHI_3423
		trigger = {
			NOT = { has_education_intrigue_trigger = yes }
		}
	}
}

#HO Vote Laws Result Scholar
character_event = {
	id = CHI.3424
	# desc = EVTDESC_CHI_3424
	picture = GFX_evt_bishop
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			NOT = { FROM = { society_member_of = society_holy_one } }
		}
		text = EVTDESC_CHI_3424
	}
	
	desc = {
		trigger = {
			FROM = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_3424_custom
	}
	
	notification = yes

	is_triggered_only = yes

	option = { #is priest
		name = EVTOPTA_CHI_3424
		trigger = {
			has_education_learning_trigger = yes
		}
	}
	
	option = { #is not
		name = EVTOPTB_CHI_3424
		trigger = {
			NOT = { has_education_learning_trigger = yes }
		}
	}
}

#HO Vote Laws Result Refuse Education
letter_event = {
	id = CHI.3425
	desc = EVTDESC_CHI_3425
	# picture = GFX_evt_large_army
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_3425
	}
}

#HO Vote Laws Result Piety
letter_event = {
	id = CHI.3431
	desc = EVTDESC_CHI_3431
	# picture = GFX_evt_large_army
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_3431
		piety = 400
	}
}

#HO Vote Laws Result Gold
letter_event = {
	id = CHI.3432
	desc = EVTDESC_CHI_3432
	# picture = GFX_evt_large_army
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_3432
		wealth = 400 #make transfer later forget
	}
}

# Vote Laws Result XXXXXXXXX 3433

#HO Vote Laws Result Refuse Boon
letter_event = {
	id = CHI.3434
	desc = EVTDESC_CHI_3434
	# picture = GFX_evt_large_army
	border = GFX_event_letter_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_3434
	}
}



#################HO/FG Artifacts - Trophy
character_event = {
	id = CHI.350
	picture = GFX_evt_bloody_knife_hf
	border = GFX_event_normal_frame_war_chivalry

	is_triggered_only = yes
	
	desc = {
		trigger = {
			event_target:chivalry_combat_trophy = { has_artifact_flag = combat_weapon }
		}
		text = EVTDESC_CHI_350_WEAPON
		picture = GFX_evt_bloody_knife_hf
	}
	
	desc = {
		trigger = {
			event_target:chivalry_combat_trophy = { artifact_type = chivalry_item_skull }
		}
		text = EVTDESC_CHI_350_SKULL
		picture = GFX_evt_skulls_hf
	}
	
	desc = {
		trigger = {
			event_target:chivalry_combat_trophy = { artifact_type = chivalry_item_broke }
		}
		text = EVTDESC_CHI_350_BROKE
		picture = GFX_evt_bloody_knife_hf
	}
	
	immediate = {
		chivalry_give_trophy = yes
	}
	
	option = {
		name = EVTOPTA_CHI_350
	}
}

#HO/FG Artifacts - Buy weapon pick lowest weapon
character_event = {
	id = CHI.351
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				any_artifact = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 1
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
			}
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 1
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
				save_event_target_as = chivalry_combat_weapon
			}
		}
		else_if = {
			limit = {
				any_artifact = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 2
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
			}
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 2
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
				save_event_target_as = chivalry_combat_weapon
			}
		}
		else_if = {
			limit = {
				any_artifact = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 3
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
			}
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 3
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
				save_event_target_as = chivalry_combat_weapon
			}
		}
		else_if = {
			limit = {
				any_artifact = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 4
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
			}
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 4
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
				save_event_target_as = chivalry_combat_weapon
			}
		}
		else_if = {
			limit = {
				any_artifact = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 5
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
			}
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = combat_weapon
						has_artifact_flag = combat
					}
					quality == 5
					NOT = { has_artifact_flag = chivalry_unsellable }
				}
				save_event_target_as = chivalry_combat_weapon
			}
		}
		FROM = { character_event = { id = CHI.3511 } }
	}
}

#HO/FG Artifacts - Buy weapon pick budget
character_event = {
	id = CHI.3511
	desc = EVTDESC_CHI_3511
	picture = GFX_evt_war_planning
	border = GFX_event_normal_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = { #half
		name = EVTOPTA_CHI_3511
		custom_tooltip = { text = chivalry_offer_tooltip }
		tooltip = {
			if = {
				limit = {
					event_target:chivalry_combat_weapon = {
						quality == 1
					}
				}
				transfer_scaled_wealth = { to = FROM value = 0.75 min = 38 max = 75 }
			}
			else_if = {
				limit = {
					event_target:chivalry_combat_weapon = {
						quality == 2
					}
				}
				transfer_scaled_wealth = { to = FROM value = 1.5 min = 90 max = 180 }
			}
			else = {
				transfer_scaled_wealth = { to = FROM value = 3 min = 200 max = 400 }
			}
		}
		set_character_flag = chivalry_weapon_cheap
		FROM = { character_event = { id = CHI.3512 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				event_target:chivalry_combat_weapon = {
					quality == 1
				}
				NOT = { scaled_wealth = { value = 0.50 min = 30 } }
			}
			modifier = {
				factor = 0
				event_target:chivalry_combat_weapon = {
					quality == 2
				}
				NOT = { scaled_wealth = { value = 1 min = 60 } }
			}
			modifier = {
				factor = 0
				event_target:chivalry_combat_weapon = {
					quality >= 3
				}
				NOT = { scaled_wealth = { value = 2.5 min = 150 } }
			}
		}
	}
	option = { #normal
		name = EVTOPTB_CHI_3511
		custom_tooltip = { text = chivalry_offer_tooltip }
		tooltip = {
			if = {
				limit = {
					event_target:chivalry_combat_weapon = {
						quality == 1
					}
				}
				transfer_scaled_wealth = { to = FROM value = 1.5 min = 75 max = 150 }
			}
			else_if = {
				limit = {
					event_target:chivalry_combat_weapon = {
						quality == 2
					}
				}
				transfer_scaled_wealth = { to = FROM value = 3 min = 180 max = 360 }
			}
			else = {
				transfer_scaled_wealth = { to = FROM value = 6 min = 400 max = 800 }
			}
		}
		FROM = { character_event = { id = CHI.3512 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				event_target:chivalry_combat_weapon = {
					quality == 1
				}
				NOT = { scaled_wealth = { value = 1 min = 50 } }
			}
			modifier = {
				factor = 0
				event_target:chivalry_combat_weapon = {
					quality == 2
				}
				NOT = { scaled_wealth = { value = 2.5 min = 150 } }
			}
			modifier = {
				factor = 0
				event_target:chivalry_combat_weapon = {
					quality >= 3
				}
				NOT = { scaled_wealth = { value = 5 min = 350 } }
			}
		}
	}
	option = { #nevermind
		name = EVTOPTC_CHI_3511
		ai_chance = {
			factor = 0.5
		}
	}
}

#HO/FG Artifacts - Buy weapon, consider offer
character_event = {
	id = CHI.3512
	picture = GFX_evt_war_planning
	border = GFX_event_normal_frame_war_chivalry
	
	desc = {
		trigger = {
			FROM = { has_character_flag = chivalry_weapon_cheap }
		}
		text = EVTDESC_CHI_3512_CHEAP
	}
	
	desc = {
		trigger = {
			FROM = { NOT = { has_character_flag = chivalry_weapon_cheap } }
		}
		text = EVTDESC_CHI_3512_NORMAL
	}
	
	is_triggered_only = yes
	
	option = { #accept cheap
		name = EVTOPTA_CHI_3512
		trigger = { FROM = { has_character_flag = chivalry_weapon_cheap } }
		tooltip = {
			if = {
				limit = {
					event_target:chivalry_combat_weapon = {
						quality == 1
					}
				}
				transfer_scaled_wealth = { from = FROMFROM to = ROOT value = 0.75 min = 38 max = 75 }
			}
			else_if = {
				limit = {
					event_target:chivalry_combat_weapon = {
						quality == 2
					}
				}
				transfer_scaled_wealth = { from = FROMFROM to = ROOT value = 1.5 min = 90 max = 180 }
			}
			else = {
				transfer_scaled_wealth = { from = FROMFROM to = ROOT value = 3 min = 200 max = 400 }
			}
		}
		FROM = { letter_event = { id = CHI.3513 } }
	}
	option = { #accept normal
		name = EVTOPTA_CHI_3512
		trigger = { FROM = { NOT = { has_character_flag = chivalry_weapon_cheap } } }
		tooltip = {
			if = {
				limit = {
					event_target:chivalry_combat_weapon = {
						quality == 1
					}
				}
				transfer_scaled_wealth = { from = FROMFROM to = ROOT value = 1.5 min = 75 max = 150 }
			}
			else_if = {
				limit = {
					event_target:chivalry_combat_weapon = {
						quality == 2
					}
				}
				transfer_scaled_wealth = { from = FROMFROM to = ROOT value = 3 min = 180 max = 360 }
			}
			else = {
				transfer_scaled_wealth = { from = FROMFROM to = ROOT value = 6 min = 400 max = 800 }
			}
		}
		FROM = { letter_event = { id = CHI.3513 } }
	}
	option = { #refuse
		name = EVTOPTB_CHI_3512
		FROM = { letter_event = { id = CHI.3514 } }
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 2
				FROM = { has_character_flag = chivalry_weapon_cheap }
			}
			modifier = {
				factor = 0
				NOT = { wealth = 0 }
			}
		}
	}
	option = { #refuse permanantly for that weapon
		name = EVTOPTC_CHI_3512
		FROM = { letter_event = { id = CHI.3514 } }
		event_target:chivalry_combat_weapon = {
			set_artifact_flag = chivalry_unsellable
		}
		ai_chance = {
			factor = 0
		}
	}
	option = { #refuse permanantly
		name = EVTOPTD_CHI_3512
		FROM = { letter_event = { id = CHI.3514 } }
		set_character_flag = chivalry_wont_sell_weapons
		ai_chance = {
			factor = 0
		}
	}
}

#HO/FG Artifacts - Buy weapon purchase
letter_event = {
	id = CHI.3513
	desc = EVTDESC_CHI_3513
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = { #buy
		name = EVTOPTA_CHI_3513
		if = {
			limit = {
				has_character_flag = chivalry_weapon_cheap
				event_target:chivalry_combat_weapon = {
					quality == 1
				}
			}
			transfer_scaled_wealth = { to = FROM value = 0.75 min = 38 max = 75 }
		}
		else_if = {
			limit = {
				has_character_flag = chivalry_weapon_cheap
				event_target:chivalry_combat_weapon = {
					quality == 2
				}
			}
			transfer_scaled_wealth = { to = FROM value = 1.5 min = 90 max = 180 }
		}
		else_if = {
			limit = {
				has_character_flag = chivalry_weapon_cheap
				event_target:chivalry_combat_weapon = {
					quality >= 3
				}
			}
			transfer_scaled_wealth = { to = FROM value = 3 min = 200 max = 400 }
		}
		else_if = {
			limit = {
				NOT = { has_character_flag = chivalry_weapon_cheap }
				event_target:chivalry_combat_weapon = {
					quality == 1
				}
			}
			transfer_scaled_wealth = { to = FROM value = 1.5 min = 75 max = 150 }
		}
		else_if = {
			limit = {
				NOT = { has_character_flag = chivalry_weapon_cheap }
				event_target:chivalry_combat_weapon = {
					quality == 2
				}
			}
			transfer_scaled_wealth = { to = FROM value = 3 min = 180 max = 360 }
		}
		else_if = {
			limit = {
				NOT = { has_character_flag = chivalry_weapon_cheap }
				event_target:chivalry_combat_weapon = {
					quality >= 3
				}
			}
			transfer_scaled_wealth = { to = FROM value = 6 min = 400 max = 800 }
		}
		event_target:chivalry_combat_weapon = {
			transfer_artifact = {
				from = FROM
				to = ROOT
			}
		}
		clr_character_flag = chivalry_weapon_cheap
	}
}

#HO/FG Artifacts - Buy failure
letter_event = {
	id = CHI.3514
	desc = EVTDESC_CHI_3514
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = { #Cheapsake
		name = EVTOPTA_CHI_3514
		opinion = {
			modifier = opinion_disapprove
			who = FROM
			years = 2
		}
		clr_character_flag = chivalry_weapon_cheap
	}
}


#####################FG Resting
character_event = {
	id = CHI.360
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			has_character_modifier = chivalry_justified_rest
			has_character_modifier = chivalry_unjustified_rest
		}
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { society_currency = 1 }
				society_rank == 4
			}
			hidden_tooltip = {
				set_variable = { which = chivalry_champion_bloodline_var value = 0 }
			}
			society_rank_down = 1
			society = {
				random_society_member = {
					limit = { 
						# is_society_grandmaster = yes
						chivalry_valid_target = yes
					}
					society_rank_up = 1
					set_society_grandmaster = yes
					character_event = { id = CHI.361 }
				}
			}
		}
		character_event = { id = CHI.360 days = 30 }
	}
}

#FG Resting Champion Ping
character_event = {
	id = CHI.361
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { letter_event = { id = CHI.362 } }
	}
}

#FG Resting Champion
letter_event = {
	id = CHI.362
	desc = EVTDESC_CHI_362
	# picture = GFX_evt_accused
	border = GFX_event_letter_frame_war_chivalry
	
	is_triggered_only = yes
	
	option = { #downgraded
		name = EVTOPTA_CHI_362
		prestige = -250
	}
}


##################Gov/title
character_event = { #Holy
	id = CHI.370
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_knight_kneeling
	desc = EVTDESC_CHI_370

	desc = {
		trigger = {
			NOT = { society_member_of = society_holy_one }
		}
		text = EVTDESC_CHI_370
	}
	
	desc = {
		trigger = {
			society_member_of = society_holy_one
		}
		text = EVTDESC_CHI_370_custom
	}
	
	is_triggered_only = yes
	
	immediate = { liege = { save_event_target_as = chivalry_merc_liege } }
	
	option = { #silver gauntlet
		name = EVTOPTA_CHI_370
		trigger = {
			has_game_rule = {
				name = chivalry_rule_title
				value = default
			}
		}
		d_chivalry_holy_hand = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_title_tooltip }
		if = {
			limit = {
				NOT = { has_law = succ_feudal_elective }
			}
			primary_title = {
				add_law_w_cooldown = succ_feudal_elective #maybe not make it mendatory
			}
			hidden_tooltip = {
				if = {
					limit = { has_global_flag = HIPEMF_ACTIVE }
					prestige = 500	
				}
			}
		}
		primary_title = {
			add_law = chivalry_militarization_0
		}
		set_holy_order_government = yes
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #white warden
		name = EVTOPTB_CHI_370
		trigger = {
			has_game_rule = {
				name = chivalry_rule_title
				value = default
			}
		}
		d_chivalry_holy_warden = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_title_tooltip }
		if = {
			limit = {
				NOT = { has_law = succ_feudal_elective }
			}
			primary_title = {
				add_law_w_cooldown = succ_feudal_elective #maybe not make it mendatory
			}
			hidden_tooltip = {
				if = {
					limit = { has_global_flag = HIPEMF_ACTIVE }
					prestige = 500	
				}
			}
		}
		primary_title = {
			add_law = chivalry_militarization_0
		}
		set_holy_order_government = yes
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #first dawn
		name = EVTOPTC_CHI_370
		trigger = {
			has_game_rule = {
				name = chivalry_rule_title
				value = default
			}
		}
		d_chivalry_holy_scion = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_title_tooltip }
		if = {
			limit = {
				NOT = { has_law = succ_feudal_elective }
			}
			primary_title = {
				add_law_w_cooldown = succ_feudal_elective #maybe not make it mendatory
			}
			hidden_tooltip = {
				if = {
					limit = { has_global_flag = HIPEMF_ACTIVE }
					prestige = 500	
				}
			}
		}
		primary_title = {
			add_law = chivalry_militarization_0
		}
		set_holy_order_government = yes
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #burning rose
		name = EVTOPTD_CHI_370
		trigger = {
			has_game_rule = {
				name = chivalry_rule_title
				value = default
			}
		}
		d_chivalry_holy_rose = { 
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_title_tooltip }
		if = {
			limit = {
				NOT = { has_law = succ_feudal_elective }
			}
			primary_title = {
				add_law_w_cooldown = succ_feudal_elective #maybe not make it mendatory
			}
			hidden_tooltip = {
				if = {
					limit = { has_global_flag = HIPEMF_ACTIVE }
					prestige = 500	
				}
			}
		}
		primary_title = {
			add_law = chivalry_militarization_0
		}
		set_holy_order_government = yes
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #silver gauntlet
		name = EVTOPTA_CHI_370
		trigger = {
			has_game_rule = {
				name = chivalry_rule_title
				value = true
			}
		}
		hidden_tooltip = { #liege stuff for real holy orders
			liege = { save_event_target_as = chivalry_liege }
		}
		d_chivalry_holy_hand_true = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_true_title_tooltip }
		hidden_tooltip = {
			set_defacto_liege = event_target:chivalry_liege
		}
		any_demesne_title = {
			limit = {
				holder_scope = { character = ROOT }
				tier = duke
				holy_order = no
			}
			destroy_landed_title = yes
		}
		primary_title = {
			add_law = chivalry_militarization_0
		}
		set_holy_order_government = yes
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #white warden
		name = EVTOPTB_CHI_370
		trigger = {
			has_game_rule = {
				name = chivalry_rule_title
				value = true
			}
		}
		hidden_tooltip = { #liege stuff for real holy orders
			liege = { save_event_target_as = chivalry_liege }
		}
		d_chivalry_holy_warden_true = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_true_title_tooltip }
		hidden_tooltip = {
			set_defacto_liege = event_target:chivalry_liege
		}
		any_demesne_title = {
			limit = {
				holder_scope = { character = ROOT }
				tier = duke
				holy_order = no
			}
			destroy_landed_title = yes
		}
		primary_title = {
			add_law = chivalry_militarization_0
		}
		set_holy_order_government = yes
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #first dawn
		name = EVTOPTC_CHI_370
		trigger = {
			has_game_rule = {
				name = chivalry_rule_title
				value = true
			}
		}
		hidden_tooltip = { #liege stuff for real holy orders
			liege = { save_event_target_as = chivalry_liege }
		}
		d_chivalry_holy_scion_true = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_true_title_tooltip }
		hidden_tooltip = {
			set_defacto_liege = event_target:chivalry_liege
		}
		any_demesne_title = {
			limit = {
				holder_scope = { character = ROOT }
				tier = duke
				holy_order = no
			}
			destroy_landed_title = yes
		}
		primary_title = {
			add_law = chivalry_militarization_0
		}
		set_holy_order_government = yes
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #burning rose
		name = EVTOPTD_CHI_370
		trigger = {
			has_game_rule = {
				name = chivalry_rule_title
				value = true
			}
		}
		hidden_tooltip = { #liege stuff for real holy orders
			liege = { save_event_target_as = chivalry_liege }
		}
		d_chivalry_holy_rose_true = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_true_title_tooltip }
		hidden_tooltip = {
			set_defacto_liege = event_target:chivalry_liege
		}
		any_demesne_title = {
			limit = {
				holder_scope = { character = ROOT }
				tier = duke
				holy_order = no
			}
			destroy_landed_title = yes
		}
		primary_title = {
			add_law = chivalry_militarization_0
		}
		set_holy_order_government = yes
		clr_character_flag = chivalry_holy_order_created
	}
	after = {
		hidden_tooltip = {
			set_defacto_liege = event_target:chivalry_merc_liege
		}
		clr_title_flag = chivalry_merc_title
		if = {
			limit = {
				is_holyorder_societies_trigger = yes
			}
			chivalry_create_knights = yes
			hidden_tooltip = {
				event_target:chivalry_event_commander = {
					join_root_chivalry_order_society = yes
					if = {
						limit = {
							society_can_rank_up = yes
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
					if = {
						limit = {
							society_can_rank_up = yes
							society_rank == 2
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
				}
			}
			chivalry_create_knights = yes
			hidden_tooltip = {
				event_target:chivalry_event_commander = {
					join_root_chivalry_order_society = yes
					if = {
						limit = {
							society_can_rank_up = yes
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
					if = {
						limit = {
							society_can_rank_up = yes
							society_rank == 2
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
				}
			}
			chivalry_create_knights = yes
			hidden_tooltip = {
				event_target:chivalry_event_commander = {
					join_root_chivalry_order_society = yes
					if = {
						limit = {
							society_can_rank_up = yes
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
					if = {
						limit = {
							society_can_rank_up = yes
							society_rank == 2
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
				}
			}
		}
		hidden_tooltip = {
			any_vassal = {
				limit = {
					any_liege = {
						religion = ROOT
					}
					ai = yes
					NAND = { 
						is_government_potential = merchant_republic_government 
						OR = {
							tier = DUKE
							is_patrician = yes
						}
						any_demesne_province = {
							any_province_holding = {
								OR = {
									AND = {
										tier = BARON
										holding_type = family_palace
									}
									AND = {
										NOT = {
											tier = BARON
										}
										holding_type = city
									}
								}
							}
						}
					}
				}
				# set_holy_order_government = {
					if = {
						limit = {
							ROOT = { holy_order = yes }
						}
						set_government_type = order_government
					}
					else = {
						limit = {
							ROOT = { NOT = { holy_order = yes } }
						}
						set_government_type = holy_order_government
					}
				# }
			}
		}
	}
}

#Gov/title Mercenary
character_event = {
	id = CHI.371
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_large_army
	desc = EVTDESC_CHI_371
	
	is_triggered_only = yes
	
	immediate = { liege = { save_event_target_as = chivalry_merc_liege } }
	
	option = { #black comp
		name = EVTOPTA_CHI_371
		d_chivalry_merc_black = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_title_tooltip }
		if = {
			limit = {
				NOT = { has_law = succ_feudal_elective }
			}
			primary_title = {
				add_law_w_cooldown = succ_feudal_elective #maybe not make it mendatory
			}
			hidden_tooltip = {
				if = {
					limit = { has_global_flag = HIPEMF_ACTIVE }
					prestige = 500	
				}
			}
		}
		set_government_type = mercenary_government
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #stormcoat
		name = EVTOPTB_CHI_371
		d_chivalry_merc_cloak = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_title_tooltip }
		if = {
			limit = {
				NOT = { has_law = succ_feudal_elective }
			}
			primary_title = {
				add_law_w_cooldown = succ_feudal_elective #maybe not make it mendatory
			}
			hidden_tooltip = {
				if = {
					limit = { has_global_flag = HIPEMF_ACTIVE }
					prestige = 500	
				}
			}
		}
		set_government_type = mercenary_government
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #band hawk
		name = EVTOPTC_CHI_371
		d_chivalry_merc_falcon = {
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_title_tooltip }
		if = {
			limit = {
				NOT = { has_law = succ_feudal_elective }
			}
			primary_title = {
				add_law_w_cooldown = succ_feudal_elective #maybe not make it mendatory
			}
			hidden_tooltip = {
				if = {
					limit = { has_global_flag = HIPEMF_ACTIVE }
					prestige = 500	
				}
			}
		}
		set_government_type = mercenary_government
		clr_character_flag = chivalry_holy_order_created
	}
	option = { #dog of war
		name = EVTOPTD_CHI_371
		d_chivalry_merc_hound = { 
			grant_title = ROOT
			hidden_tooltip = {
				make_primary_title = yes
				culture = ROOT
				religion = ROOT
			}
		}
		custom_tooltip = { text = chivalry_custom_title_tooltip }
		if = {
			limit = {
				NOT = { has_law = succ_feudal_elective }
			}
			primary_title = {
				add_law_w_cooldown = succ_feudal_elective #maybe not make it mendatory
			}
			hidden_tooltip = {
				if = {
					limit = { has_global_flag = HIPEMF_ACTIVE }
					prestige = 500	
				}
			}
		}
		set_government_type = mercenary_government
		clr_character_flag = chivalry_holy_order_created
	}
	after = {
		hidden_tooltip = {
			set_defacto_liege = event_target:chivalry_merc_liege
		}
		clr_title_flag = chivalry_holy_title
		if = {
			limit = {
				is_fighter_societies_trigger = yes
			}
			random_list = {
				80 = {
					modifier = {
						factor = 0
						society_member_of = society_female_fighter_guild
					}
					chivalry_create_fighter = yes
				}
				20 = {
					chivalry_create_amazon = yes
				}
			}
			hidden_tooltip = {
				event_target:chivalry_event_commander = {
					join_root_chivalry_order_society = yes
					if = {
						limit = {
							society_can_rank_up = yes
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
					if = {
						limit = {
							society_can_rank_up = yes
							society_rank == 2
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
				}
			}
			random_list = {
				80 = {
					modifier = {
						factor = 0
						society_member_of = society_female_fighter_guild
					}
					chivalry_create_fighter = yes
				}
				20 = {
					chivalry_create_amazon = yes
				}
			}
			hidden_tooltip = {
				event_target:chivalry_event_commander = {
					join_root_chivalry_order_society = yes
					if = {
						limit = {
							society_can_rank_up = yes
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
					if = {
						limit = {
							society_can_rank_up = yes
							society_rank == 2
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
				}
			}
			random_list = {
				80 = {
					modifier = {
						factor = 0
						society_member_of = society_female_fighter_guild
					}
					chivalry_create_fighter = yes
				}
				20 = {
					chivalry_create_amazon = yes
				}
			}
			hidden_tooltip = {
				event_target:chivalry_event_commander = {
					join_root_chivalry_order_society = yes
					if = {
						limit = {
							society_can_rank_up = yes
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
					if = {
						limit = {
							society_can_rank_up = yes
							society_rank == 2
						}
						random = {
							chance = 33
							society_rank_up = 1	
						}
					}
				}
			}
		}
	}
}

#Gov/title Break True Holy Order
character_event = {
	id = CHI.372
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_great_schism
	desc = EVTDESC_CHI_372
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_372
		custom_tooltip = { text = EVTOPTA_CHI_372_TT }
		piety = -500
		if = {
			limit = {
				government = order_government
			}
			d_chivalry_temporary = {
				grant_title = ROOT
				hidden_tooltip = {
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
			}
			if = {
				limit = { 
					has_landed_title = d_chivalry_holy_hand_true
				}
				d_chivalry_holy_hand_true = { unsafe_destroy_landed_title = THIS }
			}
			else_if = {
				limit = { 
					has_landed_title = d_chivalry_holy_warden_true
				}
				d_chivalry_holy_warden_true = { unsafe_destroy_landed_title = THIS }
			}
			else_if = {
				limit = { 
					has_landed_title = d_chivalry_holy_scion_true
				}
				d_chivalry_holy_scion_true = { unsafe_destroy_landed_title = THIS }
			}
			else_if = {
				limit = {
					has_landed_title = d_chivalry_holy_rose_true
				
				}
				d_chivalry_holy_rose_true = { unsafe_destroy_landed_title = THIS }
			}
			else_if = {
				limit = {
					has_landed_title = d_chivalry_holy_black_true
				
				}
				d_chivalry_holy_black_true = { unsafe_destroy_landed_title = THIS }
			}
			else_if = {
				limit = {
					has_landed_title = d_chivalry_holy__true
				
				}
				d_chivalry_holy_cloak_true = { unsafe_destroy_landed_title = THIS }
			}
			else_if = {
				limit = {
					has_landed_title = d_chivalry_holy_falcon_true
				
				}
				d_chivalry_holy_falcon_true = { unsafe_destroy_landed_title = THIS }
			}
			else_if = {
				limit = {
					has_landed_title = d_chivalry_holy__true
				
				}
				d_chivalry_holy_hound_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else = {
			destroy_landed_title = d_chivalry_holy_hand
			destroy_landed_title = d_chivalry_holy_warden
			destroy_landed_title = d_chivalry_holy_scion
			destroy_landed_title = d_chivalry_holy_rose
			destroy_landed_title = d_chivalry_merc_black
			destroy_landed_title = d_chivalry_merc_cloak
			destroy_landed_title = d_chivalry_merc_falcon
			destroy_landed_title = d_chivalry_merc_hound
		}
		
		if = {
			limit = {
				religion_group = muslim
			}
			set_government_type = muslim_government
		}
		else_if = {
			limit = {
				AND = { 
					culture_group = tibetan_group
					OR = {
						religion = bon
						religion = buddhist
					}
				}
			}
			set_government_type = theocratic_feudal_government
		}
		else = {
			set_government_type = feudal_government
		}
		character_event = { id = CHI.3721 days = 365 }
	}
	option = { #not now
		name = EVTOPTB_CHI_372
	}
}

#Gov/title Break Temporary Title
character_event = {
	id = CHI.3721
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_great_schism
	desc = EVTDESC_CHI_3721
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_3721
		d_chivalry_temporary = { destroy_landed_title = yes }
	}
}

#Gov/title hire merc
character_event = {
	id = CHI.373
	hide_window = yes
	# border = GFX_event_normal_frame_war_chivalry
	# picture = GFX_evt_large_army
	# desc = EVTDESC_CHI_373
	
	is_triggered_only = yes
	
	ai = no
	
	trigger = {
		government = mercenary_government
		war = no
		OR = {
			NOT = { has_character_flag = chivalry_recently_hired }
			had_character_flag = { flag = chivalry_recently_hired days = 360 }
		}
		NOT = { primary_title = { has_law = chivalry_mobilization_0 } }
		any_playable_ruler = {
			is_within_diplo_range = ROOT
			NOT = { character = ROOT }
			# religion = ROOT
			NOT = { primary_title = { temporary = yes } }
			NOT = { is_vassal_or_below = ROOT }
			# in_revolt = no #maybe
			OR = {
				any_war = {
					attacker = {
						character = PREVPREV
						NOT = { war_score = 30 }
					}
					# PREV = { NOT = { war_score = 30 } }
					# PREV = { is_primary_war_attacker = yes }
					defender = { 
						NOR = {
							# religion = ROOT
							has_non_aggression_pact_with = ROOT
							is_allied_with = ROOT
							is_liege_of = ROOT
						}
					}
				}
				any_war = {
					defender = {
						character = PREVPREV
						NOT = { war_score = 30 }
					}
					# PREV = { NOT = { war_score = 30 } }
					# PREV = { is_primary_war_defender = yes }
					attacker = {
						NOR = {
							# religion = ROOT
							has_non_aggression_pact_with = ROOT
							is_allied_with = ROOT
							is_liege_of = ROOT
						}
					}
				}
			}
			OR = {
				AND = {
					OR = {
						wealth = 200
					}
					ROOT = {  primary_title = { has_law = chivalry_mobilization_1 } }
				}
				AND = {
					OR = {
						wealth = 300
					}
					ROOT = {  primary_title = { has_law = chivalry_mobilization_2 } }
				}
				AND = {
					OR = {
						wealth = 400
					}
					ROOT = {  primary_title = { has_law = chivalry_mobilization_3 } }
				}
				AND = {
					OR = {
						wealth = 500
					}
					ROOT = {  primary_title = { has_law = chivalry_mobilization_4 } }
				}
			}
		}
	}
	
	immediate = {
		random_playable_ruler = {
			limit = {
				is_within_diplo_range = ROOT
				NOT = { character = ROOT }
				# religion = ROOT
				NOT = { primary_title = { temporary = yes } }
				NOT = { is_vassal_or_below = ROOT }
				# in_revolt = no #maybe
				OR = {
					any_war = {
						attacker = {
							character = PREVPREV
							NOT = { war_score = 30 }
						}
						# PREV = { NOT = { war_score = 30 } }
						# PREV = { is_primary_war_attacker = yes }
						defender = { 
							NOR = {
								# religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					any_war = {
						defender = {
							character = PREVPREV
							NOT = { war_score = 30 }
						}
						# PREV = { NOT = { war_score = 30 } }
						# PREV = { is_primary_war_defender = yes }
						attacker = {
							NOR = {
								# religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							wealth = 200
						}
						ROOT = {  primary_title = { has_law = chivalry_mobilization_1 } }
					}
					AND = {
						OR = {
							wealth = 300
						}
						ROOT = {  primary_title = { has_law = chivalry_mobilization_2 } }
					}
					AND = {
						OR = {
							wealth = 400
						}
						ROOT = {  primary_title = { has_law = chivalry_mobilization_3 } }
					}
					AND = {
						OR = {
							wealth = 500
						}
						ROOT = {  primary_title = { has_law = chivalry_mobilization_4 } }
					}
				}
			}
			character_event = { id = CHI.3731 }
		}
	}
}

#Gov/title hire merc client
character_event = {
	id = CHI.3731
	hide_window = yes
	# border = GFX_event_normal_frame_war_chivalry
	# picture = GFX_evt_large_army
	# desc = EVTDESC_CHI_373
	
	is_triggered_only = yes
	
	immediate = {
		FROM = { letter_event = { id = CHI.3732 } }
	}
}

#Gov/title hired merc
letter_event = {
	id = CHI.3732
	border = GFX_event_letter_frame_war_chivalry
	# picture = GFX_evt_large_army
	desc = EVTDESC_CHI_3732
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA_CHI_3732
		if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_1 }
			}
			wealth = 200
			FROM = { wealth = -200 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_2 }
			}
			wealth = 300
			FROM = { wealth = -300 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_3 }
			}
			wealth = 400
			FROM = { wealth = -400 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_4 }
			}
			wealth = 500
			FROM = { wealth = -500 }
		}
		if = {
			limit = {
				OR = {
					FROM = { NOT = { religion_group = ROOT } }
					FROM = { is_heresy_of = ROOT }
				}
			}
			custom_tooltip = { text = chivalry_merc_help_infidel_tooltip }
			piety = -50
		}
		custom_tooltip = { text = chivalry_hired_pay_tooltip }
		hidden_tooltip = {
		if = {
			limit = {
				FROM = { 
					is_primary_war_defender = yes 
					any_war = {
						attacker = {
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
				}
			}
			FROM = { 
				any_war = {
					limit = {
						PREV = {  is_primary_war_defender = yes }
						attacker = {
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					ROOT = { join_defender_wars = PREV }
				}
			}
		}
		else = {
			FROM = { 
				any_war = {
					limit = {
						PREV = {  is_primary_war_attacker = yes }
						defender = { 
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					ROOT = { join_attacker_wars = PREV }
				}
			}
		}
			FROM = {
				add_character_modifier = {
					modifier = chivalry_your_client
					duration = 7200
					inherit = yes
					hidden = yes
				}
			}
			# set_character_flag = chivalry_first_year_hired
		}
		character_event = { id = CHI.3750 days = 30 } #check if ended
		character_event = { id = CHI.3751 days = 360 } #ping check contribution
	}
	option = {
		name = EVTOPTD_CHI_3732
		if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_1 }
			}
			wealth = 100
			FROM = { wealth = -100 }
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = mercenary_boats
				troops =
				{
					galleys = { 50 50 }
				}
			}
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_2 }
			}
			wealth = 150
			FROM = { wealth = -150 }
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = mercenary_boats
				troops =
				{
					galleys = { 75 75 }
				}
			}
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_3 }
			}
			wealth = 200
			FROM = { wealth = -200 }
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = mercenary_boats
				troops =
				{
					galleys = { 100 100 }
				}
			}
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_4 }
			}
			wealth = 250
			FROM = { wealth = -250 }
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = mercenary_boats
				troops =
				{
					galleys = { 125 125 }
				}
			}
		}
		custom_tooltip = { text = chivalry_hired_pay_tooltip }
		if = {
			limit = {
				OR = {
					FROM = { NOT = { religion_group = ROOT } }
					FROM = { is_heresy_of = ROOT }
				}
			}
			custom_tooltip = { text = chivalry_merc_help_infidel_tooltip }
			piety = -50
		}
		hidden_tooltip = {
		if = {
			limit = {
				FROM = { 
					is_primary_war_defender = yes 
					any_war = {
						attacker = {
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
				}
			}
			FROM = { 
				any_war = {
					limit = {
						PREV = {  is_primary_war_defender = yes }
						attacker = {
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					ROOT = { join_defender_wars = PREV }
				}
			}
		}
		else = {
			FROM = { 
				any_war = {
					limit = {
						PREV = {  is_primary_war_attacker = yes }
						defender = { 
							NOR = {
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					ROOT = { join_attacker_wars = PREV }
				}
			}
		}
			FROM = {
				add_character_modifier = {
					modifier = chivalry_your_client
					duration = 7200
					inherit = yes
					hidden = yes
				}
			}
			# set_character_flag = chivalry_first_year_hired
		}
		character_event = { id = CHI.3750 days = 30 } #check if ended
		character_event = { id = CHI.3751 days = 360 } #ping check contribution
	}
	option = {
		name = EVTOPTB_CHI_3732
		# trigger = { war = no }
		if = {
			limit = {
				distance = { who = FROM value = 800 }
			}
			prestige = -50
		}
		else_if = {
			limit = {
				distance = { who = FROM value = 600 }
			}
			prestige = -100
		}
		else_if = {
			limit = {
				distance = { who = FROM value = 400 }
			}
			prestige = -150
		}
		else_if = {
			limit = {
				distance = { who = FROM value = 200 }
			}
			prestige = -200
		}
		else = {
			prestige = -250
		}
	}
	# option = {
		# name = EVTOPTC_CHI_3732
		# trigger = { war = yes }
		# prestige = -50
	# }
}

#Gov/title hire holy
character_event = {
	id = CHI.3733
	hide_window = yes
	# border = GFX_event_normal_frame_war_chivalry
	# picture = GFX_evt_large_army
	# desc = EVTDESC_CHI_373
	
	is_triggered_only = yes
	
	ai = no
	
	trigger = {
		has_holy_order_government = yes
		war = no
		OR = {
			NOT = { has_character_flag = chivalry_recently_hired }
			had_character_flag = { flag = chivalry_recently_hired days = 360 }
		}
		NOT = { primary_title = { has_law = chivalry_mobilization_0 } }
		any_playable_ruler = {
			is_within_diplo_range = ROOT
			NOT = { character = ROOT }
			religion = ROOT
			NOT = { primary_title = { temporary = yes } }
			NOT = { is_vassal_or_below = ROOT }
			# in_revolt = no #maybe
			OR = {
				any_war = {
					attacker = {
						character = PREVPREV
						NOT = { war_score = 30 }
					}
					# PREV = { NOT = { war_score = 30 } }
					# PREV = { is_primary_war_attacker = yes }
					defender = { 
						NOR = {
							religion = ROOT
							has_non_aggression_pact_with = ROOT
							is_allied_with = ROOT
							is_liege_of = ROOT
						}
					}
				}
				any_war = {
					defender = {
						character = PREVPREV
						NOT = { war_score = 30 }
					}
					# PREV = { NOT = { war_score = 30 } }
					# PREV = { is_primary_war_defender = yes }
					attacker = {
						NOR = {
							religion = ROOT
							has_non_aggression_pact_with = ROOT
							is_allied_with = ROOT
							is_liege_of = ROOT
						}
					}
				}
			}
			OR = {
				AND = {
					OR = {
						wealth = 50
					}
					ROOT = {  primary_title = { has_law = chivalry_mobilization_1 } }
				}
				AND = {
					OR = {
						wealth = 100
					}
					ROOT = {  primary_title = { has_law = chivalry_mobilization_2 } }
				}
				AND = {
					OR = {
						wealth = 150
					}
					ROOT = {  primary_title = { has_law = chivalry_mobilization_3 } }
				}
				AND = {
					OR = {
						wealth = 200
					}
					ROOT = {  primary_title = { has_law = chivalry_mobilization_4 } }
				}
			}
		}
	}
	
	immediate = {
		random_playable_ruler = {
			limit = {
				is_within_diplo_range = ROOT
				NOT = { character = ROOT }
				religion = ROOT
				NOT = { primary_title = { temporary = yes } }
				NOT = { is_vassal_or_below = ROOT }
				# in_revolt = no #maybe
				OR = {
					any_war = {
						attacker = {
							character = PREVPREV
							NOT = { war_score = 30 }
						}
						# PREV = { NOT = { war_score = 30 } }
						# PREV = { is_primary_war_attacker = yes }
						defender = { 
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					any_war = {
						defender = {
							character = PREVPREV
							NOT = { war_score = 30 }
						}
						# PREV = { NOT = { war_score = 30 } }
						# PREV = { is_primary_war_defender = yes }
						attacker = {
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
				}
				OR = {
					AND = {
						OR = {
							wealth = 50
						}
						ROOT = {  primary_title = { has_law = chivalry_mobilization_1 } }
					}
					AND = {
						OR = {
							wealth = 100
						}
						ROOT = {  primary_title = { has_law = chivalry_mobilization_2 } }
					}
					AND = {
						OR = {
							wealth = 150
						}
						ROOT = {  primary_title = { has_law = chivalry_mobilization_3 } }
					}
					AND = {
						OR = {
							wealth = 200
						}
						ROOT = {  primary_title = { has_law = chivalry_mobilization_4 } }
					}
				}
			}
			character_event = { id = CHI.3734 }
		}
	}
}

#Gov/title hire holy client
character_event = {
	id = CHI.3734
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		FROM = { letter_event = { id = CHI.3735 } }
	}
}

#Gov/title hired holy
letter_event = {
	id = CHI.3735
	border = GFX_event_letter_frame_war_chivalry
	# picture = GFX_evt_large_army
	desc = EVTDESC_CHI_3735
	
	is_triggered_only = yes
	option = {
		name = EVTOPTA_CHI_3735
		if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_1 }
			}
			wealth = 50
			FROM = { wealth = -50 }
			custom_tooltip = { text = chivalry_pay_holy_tooltip }
			wealth = 100
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_2 }
			}
			wealth = 100
			FROM = { wealth = -100 }
			custom_tooltip = { text = chivalry_pay_holy_tooltip }
			wealth = 150
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_3 }
			}
			wealth = 150
			FROM = { wealth = -150 }
			custom_tooltip = { text = chivalry_pay_holy_tooltip }
			wealth = 200
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_4 }
			}
			wealth = 200
			FROM = { wealth = -200 }
			custom_tooltip = { text = chivalry_pay_holy_tooltip }
			wealth = 250
		}		
		piety = 100
		custom_tooltip = { text = chivalry_hired_pay_tooltip }
		hidden_tooltip = {
		if = {
			limit = {
				FROM = { 
					is_primary_war_defender = yes 
					any_war = {
						attacker = {
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
				}
			}
			FROM = { 
				any_war = {
					limit = {
						PREV = {  is_primary_war_defender = yes }
						attacker = {
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					ROOT = { join_defender_wars = PREV }
				}
			}
		}
		else = {
			FROM = { 
				any_war = {
					limit = {
						PREV = {  is_primary_war_attacker = yes }
						defender = { 
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					ROOT = { join_attacker_wars = PREV }
				}
			}
		}
			FROM = {
				add_character_modifier = {
					modifier = chivalry_your_client
					duration = 7200
					inherit = yes
					hidden = yes
				}
			}
			# set_character_flag = chivalry_first_year_hired
		}
		character_event = { id = CHI.3750 days = 30 } #check if ended
		character_event = { id = CHI.3751 days = 360 } #ping check contribution 
	}
	option = {
		name = EVTOPTD_CHI_3735
		if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_1 }
			}
			wealth = 50
			FROM = { wealth = -50 }
			custom_tooltip = { text = chivalry_pay_holy_tooltip }
			wealth = 75
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = mercenary_boats
				troops =
				{
					galleys = { 50 50 }
				}
			}
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_2 }
			}
			wealth = 100
			FROM = { wealth = -100 }
			custom_tooltip = { text = chivalry_pay_holy_tooltip }
			wealth = 75
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = mercenary_boats
				troops =
				{
					galleys = { 75 75 }
				}
			}
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_3 }
			}
			wealth = 150
			FROM = { wealth = -150 }
			custom_tooltip = { text = chivalry_pay_holy_tooltip }
			wealth = 100
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = mercenary_boats
				troops =
				{
					galleys = { 100 100 }
				}
			}
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_4 }
			}
			wealth = 200
			FROM = { wealth = -200 }
			custom_tooltip = { text = chivalry_pay_holy_tooltip }
			wealth = 125
			spawn_fleet = {
				province = closest # closest sea zone
				owner = ROOT
				disband_on_peace = yes
				earmark = mercenary_boats
				troops =
				{
					galleys = { 125 125 }
				}
			}
		}		
		piety = 100
		custom_tooltip = { text = chivalry_hired_pay_tooltip }
		hidden_tooltip = {
		if = {
			limit = {
				FROM = { 
					is_primary_war_defender = yes 
					any_war = {
						attacker = {
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
				}
			}
			FROM = { 
				any_war = {
					limit = {
						PREV = {  is_primary_war_defender = yes }
						attacker = {
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					ROOT = { join_defender_wars = PREV }
				}
			}
		}
		else = {
			FROM = { 
				any_war = {
					limit = {
						PREV = {  is_primary_war_attacker = yes }
						defender = { 
							NOR = {
								religion = ROOT
								has_non_aggression_pact_with = ROOT
								is_allied_with = ROOT
								is_liege_of = ROOT
							}
						}
					}
					ROOT = { join_attacker_wars = PREV }
				}
			}
		}
			FROM = {
				add_character_modifier = {
					modifier = chivalry_your_client
					duration = 7200
					inherit = yes
					hidden = yes
				}
			}
			# set_character_flag = chivalry_first_year_hired
		}
		character_event = { id = CHI.3750 days = 30 } #check if ended
		character_event = { id = CHI.3751 days = 360 } #ping check contribution 
	}
	option = {
		name = EVTOPTB_CHI_3735
		if = {
			limit = {
				distance = { who = FROM value = 800 }
			}
			prestige = -20
			piety = -30
		}
		else_if = {
			limit = {
				distance = { who = FROM value = 600 }
			}
			prestige = -40
			piety = -60
		}
		else_if = {
			limit = {
				distance = { who = FROM value = 400 }
			}
			prestige = -60
			piety = -90
		}
		else_if = {
			limit = {
				distance = { who = FROM value = 200 }
			}
			prestige = -80
			piety = -120
		}
		else = {
			prestige = -100
			piety = -150
		}
	}
	option = {
		name = EVTOPTC_CHI_3735
		trigger = {
			OR = {
				has_pledged_crusade_defense = yes
				has_pledged_crusade_participation = yes
			}
		}
	}
	# option = {
		# name = EVTOPTC_CHI_3735
		# trigger = {
			# ROOT = {
				# any_war = {
					# OR = {
						# attacker = {
							# NOT = { religion = ROOT }
						# }
						# defender = {
							# NOT = { religion = ROOT }
						# }
					# }
				# }
			# }
		# }
		# prestige = -50
	# }
}

#Gov/title hired contribution battle leader
character_event = {
	id = CHI.3740
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	ai = no
	
	
	trigger = {
		has_custom_chivalry_title = yes
		any_war = {
			OR = {
				attacker = { has_character_modifier = chivalry_your_client }
				defender = { has_character_modifier = chivalry_your_client }
			}
		}
		FROM = {
			OR = {
				any_war = {
					OR = {
						any_attacker = { has_character_modifier = chivalry_your_client }
						any_defender = { has_character_modifier = chivalry_your_client }
					}
				}
				liege = {
					any_war = {
						OR = {
							any_attacker = { has_character_modifier = chivalry_your_client }
							any_defender = { has_character_modifier = chivalry_your_client }
						}
					}
				}
				top_liege = {
					any_war = {
						OR = {
							any_attacker = { has_character_modifier = chivalry_your_client }
							any_defender = { has_character_modifier = chivalry_your_client }
						}
					}
				}
			}
		}
	}
	
	immediate = {
		FROM = {
			any_war = {
				any_attacker = { 
					limit = { has_character_modifier = chivalry_your_client }
					save_event_target_as = chivalry_your_merc_client
				}
				any_defender = {
					limit = { has_character_modifier = chivalry_your_client }
					save_event_target_as = chivalry_your_merc_client
				}
			}
			liege = {
				any_war = {
					any_attacker = {
						limit = { has_character_modifier = chivalry_your_client }
						save_event_target_as = chivalry_your_merc_client
					}
					any_defender =  {
						limit = { has_character_modifier = chivalry_your_client }
						save_event_target_as = chivalry_your_merc_client
					}	
				}
			}
			top_liege = {
				any_war = {
					any_attacker = {
						limit = { has_character_modifier = chivalry_your_client }
						save_event_target_as = chivalry_your_merc_client
					}
					any_defender =  {
						limit = { has_character_modifier = chivalry_your_client }
						save_event_target_as = chivalry_your_merc_client
					}	
				}
			}
		}
		if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_1 }
			}
			wealth = 10
			event_target:chivalry_your_merc_client = { wealth = -10 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_2 }
			}
			wealth = 15
			event_target:chivalry_your_merc_client = { wealth = -15 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_3 }
			}
			wealth = 20
			event_target:chivalry_your_merc_client = { wealth = -20 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_4 }
			}
			wealth = 25
			event_target:chivalry_your_merc_client = { wealth = -25 }
		}
		# change_variable = { which = "chivalry_hired_participation" value = 1 }
		# change_variable = { which = "chivalry_hired_participation_leader" value = 1 }	
	}
}

#Gov/title hired contribution battle major
character_event = {
	id = CHI.3741
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	ai = no
	
	
	trigger = {
		has_custom_chivalry_title = yes
		any_war = {
			OR = {
				attacker = { has_character_modifier = chivalry_your_client }
				defender = { has_character_modifier = chivalry_your_client }
			}
		}
		FROM = {
			OR = {
				any_war = {
					OR = {
						any_attacker = { has_character_modifier = chivalry_your_client }
						any_defender = { has_character_modifier = chivalry_your_client }
					}
				}
				liege = {
					any_war = {
						OR = {
							any_attacker = { has_character_modifier = chivalry_your_client }
							any_defender = { has_character_modifier = chivalry_your_client }
						}
					}
				}
				top_liege = {
					any_war = {
						OR = {
							any_attacker = { has_character_modifier = chivalry_your_client }
							any_defender = { has_character_modifier = chivalry_your_client }
						}
					}
				}
			}
		}
	}
	
	immediate = {
		FROM = {
			any_war = {
				any_attacker = { 
					limit = { has_character_modifier = chivalry_your_client }
					save_event_target_as = chivalry_your_merc_client
				}
				any_defender = {
					limit = { has_character_modifier = chivalry_your_client }
					save_event_target_as = chivalry_your_merc_client
				}
			}
			liege = {
				any_war = {
					any_attacker = {
						limit = { has_character_modifier = chivalry_your_client }
						save_event_target_as = chivalry_your_merc_client
					}
					any_defender =  {
						limit = { has_character_modifier = chivalry_your_client }
						save_event_target_as = chivalry_your_merc_client
					}	
				}
			}
			top_liege = {
				any_war = {
					any_attacker = {
						limit = { has_character_modifier = chivalry_your_client }
						save_event_target_as = chivalry_your_merc_client
					}
					any_defender =  {
						limit = { has_character_modifier = chivalry_your_client }
						save_event_target_as = chivalry_your_merc_client
					}
				}
			}
		}
		if = {
			limit = { #forget check if counted twice
				primary_title = { has_law = chivalry_mobilization_1 }
			}
			wealth = 20
			event_target:chivalry_your_merc_client = { wealth = -20 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_2 }
			}
			wealth = 30
			event_target:chivalry_your_merc_client = { wealth = -30 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_3 }
			}
			wealth = 40
			event_target:chivalry_your_merc_client = { wealth = -40 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_4 }
			}
			wealth = 50
			event_target:chivalry_your_merc_client = { wealth = -50 }
		}
		# change_variable = { which = "chivalry_hired_participation" value = 1 }
		# change_variable = { which = "chivalry_hired_participation_major" value = 1 }	
	}
}

#Gov/title hired contribution battle owner
character_event = {
	id = CHI.3742
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	ai = no
	
	trigger = {
		has_custom_chivalry_title = yes
		any_war = {
			OR = {
				attacker = { has_character_modifier = chivalry_your_client }
				defender = { has_character_modifier = chivalry_your_client }
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				any_war	= {
					OR = {
						attacker = {
							has_character_modifier = chivalry_your_client
							war_with = FROM
						}
						defender = {
							has_character_modifier = chivalry_your_client
							war_with = FROM
						}
					}
				}
			}
			any_war	= {
				any_attacker = {
					limit = {
						has_character_modifier = chivalry_your_client
						war_with = FROM
					}
					save_event_target_as = chivalry_your_merc_client
				}
				any_defender = {
					limit = {
						has_character_modifier = chivalry_your_client
						war_with = FROM
					}
					save_event_target_as = chivalry_your_merc_client
				}
			}
			if = {
				limit = {
					primary_title = { has_law = chivalry_mobilization_1 }
				}
				wealth = 20
				event_target:chivalry_your_merc_client = { wealth = -20 }
			}
			else_if = {
				limit = {
					primary_title = { has_law = chivalry_mobilization_2 }
				}
				wealth = 30
				event_target:chivalry_your_merc_client = { wealth = -30 }
			}
			else_if = {
				limit = {
					primary_title = { has_law = chivalry_mobilization_3 }
				}
				wealth = 40
				event_target:chivalry_your_merc_client = { wealth = -40 }
			}
			else_if = {
				limit = {
					primary_title = { has_law = chivalry_mobilization_4 }
				}
				wealth = 50
				event_target:chivalry_your_merc_client = { wealth = -50 }
			}
			# change_variable = { which = "chivalry_hired_participation_battle" value = 1 }
		}
	}
}

#Gov/title hired contribution siege leader
character_event = {
	id = CHI.3743
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	ai = no
	
	trigger = {
		has_custom_chivalry_title = yes
		any_war = {
			OR = {
				attacker = { has_character_modifier = chivalry_your_client }
				defender = { has_character_modifier = chivalry_your_client }
			}
		}
		FROM = {
			OR = {
				owner = {
					any_war = {
						OR = {
							attacker = { has_character_modifier = chivalry_your_client }
							defender = { has_character_modifier = chivalry_your_client }
						}
					}
				}
				owner = {
					liege = {
						any_war = {
							OR = {
								attacker = { has_character_modifier = chivalry_your_client }
								defender = { has_character_modifier = chivalry_your_client }
							}
						}
					}
				}
				owner = {
					top_liege = {
						any_war = {
							OR = {
								attacker = { has_character_modifier = chivalry_your_client }
								defender = { has_character_modifier = chivalry_your_client }
							}
						}
					}
				}
			}
		}
	}
	
	immediate = {
		FROM = {
			owner = {
				any_war = {
						any_attacker = { 
							limit = { has_character_modifier = chivalry_your_client }
							save_event_target_as = chivalry_your_merc_client
						}
						any_defender = {
							limit = { has_character_modifier = chivalry_your_client }
							save_event_target_as = chivalry_your_merc_client
						}
				}
			}
			owner = {
				liege = {
					any_war = {
						any_attacker = {
							limit = { has_character_modifier = chivalry_your_client }
							save_event_target_as = chivalry_your_merc_client
						}
						any_defender =  {
							limit = { has_character_modifier = chivalry_your_client }
							save_event_target_as = chivalry_your_merc_client
						}
					}
				}
			}
			owner = {
				top_liege = {
					any_war = {
						any_attacker = {
							limit = { has_character_modifier = chivalry_your_client }
							save_event_target_as = chivalry_your_merc_client
						}
						any_defender =  {
							limit = { has_character_modifier = chivalry_your_client }
							save_event_target_as = chivalry_your_merc_client
						}
					}
				}
			}
		}
		if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_1 }
			}
			wealth = 10
			event_target:chivalry_your_merc_client = { wealth = -10 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_2 }
			}
			wealth = 15
			event_target:chivalry_your_merc_client = { wealth = -15 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_3 }
			}
			wealth = 20
			event_target:chivalry_your_merc_client = { wealth = -20 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_4 }
			}
			wealth = 25
			event_target:chivalry_your_merc_client = { wealth = -25 }
		}
		# change_variable = { which = "chivalry_hired_participation" value = 1 }
		# change_variable = { which = "chivalry_hired_participation_siege_leader" value = 1 }
	}
}

#Gov/title hired contribution siege owner
character_event = {
	id = CHI.3744
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	ai = no
	
	trigger = {
		has_custom_chivalry_title = yes
		any_war = {
			OR = {
				attacker = { has_character_modifier = chivalry_your_client }
				defender = { has_character_modifier = chivalry_your_client }
			}
		}
		FROM = {
			OR = {
				owner = {
					any_war = {
						OR = {
							attacker = { has_character_modifier = chivalry_your_client }
							defender = { has_character_modifier = chivalry_your_client }
						}
					}
				}
				owner = {
					liege = {
						any_war = {
							OR = {
								attacker = { has_character_modifier = chivalry_your_client }
								defender = { has_character_modifier = chivalry_your_client }
							}
						}
					}
				}
				owner = {
					top_liege = {
						any_war = {
							OR = {
								attacker = { has_character_modifier = chivalry_your_client }
								defender = { has_character_modifier = chivalry_your_client }
							}
						}
					}
				}
			}
		}
	}
	
	immediate = {
		FROM = {
				owner = {
					any_war = {
						any_attacker = { 
							limit = { has_character_modifier = chivalry_your_client }
							save_event_target_as = chivalry_your_merc_client
						}
						any_defender = {
							limit = { has_character_modifier = chivalry_your_client }
							save_event_target_as = chivalry_your_merc_client
						}
					}
				}
				owner = {
					liege = {
						any_war = {
							any_attacker = {
								limit = { has_character_modifier = chivalry_your_client }
								save_event_target_as = chivalry_your_merc_client
							}
							any_defender =  {
								limit = { has_character_modifier = chivalry_your_client }
								save_event_target_as = chivalry_your_merc_client
							}	
						}
					}
				}
				owner = {
					top_liege = {
						any_war = {
							any_attacker = {
								limit = { has_character_modifier = chivalry_your_client }
								save_event_target_as = chivalry_your_merc_client
							}
							any_defender =  {
								limit = { has_character_modifier = chivalry_your_client }
								save_event_target_as = chivalry_your_merc_client
							}	
						}
					}
				}
		}
		if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_1 }
			}
			wealth = 20
			event_target:chivalry_your_merc_client = { wealth = -20 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_2 }
			}
			wealth = 30
			event_target:chivalry_your_merc_client = { wealth = -30 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_3 }
			}
			wealth = 40
			event_target:chivalry_your_merc_client = { wealth = -40 }
		}
		else_if = {
			limit = {
				primary_title = { has_law = chivalry_mobilization_4 }
			}
			wealth = 50
			event_target:chivalry_your_merc_client = { wealth = -50 }
		}
		# change_variable = { which = "chivalry_hired_participation" value = 1 }
		# change_variable = { which = "chivalry_hired_participation_siege_owner" value = 1 }
	}
}

#Gov/title hired yearly contribution check
character_event = {
	id = CHI.375
	hide_window = yes
	
	is_triggered_only = yes
	
	only_playable = yes
	
	# trigger = {
		# has_character_modifier = chivalry_your_client
		# NOT = { has_character_modifier = chivalry_your_client }
	# }
	
	immediate = {
		FROM = { letter_event = { id = CHI.376 } }
		# any_war = {
			# any_attacker = {
				# limit = { 
					# has_custom_chivalry_title = yes 
				# }
				# letter_event = { id = CHI.376 }
			# }
			# any_defender = {
				# limit = { 
					# has_custom_chivalry_title = yes 
				# }
				# letter_event = { id = CHI.376 }
			# }
		# }
	}
}

#Gov/title hired war check if ended end
character_event = {
	id = CHI.3750
	hide_window = yes
	
	is_triggered_only = yes
	
	ai = no
	
	immediate = {
		if = {
			limit = {
				any_war = {
					OR = {
						any_attacker = {
							is_primary_war_attacker = yes 
							has_character_modifier = chivalry_your_client
						}
						any_defender = {
							is_primary_war_defender = yes 
							has_character_modifier = chivalry_your_client
						}
					}
				}
			}
			character_event = { id = CHI.3750 days = 5 }
		}
		else = {
			any_playable_ruler = {
				limit = {
					has_character_modifier = chivalry_your_client
				}
				character_event = { id = CHI.3754 }
			}
		}
	}
}

#Gov/title hired check contri ping
character_event = {
	id = CHI.3751
	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		any_war = {
			OR = {
				any_attacker = {
					is_primary_war_attacker = yes 
					has_character_modifier = chivalry_your_client
				}
				any_defender = {
					is_primary_war_defender = yes 
					has_character_modifier = chivalry_your_client
				}
			}
		}
	}
	
	immediate = {
		any_playable_ruler = {
			limit = {
				has_character_modifier = chivalry_your_client
			}
			character_event = { id = CHI.375 }
		}
		character_event = { id = CHI.3751 days = 180 } #bi yearly check after 1 year
	}
}

#Gov/title war result FROM ping
character_event = {
	id = CHI.3754
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		# event_target:chivalry_merc_character = { letter_event = { id = CHI.3760 } }
		FROM = { letter_event = { id = CHI.3760 } }
	}
}

#Gov/title hired yearly pay
letter_event = {
	id = CHI.376
	desc = EVTDESC_CHI_376_NONE
	border = GFX_event_letter_frame_war_chivalry
	
	# desc = { #no score
		# trigger = {
			# NOR = {
				# has_character_flag = chivalry_hired_won
				# has_character_flag = chivalry_hired_white
				# has_character_flag = chivalry_hired_lose
				# has_character_flag = chivalry_hired_invalid
			# }
			# ROOT = { check_variable = { which = chivalry_hired_participation value = 0 } }
			# ROOT = { NOT = { check_variable = { which = chivalry_hired_participation value = 0 } } }
		# }
		# text = EVTDESC_CHI_376_NONE
	# }
	# desc = { #bad
		# trigger = {
			# NOR = {
				# has_character_flag = chivalry_hired_won
				# has_character_flag = chivalry_hired_white
				# has_character_flag = chivalry_hired_lose
				# has_character_flag = chivalry_hired_invalid
			# }
			# ROOT = { check_variable = { which = chivalry_hired_participation value = 1 } }
			# ROOT = { NOT = { check_variable = { which = chivalry_hired_participation value = 6 } } }
		# }
		# text = EVTDESC_CHI_376_BAD
	# }
	# desc = { #ok
		# trigger = {
			# NOR = {
				# has_character_flag = chivalry_hired_won
				# has_character_flag = chivalry_hired_white
				# has_character_flag = chivalry_hired_lose
				# has_character_flag = chivalry_hired_invalid
			# }
			# ROOT = { check_variable = { which = chivalry_hired_participation value = 6 } }
			# ROOT = { NOT = { check_variable = { which = chivalry_hired_participation value = 16 } } }
		# }
		# text = EVTDESC_CHI_376_OK
	# }
	# desc = { #good
		# trigger = {
			# NOR = {
				# has_character_flag = chivalry_hired_won
				# has_character_flag = chivalry_hired_white
				# has_character_flag = chivalry_hired_lose
				# has_character_flag = chivalry_hired_invalid
			# }
			# ROOT = { check_variable = { which = chivalry_hired_participation value = 16 } }
		# }
		# text = EVTDESC_CHI_376_GOOD
	# }
	
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			any_war = {
				days_since_last_hostile_action = {
					who = ROOT	# The character whose activity is being checked
					days = 201  # Number of days since last battle participation or offensive siege
				}
			}
		}
	}
	
	option = { #PAYYYY
		name = EVTOPTB_CHI_376
		# name = {
			# trigger = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 1 } }
			# }
			# text = EVTOPTA_CHI_376
		# }
		# name = {
			# trigger = {
				# ROOT = { NOT = {check_variable = { which = chivalry_hired_participation value = 1 } } }
			# }
			# text = EVTOPTB_CHI_376
		# }
		# if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 22 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 280
				# FROM = { wealth = -280 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 300
				# FROM = { wealth = -300 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 320
				# FROM = { wealth = -320 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 340
				# FROM = { wealth = -340 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 20 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 240
				# FROM = { wealth = -240 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 260
				# FROM = { wealth = -260 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 280
				# FROM = { wealth = -280 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 300
				# FROM = { wealth = -300 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 18 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 200
				# FROM = { wealth = -200 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 220
				# FROM = { wealth = -220 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 240
				# FROM = { wealth = -240 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 260
				# FROM = { wealth = -260 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 16 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 160
				# FROM = { wealth = -160 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 180
				# FROM = { wealth = -180 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 200
				# FROM = { wealth = -200 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 220
				# FROM = { wealth = -220 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 14 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 120
				# FROM = { wealth = -120 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 140
				# FROM = { wealth = -140 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 160
				# FROM = { wealth = -160 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 180
				# FROM = { wealth = -180 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 12 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 80
				# FROM = { wealth = -80 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 100
				# FROM = { wealth = -100 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 120
				# FROM = { wealth = -120 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 140
				# FROM = { wealth = -140 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 10 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 60
				# FROM = { wealth = -60 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 70
				# FROM = { wealth = -70 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 80
				# FROM = { wealth = -80 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 90
				# FROM = { wealth = -90 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 7 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 40
				# FROM = { wealth = -40 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 50
				# FROM = { wealth = -50 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 60
				# FROM = { wealth = -60 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 70
				# FROM = { wealth = -70 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 4 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 20
				# FROM = { wealth = -20 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 30
				# FROM = { wealth = -30 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 40
				# FROM = { wealth = -40 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 50
				# FROM = { wealth = -50 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 1 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 10
				# FROM = { wealth = -10 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 15
				# FROM = { wealth = -15 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 20
				# FROM = { wealth = -20 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 25
				# FROM = { wealth = -25 }
			# }
		# }
		# else_if = {
		if = {
			limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 0 } }
				government = mercenary_government
				war = yes
				FROM = {
					any_war = {
						days_since_last_hostile_action = {
							who = ROOT
							days = 200
						}
					}
				}
			}
			prestige = -100
		}
		else_if = {
			limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 0 } }
				has_holy_order_government = yes
				war = yes
				FROM = {
					any_war = {
						days_since_last_hostile_action = {
							who = ROOT	# The character whose activity is being checked
							days = 200   # Number of days since last battle participation or offensive siege
						}
					}
				}
			}
			piety = -100
		}
		else = {
			prestige = -50
		}
	}
	# after = {
		# clr_character_flag = chivalry_first_year_hired
		# hidden_tooltip = {
			# ROOT = { set_variable = { which = "chivalry_hired_participation" value = 0 } }
		# }
	# }
}

#Gov/title hired end pay
letter_event = {
	id = CHI.3760
	desc = EVTDESC_CHI_3760
	border = GFX_event_letter_frame_war_chivalry
	
	# show_from_from  = yes
	
	# desc = {
		# trigger = {
			# has_character_flag = chivalry_hired_won
		# }
		# text = EVTDESC_CHI_3760_WON
	# }
	# desc = {
		# trigger = {
			# has_character_flag = chivalry_hired_white
		# }
		# text = EVTDESC_CHI_3760_WHITE
	# }
	# desc = {
		# trigger = {
			# has_character_flag = chivalry_hired_lose
		# }
		# text = EVTDESC_CHI_3760_LOSE
	# }
	# desc = {
		# trigger = {
			# has_character_flag = chivalry_hired_invalid
		# }
		# text = EVTDESC_CHI_3760_INVALID
	# }
	
	is_triggered_only = yes
	
	option = { #PAYYYY
		name = EVTOPTA_CHI_3760
		# if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 22 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 280
				# FROM = { wealth = -280 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 300
				# FROM = { wealth = -300 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 320
				# FROM = { wealth = -320 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 340
				# FROM = { wealth = -340 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 20 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 240
				# FROM = { wealth = -240 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 260
				# FROM = { wealth = -260 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 280
				# FROM = { wealth = -280 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 300
				# FROM = { wealth = -300 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 18 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 200
				# FROM = { wealth = -200 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 220
				# FROM = { wealth = -220 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 240
				# FROM = { wealth = -240 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 260
				# FROM = { wealth = -260 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 16 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 160
				# FROM = { wealth = -160 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 180
				# FROM = { wealth = -180 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 200
				# FROM = { wealth = -200 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 220
				# FROM = { wealth = -220 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 14 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 120
				# FROM = { wealth = -120 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 140
				# FROM = { wealth = -140 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 160
				# FROM = { wealth = -160 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 180
				# FROM = { wealth = -180 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 12 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 80
				# FROM = { wealth = -80 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 100
				# FROM = { wealth = -100 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 120
				# FROM = { wealth = -120 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 140
				# FROM = { wealth = -140 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 10 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 60
				# FROM = { wealth = -60 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 70
				# FROM = { wealth = -70 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 80
				# FROM = { wealth = -80 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 90
				# FROM = { wealth = -90 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 7 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 40
				# FROM = { wealth = -40 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 50
				# FROM = { wealth = -50 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 60
				# FROM = { wealth = -60 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 70
				# FROM = { wealth = -70 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 4 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 20
				# FROM = { wealth = -20 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 30
				# FROM = { wealth = -30 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 40
				# FROM = { wealth = -40 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 50
				# FROM = { wealth = -50 }
			# }
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 1 } }
			# }
			# if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_1 }
				# }
				# wealth = 10
				# FROM = { wealth = -10 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_2 }
				# }
				# wealth = 15
				# FROM = { wealth = -15 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_3 }
				# }
				# wealth = 20
				# FROM = { wealth = -20 }
			# }
			# else_if = {
				# limit = {
					# primary_title = { has_law = chivalry_mobilization_4 }
				# }
				# wealth = 25
				# FROM = { wealth = -25 }
			# }
		# }
		# else_if = {
		# if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 0 } }
				# government = mercenary_government
				# war = yes
				# FROM = {
					# any_war = {
						# days_since_last_hostile_action = {
							# who = FROM
							# days = 200
						# }
					# }
				# }
			# }
			# prestige = -100
		# }
		# else_if = {
			# limit = {
				# ROOT = { check_variable = { which = chivalry_hired_participation value = 0 } }
				# has_holy_order_government = yes
				# war = yes
				# FROM = {
					# any_war = {
						# days_since_last_hostile_action = {
							# who = FROM	# The character whose activity is being checked
							# days = 200   # Number of days since last battle participation or offensive siege
						# }
					# }
				# }
			# }
			# piety = -100
		# }
		# else = {
			# wealth = 15
		# }
	}
	after = {
		clr_character_flag = chivalry_hired_won
		clr_character_flag = chivalry_hired_white
		clr_character_flag = chivalry_hired_lose
		clr_character_flag = chivalry_hired_invalid
		clr_character_flag = chivalry_recently_hired
		set_character_flag = chivalry_recently_hired
		# clr_character_flag = chivalry_first_year_hired
		clear_delayed_event = { id = CHI.3751 } #remove any on-going contribution check
		hidden_tooltip = {
			FROM = { remove_character_modifier = chivalry_your_client }
			# ROOT = { set_variable = { which = "chivalry_hired_participation" value = 0 } }
		}
	}
}


##################Broken/Head Trophy
character_event = {
	id = CHI.380

	hide_window = yes
	
	is_triggered_only = yes
	
	trigger = {
		any_artifact = {
			OR = {
				artifact_type = chivalry_item_skull
				artifact_type = chivalry_item_broke
			}
		}
	}

	immediate = {
		if = {
			limit = {
				current_heir = {
					has_fighter_societies_prerequisites = yes
				}
			}
			any_artifact = {
				limit = { 
					OR = {
						artifact_type = chivalry_item_skull
						artifact_type = chivalry_item_broke
					}
				}
				random = {
					chance = 50
					destroy_artifact = yes
				}
			}
		}
		else_if = {
			limit = {
				current_heir = {
					has_fighter_societies_prerequisites = no
				}
			}
			any_artifact = {
				limit = { 
					OR = {
						artifact_type = chivalry_item_skull
						artifact_type = chivalry_item_broke
					}
				}
				random = {
					chance = 90
					destroy_artifact = yes
				}
			}
		}
		else = {
		}
	}
}


##################Arena
character_event = { #Downgrade
	id = CHI.390

	hide_window = yes
	
	is_triggered_only = yes
	
	only_rulers = yes
	
	trigger = {
		any_demesne_province = {
			any_province_holding = { 
				owner = { character = ROOT }
				has_any_arena_modifier = yes
			}
		}
		is_fighter_societies_trigger = no
	}

	immediate = {
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_light_infantry_mod_1
				}
				remove_holding_modifier = chivalry_light_infantry_mod_1
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_light_infantry_mod_2
				}
				remove_holding_modifier = chivalry_light_infantry_mod_2	
				add_holding_modifier = {
					name = chivalry_light_infantry_mod_1
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_light_infantry_mod_3
				}
				remove_holding_modifier = chivalry_light_infantry_mod_3
				add_holding_modifier = {
					name = chivalry_light_infantry_mod_2
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_archers_mod_1
				}
				remove_holding_modifier = chivalry_archers_mod_1
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_archers_mod_2
				}
				remove_holding_modifier = chivalry_archers_mod_2
				add_holding_modifier = {
					name = chivalry_archers_mod_1
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_archers_mod_3
				}
				remove_holding_modifier = chivalry_archers_mod_3
				add_holding_modifier = {
					name = chivalry_archers_mod_2
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_heavy_infantry_mod_1
				}
				remove_holding_modifier = chivalry_heavy_infantry_mod_1
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_heavy_infantry_mod_2
				}
				remove_holding_modifier = chivalry_heavy_infantry_mod_2
				add_holding_modifier = {
					name = chivalry_heavy_infantry_mod_1
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_heavy_infantry_mod_3
				}
				remove_holding_modifier = chivalry_heavy_infantry_mod_3
				add_holding_modifier = {
					name = chivalry_heavy_infantry_mod_2
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_pikemen_mod_1
				}
				remove_holding_modifier = chivalry_pikemen_mod_1
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_pikemen_mod_2
				}
				remove_holding_modifier = chivalry_pikemen_mod_2
				add_holding_modifier = {
					name = chivalry_pikemen_mod_1
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_pikemen_mod_3
				}
				remove_holding_modifier = chivalry_pikemen_mod_3
				add_holding_modifier = {
					name = chivalry_pikemen_mod_2
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_light_cavalry_mod_1
				}
				remove_holding_modifier = chivalry_light_cavalry_mod_1
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_light_cavalry_mod_2
				}
				remove_holding_modifier = chivalry_light_cavalry_mod_2
				add_holding_modifier = {
					name = chivalry_light_cavalry_mod_1
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_light_cavalry_mod_3
				}
				remove_holding_modifier = chivalry_light_cavalry_mod_3
				add_holding_modifier = {
					name = chivalry_light_cavalry_mod_2
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_knights_mod_1
				}
				remove_holding_modifier = chivalry_knights_mod_1
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_knights_mod_2
				}
				remove_holding_modifier = chivalry_knights_mod_2
				add_holding_modifier = {
					name = chivalry_knights_mod_1
					duration = -1
				}
			}
		}
		any_demesne_province = {
			any_province_holding = { 
				limit = {
					owner = { character = ROOT }
					has_holding_modifier = chivalry_knights_mod_3
				}
				remove_holding_modifier = chivalry_knights_mod_3
				add_holding_modifier = {
					name = chivalry_knights_mod_2
					duration = -1
				}
			}
		}
		character_event = { id = CHI.391 } #weird, check forget
	}
}

#Arena downgrading notification
character_event = {
	id = CHI.391
	desc = EVTDESC_CHI_391
	picture = GFX_evt_joust
	border = GFX_event_normal_frame_war_chivalry

	is_triggered_only = yes

	option = {
		name = EVTOPTA_CHI_391
	}
}


##############Holy Castle

#Holy Castle Ping
character_event = {
	id = CHI.400
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { character_event = { id = CHI.401 } }
	}
}

#Holy Castle choice
character_event = {
	id = CHI.401
	desc = EVTDESC_CHI_401
	picture = GFX_evt_magnificent_castle
	border = GFX_event_normal_frame_war_chivalry

	is_triggered_only = yes

	option = { #build in empty holding
		name = EVTOPTA_CHI_401
		trigger = {
			any_demesne_province = {
				has_empty_holding = yes
				NOT = {
					any_province_holding = {
						OR = {
							owner = { primary_title = { holy_order = yes } }
							owner = { liege = { primary_title = { holy_order = yes } } }
						}
					}
				}
			}
		}
		random_demesne_province = {
			limit = { 
				has_empty_holding = yes
				NOT = {
					any_province_holding = {
						OR = {
							owner = { primary_title = { holy_order = yes } }
							owner = { liege = { primary_title = { holy_order = yes } } }
						}
					}
				}
			}
			build_holding = {
				type = castle
				holder = event_target:grand_master_target
			}
			capital_holding = {
				add_holding_modifier = {
					name = chivalry_holy_castle
					duration = -1
				}
			}
		}
		change_society_currency = -700
		piety = 200
		sound_effect = monastic_orders_build_monastery
	}
	
	option = { #no empty holding
		name = EVTOPTB_CHI_401
		trigger = {
			# NOT = {
				# any_demesne_province = {
					# OR = {
						# has_empty_holding = yes
						# has_settlement_construction = yes
					# }
				# }
			# }
			any_demesne_province = {
				has_dlc = "Reapers"
				has_province_modifier = prosperity_modifier_3
				has_empty_holding = no
				NOT = {
					num_of_max_settlements = 7
				}
				NOT = {
					any_province_holding = {
						OR = {
							owner = { primary_title = { holy_order = yes } }
							owner = { liege = { primary_title = { holy_order = yes } } }
						}
					}
				}
			}
		}
		random_demesne_province = {
			limit = { 
				has_province_modifier = prosperity_modifier_3
				has_empty_holding = no
				NOT = {
					num_of_max_settlements = 7
				}
				NOT = {
					any_province_holding = {
						OR = {
							owner = { primary_title = { holy_order = yes } }
							owner = { liege = { primary_title = { holy_order = yes } } }
						}
					}
				}
			}
			add_holding_slot = 1
			build_holding = {
				type = castle
				holder = event_target:grand_master_target
			}
			capital_holding = {
				add_holding_modifier = {
					name = chivalry_holy_castle
					duration = -1
				}
			}
		}
		scaled_wealth = { value = -2.5 min = -750 }
		change_society_currency = -700
		piety = 200
		sound_effect = monastic_orders_build_monastery
	}
	
	option = { #nevermind
		name = EVTOPTD_CHI_401
	}
	
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

#Holy Castle removal
character_event = {
	id = CHI.402
	desc = EVTDESC_CHI_402
	picture = GFX_evt_crusaders
	border = GFX_event_normal_frame_war_chivalry

	is_triggered_only = yes

	only_playable = yes
	
	trigger = { 
		any_demesne_province = {
			capital_holding = {
				has_holding_modifier = chivalry_holy_castle
			}
			NOT = {
				any_province_holding = {
					OR = {
						owner = { primary_title = { holy_order = yes } }
						owner = { liege = { primary_title = { holy_order = yes } } }
					}
				}
			}
		}
	}
	
	option = {
		name = EVTOPTA_CHI_401
		any_demesne_province = {
			limit = { 
				capital_holding = {
					has_holding_modifier = chivalry_holy_castle
				}
				NOT = {
					any_province_holding = {
						OR = {
							owner = { primary_title = { holy_order = yes } }
							owner = { liege = { primary_title = { holy_order = yes } } }
						}
					}
				}
			}
			capital_holding = {
				remove_holding_modifier = chivalry_holy_castle
			}
		}
		piety = -100
	}
}

#Holy Castle Settlement Ping
character_event = {
	id = CHI.403
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROMFROM = { character_event = { id = CHI.404 } }
	}
}

#Holy Castle province choice
character_event = {
	id = CHI.404
	desc = EVTDESC_CHI_401
	picture = GFX_evt_magnificent_castle
	border = GFX_event_normal_frame_war_chivalry

	is_triggered_only = yes

	option = { #build in empty holding
		name = EVTOPTA_CHI_401
		trigger = {
			event_target:province_target = {
				has_empty_holding = yes
				NOT = {
					any_province_holding = {
						OR = {
							owner = { primary_title = { holy_order = yes } }
							owner = { liege = { primary_title = { holy_order = yes } } }
						}
					}
				}
			}
		}
		event_target:province_target = {
			# limit = { 
				# has_empty_holding = yes
				# NOT = {
					# any_province_holding = {
						# OR = {
							# owner = { primary_title = { holy_order = yes } }
							# owner = { liege = { primary_title = { holy_order = yes } } }
						# }
					# }
				# }
			# }
			build_holding = {
				type = castle
				holder = event_target:grand_master_target
			}
			capital_holding = {
				add_holding_modifier = {
					name = chivalry_holy_castle
					duration = -1
				}
			}
		}
		change_society_currency = -700
		piety = 200
		sound_effect = monastic_orders_build_monastery
	}
	
	option = { #no empty holding
		name = EVTOPTB_CHI_401
		trigger = {
			# NOT = {
				# any_demesne_province = {
					# OR = {
						# has_empty_holding = yes
						# has_settlement_construction = yes
					# }
				# }
			# }
			event_target:province_target = {
				has_dlc = "Reapers"
				has_province_modifier = prosperity_modifier_3
				has_empty_holding = no
				NOT = {
					num_of_max_settlements = 7
				}
				NOT = {
					any_province_holding = {
						OR = {
							owner = { primary_title = { holy_order = yes } }
							owner = { liege = { primary_title = { holy_order = yes } } }
						}
					}
				}
			}
		}
		event_target:province_target = {
			# limit = { 
				# has_province_modifier = prosperity_modifier_3
				# has_empty_holding = no
				# NOT = {
					# num_of_max_settlements = 7
				# }
				# NOT = {
					# any_province_holding = {
						# OR = {
							# owner = { primary_title = { holy_order = yes } }
							# owner = { liege = { primary_title = { holy_order = yes } } }
						# }
					# }
				# }
			# }
			add_holding_slot = 1
			build_holding = {
				type = castle
				holder = event_target:grand_master_target
			}
			capital_holding = {
				add_holding_modifier = {
					name = chivalry_holy_castle
					duration = -1
				}
			}
		}
		scaled_wealth = { value = -2.5 min = -750 }
		change_society_currency = -700
		piety = 200
		sound_effect = monastic_orders_build_monastery
	}
	
	option = { #give castle
		name = EVTOPTC_CHI_401
		trigger = {
			event_target:province_target = {
				any_province_holding = {
					is_capital = no
					holding_type = castle
					owner = { character = ROOT }
				}
				NOT = {
					any_province_holding = {
						OR = {
							owner = { primary_title = { holy_order = yes } }
							owner = { liege = { primary_title = { holy_order = yes } } }
						}
					}
				}
			}
		}
		event_target:province_target = {
			random_province_holding = {
				limit = { 
					is_capital = no
					holding_type = castle
					owner = { character = ROOT }
				}
				gain_title = event_target:grand_master_target
			}
			capital_holding = {
				add_holding_modifier = {
					name = chivalry_holy_castle
					duration = -1
				}
			}
		}
		scaled_wealth = { value = 1 min = 100 }
		change_society_currency = -700
		piety = 300
		sound_effect = monastic_orders_build_monastery
	}

	option = { #nevermind
		name = EVTOPTD_CHI_401
	}
	
	after = {
		clr_character_flag = chivalry_block_currency
	}
}

##################Gym training
character_event = {
	id = CHI.410
	picture = GFX_evt_noble_in_castle
	border = GFX_event_normal_frame_war_chivalry
	# desc = EVTDESC_CHI_410
	
	desc = {
		trigger = {
			check_variable = { which = physique_variable value = 0 }
		}
		text = EVTDESC_CHI_410_FAT
		picture = GFX_evt_dharmic_pilgrims
	}
	desc = {
		trigger = {
			NOT = { check_variable = { which = physique_variable value = 0 } }
		}
		text = EVTDESC_CHI_410_THIN
		picture = GFX_evt_fancy_feast
	}
	
	is_triggered_only = yes

	option = { #is_fat
		name = EVTOPTA_CHI_410
		trigger = { check_variable = { which = physique_variable value = 0 } }
		hidden_tooltip = {
			change_variable = { which = physique_variable value = -2 }
			weight_trait_check_effect = yes
		}
		add_character_modifier = {
			name = chivalry_gym_burning
			duration = 90
		}
		if = {
			limit = {
				check_variable = { which = physique_variable value = -5 }
				NOT = { check_variable = { which = physique_variable value = 5 } }
			}
			hidden_tooltip = { remove_character_modifier = chivalry_gym_shape }
			add_character_modifier = {
				name = chivalry_gym_shape
				duration = 300
			}
		}
	}
	option = { #is_malnourished
		name = EVTOPTB_CHI_410
		trigger = { NOT = { check_variable = { which = physique_variable value = 0 } } }
		hidden_tooltip = {
			change_variable = { which = physique_variable value = 2 }
			weight_trait_check_effect = yes
		}
		scaled_wealth = { value = -0.1 min = -15 }
		if = {
			limit = {
				check_variable = { which = physique_variable value = -5 }
				NOT = { check_variable = { which = physique_variable value = 5 } }
			}
			hidden_tooltip = { remove_character_modifier = chivalry_gym_shape }
			add_character_modifier = {
				name = chivalry_gym_shape
				duration = 300
			}
		}
	}
}

##################Grand Champion
character_event = {
	id = CHI.420
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_bloodlines
	desc = EVTDESC_CHI_420
	
	is_triggered_only = yes

	option = { #Champion
		name = EVTOPTA_CHI_420
		sound_effect = bloodline_added
		trigger_switch = {
			on_trigger = society_member_of
			society_western_guild			= { create_bloodline = { type = western_champion_bloodline } }
			society_southern_guild			= { create_bloodline = { type = southern_champion_bloodline } }
			society_northern_guild			= { create_bloodline = { type = northern_champion_bloodline } }
			society_eastern_guild			= { create_bloodline = { type = eastern_champion_bloodline } }
			society_generic_fighter_guild	= { create_bloodline = { type = generic_champion_bloodline } }
			society_risk_fighter_guild		= { create_bloodline = { type = risk_champion_bloodline } }
			society_female_fighter_guild	= { create_bloodline = { type = female_champion_bloodline } }
		}
	}
	option = { #Nickname
		name = EVTOPTB_CHI_420
		give_nickname = chivalry_champion_nick
		sound_effect = bloodline_added
		trigger_switch = {
			on_trigger = society_member_of
			society_western_guild			= { create_bloodline = { type = western_champion_bloodline } }
			society_southern_guild			= { create_bloodline = { type = southern_champion_bloodline } }
			society_northern_guild			= { create_bloodline = { type = northern_champion_bloodline } }
			society_eastern_guild			= { create_bloodline = { type = eastern_champion_bloodline } }
			society_generic_fighter_guild	= { create_bloodline = { type = generic_champion_bloodline } }
			society_risk_fighter_guild		= { create_bloodline = { type = risk_champion_bloodline } }
			society_female_fighter_guild	= { create_bloodline = { type = female_champion_bloodline } }
		}
	}
	option = { #remove rivals
		name = EVTOPTC_CHI_420
		trigger = { any_rival = { always = yes } }
		any_rival = {
			remove_rival = ROOT
		}
		sound_effect = bloodline_added
		trigger_switch = {
			on_trigger = society_member_of
			society_western_guild			= { create_bloodline = { type = western_champion_bloodline } }
			society_southern_guild			= { create_bloodline = { type = southern_champion_bloodline } }
			society_northern_guild			= { create_bloodline = { type = northern_champion_bloodline } }
			society_eastern_guild			= { create_bloodline = { type = eastern_champion_bloodline } }
			society_generic_fighter_guild	= { create_bloodline = { type = generic_champion_bloodline } }
			society_risk_fighter_guild		= { create_bloodline = { type = risk_champion_bloodline } }
			society_female_fighter_guild	= { create_bloodline = { type = female_champion_bloodline } }
		}
	}
	option = { #get proud
		name = EVTOPTD_CHI_420
		trigger = { NOT = { trait = proud } }
		add_trait = proud
		sound_effect = bloodline_added
		trigger_switch = {
			on_trigger = society_member_of
			society_western_guild			= { create_bloodline = { type = western_champion_bloodline } }
			society_southern_guild			= { create_bloodline = { type = southern_champion_bloodline } }
			society_northern_guild			= { create_bloodline = { type = northern_champion_bloodline } }
			society_eastern_guild			= { create_bloodline = { type = eastern_champion_bloodline } }
			society_generic_fighter_guild	= { create_bloodline = { type = generic_champion_bloodline } }
			society_risk_fighter_guild		= { create_bloodline = { type = risk_champion_bloodline } }
			society_female_fighter_guild	= { create_bloodline = { type = female_champion_bloodline } }
		}
	}
}

##################Forced Crusade
character_event = { #delay ping
	id = CHI.430
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		character_event = { id = CHI.431 days = 90 }
	}
}

#Forced Crusade check
character_event = { #ping
	id = CHI.431
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		#northen and other crusade maybe
		any_player = {
			limit = {
				NOR = {
					has_pledged_crusade_defense = yes
					has_pledged_crusade_participation = yes
				}
			}
			clr_character_flag = forced_to_crusade
			clr_character_flag = asked_to_pledge
		}
		if = { #new christian crusader stuff
			limit = {
				uses_new_crusade = yes
				# OR = {
					# religion = catholic
					# religion = fraticelli
				# }
			}
			crusade_target_char = {
				save_event_target_as = crusade_defender
			}
			any_player = { #ask to join your crusade
				limit = {
					NOT = { character = ROOT }
					religion = ROOT
					OR = {
						has_holy_order_government = yes
						is_holyorder_societies_trigger = yes
					}
					has_pledged_crusade_participation = no
				}
				if = { #tell grand master
					limit = {
						is_holyorder_societies_trigger = yes
					}
					character_event = { id = CHI.432 }
				}
				else_if = { #order HO to join
					character_event = { id = CHI.433 }
				}
			}
			any_player = { #defender against the crusade
				limit = {
					NOT = { character = event_target:crusade_defender }
					religion = event_target:crusade_defender
					OR = {
						has_holy_order_government = yes
						is_holyorder_societies_trigger = yes
					}
					has_pledged_crusade_defense = no 
				}
				if = { #tell grand master
					limit = {
						is_holyorder_societies_trigger = yes
					}
					character_event = { id = CHI.436 }
				}
				else_if = { #order HO to join
					character_event = { id = CHI.437 }
				}
			}
		}
		else = { #join old crusade
			if = {
				limit = {
					any_war = {
						OR = {
							using_cb = crusade
							using_cb = new_crusade
							using_cb = religious
							using_cb = muslim_invasion
							using_cb = buddhist_holy_war
							using_cb = pagan_holy_war
							using_cb = northern_crusade_war
							using_cb = reconquista_leon
							using_cb = reconquista_castille
							using_cb = reconquista_aragon
							using_cb = reconquista_galicia
							using_cb = reconquista_beja
							using_cb = reconquista_granada
							using_cb = reconquista_cordoba
							using_cb = reconquista_valencia
							using_cb = reconquista_navarra
							using_cb = reconquista_balearic
						}
						any_attacker = { 
							character = ROOT
							is_primary_war_attacker = yes
						}
						any_defender = { 
							NOT = { religion = ROOT }
							is_primary_war_defender = yes
						}
					}
				}
				any_war = {
					limit = {
						OR = {
							using_cb = crusade
							using_cb = new_crusade
							using_cb = religious
							using_cb = muslim_invasion
							using_cb = buddhist_holy_war
							using_cb = pagan_holy_war
							using_cb = northern_crusade_war
							using_cb = reconquista_leon
							using_cb = reconquista_castille
							using_cb = reconquista_aragon
							using_cb = reconquista_galicia
							using_cb = reconquista_beja
							using_cb = reconquista_granada
							using_cb = reconquista_cordoba
							using_cb = reconquista_valencia
							using_cb = reconquista_navarra
							using_cb = reconquista_balearic
						}
						any_attacker = { 
							character = ROOT
							is_primary_war_attacker = yes
						}
						any_defender = { 
							NOT = { religion = ROOT }
							is_primary_war_defender = yes
						}
					}
					any_defender = { 
						limit = {
							NOT = { religion = ROOT }
							is_primary_war_defender = yes
						}
						save_event_target_as = crusade_defender
					}
				}
			}
			else = {
				any_war = {
					limit = {
						OR = {
							using_cb = crusade
							using_cb = new_crusade
							using_cb = religious
							using_cb = muslim_invasion
							using_cb = buddhist_holy_war
							using_cb = pagan_holy_war
							using_cb = northern_crusade_war
							using_cb = reconquista_leon
							using_cb = reconquista_castille
							using_cb = reconquista_aragon
							using_cb = reconquista_galicia
							using_cb = reconquista_beja
							using_cb = reconquista_granada
							using_cb = reconquista_cordoba
							using_cb = reconquista_valencia
							using_cb = reconquista_navarra
							using_cb = reconquista_balearic
						}
						any_defender = { 
							character = ROOT
							is_primary_war_defender = yes
						}
						any_attacker = { 
							NOT = { religion = ROOT }
							is_primary_war_attacker = yes
						}
					}
					any_attacker = { 
						limit = {
							NOT = { religion = ROOT }
							is_primary_war_attacker = yes
						}
						save_event_target_as = crusade_defender
					}
				}
			}
			any_player = {
				limit = {
					NOT = { character = ROOT }
					religion = ROOT
					OR = {
						has_holy_order_government = yes
						is_holyorder_societies_trigger = yes
					}
					OR = {
						war = no
						any_war = {
							NOR = {
								using_cb = crusade
								using_cb = new_crusade
								using_cb = religious
								using_cb = muslim_invasion
								using_cb = buddhist_holy_war
								using_cb = pagan_holy_war
								using_cb = northern_crusade_war
								using_cb = reconquista_leon
								using_cb = reconquista_castille
								using_cb = reconquista_aragon
								using_cb = reconquista_galicia
								using_cb = reconquista_beja
								using_cb = reconquista_granada
								using_cb = reconquista_cordoba
								using_cb = reconquista_valencia
								using_cb = reconquista_navarra
								using_cb = reconquista_balearic
							}
						}
					}
				}
				if = { #tell grand master
					limit = {
						is_holyorder_societies_trigger = yes
					}
					character_event = { id = CHI.434 }
				}
				else = { #order HO to join
					character_event = { id = CHI.435 }
				}
			}
			any_player = { #defend old crusade
				limit = {
					NOT = { character = event_target:crusade_defender }
					religion = event_target:crusade_defender
					OR = {
						has_holy_order_government = yes
						is_holyorder_societies_trigger = yes
					}
					OR = {
						war = no
						any_war = {
							NOR = {
								using_cb = crusade
								using_cb = new_crusade
								using_cb = religious
								using_cb = muslim_invasion
								using_cb = buddhist_holy_war
								using_cb = pagan_holy_war
								using_cb = northern_crusade_war
								using_cb = reconquista_leon
								using_cb = reconquista_castille
								using_cb = reconquista_aragon
								using_cb = reconquista_galicia
								using_cb = reconquista_beja
								using_cb = reconquista_granada
								using_cb = reconquista_cordoba
								using_cb = reconquista_valencia
								using_cb = reconquista_navarra
								using_cb = reconquista_balearic
							}
						}
					}
				}
				if = { #tell grand master
					limit = {
						is_holyorder_societies_trigger = yes
					}
					character_event = { id = CHI.438 }
				}
				else_if = { #order HO to join
					character_event = { id = CHI.439 }
				}
			}
		}
	}
}

#Forced Crusade tell GM ping
character_event = {
	id = CHI.432
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		society = {
			any_society_member = {
				limit = {
					is_society_grandmaster = yes
				}
				character_event = { id = CHI.4321 }
			}
		}
	}
}

#Forced Crusade GM tell you ping
character_event = {
	id = CHI.4321
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { character_event = { id = CHI.4322 } }
	}
}

#Forced Crusade GM tell you to join
character_event = {
	id = CHI.4322
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_knights_hf
	desc = EVTDESC_CHI_4322
	
	is_triggered_only = yes
	
	option = { #pledge
		name = EVTOPTA_CHI_4322
		pledge_crusade_participation = yes
		set_character_flag = forced_to_crusade
		change_society_currency = 100
		set_character_flag = asked_to_pledge
		hidden_tooltip = {
			add_character_modifier = {
				name = recently_pledged_to_crusade_cooldown
				hidden = yes
				duration = 45
			}

			trigger_switch = {
				on_trigger = tier
				EMPEROR = { add_to_crusade_prestige_pot = 4000 add_to_crusade_piety_pot = 1000 }
				KING = { add_to_crusade_prestige_pot = 2000 add_to_crusade_piety_pot = 600 }
				DUKE = { add_to_crusade_prestige_pot = 1000 add_to_crusade_piety_pot = 400 }
				COUNT = { add_to_crusade_prestige_pot = 500 add_to_crusade_piety_pot = 200 }
				BARON = { add_to_crusade_prestige_pot = 250 add_to_crusade_piety_pot = 200 }
			}

			random = {
				chance = 50
				add_to_crusade_artifact_pot = 1
			}
		}
	}
	option = { #refuse
		name = EVTOPTB_CHI_4322
		leave_society = yes
		piety = -100
		# set_character_flag = asked_to_pledge #no, so pope can ask too
		#maybe add betray/expelled modifier
	}
}

#Forced Crusade Pope order order to join
character_event = {
	id = CHI.433
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_knights_hf
	desc = EVTDESC_CHI_433
	
	is_triggered_only = yes

	option = { #pledge
		name = EVTOPTA_CHI_433
		pledge_crusade_participation = yes
		set_character_flag = forced_to_crusade
		set_character_flag = asked_to_pledge
		piety = 100
		hidden_tooltip = {
			add_character_modifier = {
				name = recently_pledged_to_crusade_cooldown
				hidden = yes
				duration = 45
			}

			trigger_switch = {
				on_trigger = tier
				EMPEROR = { add_to_crusade_prestige_pot = 4000 add_to_crusade_piety_pot = 1000 }
				KING = { add_to_crusade_prestige_pot = 2000 add_to_crusade_piety_pot = 600 }
				DUKE = { add_to_crusade_prestige_pot = 1000 add_to_crusade_piety_pot = 400 }
				COUNT = { add_to_crusade_prestige_pot = 500 add_to_crusade_piety_pot = 200 }
				BARON = { add_to_crusade_prestige_pot = 250 add_to_crusade_piety_pot = 200 }
			}

			random = {
				chance = 50
				add_to_crusade_artifact_pot = 1
			}
		}
	}
	option = { #refuse
		name = EVTOPTB_CHI_433
		custom_tooltip = { text = chivalry_revoked_ho }
		piety = -500
		set_character_flag = asked_to_pledge
		hidden_tooltip = { liege = { save_global_event_target_as = chivalry_merc_liege } }
		if = {
			limit = {
				d_chivalry_holy_hand = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_hand = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_warden = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_warden = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_scion = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_scion = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_rose = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_rose = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_hand_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_hand = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_hand_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_warden_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_warden = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_warden_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_scion_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_scion = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_scion_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_rose_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_rose = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_rose_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_merc_black = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_black = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_cloak = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_cloak = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_falcon = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_falcon = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_hound = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_hound = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_black_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_black = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_black_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_cloak_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_cloak = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_cloak_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_falcon_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_falcon = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_falcon_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_hound_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_hound = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_hound_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		set_government_type = mercenary_government
		if = {
			limit = {
				primary_title = { has_law = chivalry_militarization_0 }
			}
			primary_title = { add_law = chivalry_militarization_1 }
		}
		hidden_tooltip = {
			set_defacto_liege = global_event_target:chivalry_merc_liege
		}
		clear_global_event_target = chivalry_merc_liege
	}
}

#Forced Crusade tell GM ping (old)
character_event = {
	id = CHI.434
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		society = {
			any_society_member = {
				limit = {
					is_society_grandmaster = yes
				}
				character_event = { id = CHI.4341 }
			}
		}
	}
}

#Forced Crusade GM tell you ping (old)
character_event = {
	id = CHI.4341
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { character_event = { id = CHI.4342 } }
	}
}

#Forced Crusade GM tell you to join (old)
character_event = {
	id = CHI.4342
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_knights_hf
	desc = EVTDESC_CHI_4342
	
	is_triggered_only = yes
	
	option = { #pledge
		name = EVTOPTA_CHI_4342
		change_society_currency = 100
		# if = {
			# limit = {
				# rightful_religious_head_scope = {
					# any_war = {
						# OR = {
							# using_cb = crusade
							# using_cb = new_crusade
							# using_cb = religious
							# using_cb = muslim_invasion
							# using_cb = buddhist_holy_war
							# using_cb = pagan_holy_war
						# }
						# any_attacker = { character = PREVPREV }
					# }
				# }
			# }
			# join_attacker_wars = FROMFROMFROM
		# }
		# else = {
			# join_defender_wars = FROMFROMFROM
		# }
		custom_tooltip = {
			text = chivalry_join_pope_war_tt
			FROMFROMFROM = {
				any_war = {
					limit = {
						OR = {
							using_cb = crusade
							using_cb = new_crusade
							using_cb = religious
							using_cb = muslim_invasion
							using_cb = buddhist_holy_war
							using_cb = pagan_holy_war
							using_cb = northern_crusade_war
							using_cb = reconquista_leon
							using_cb = reconquista_castille
							using_cb = reconquista_aragon
							using_cb = reconquista_galicia
							using_cb = reconquista_beja
							using_cb = reconquista_granada
							using_cb = reconquista_cordoba
							using_cb = reconquista_valencia
							using_cb = reconquista_navarra
							using_cb = reconquista_balearic
						}
					}
					ROOT = {
						join_attacker_wars = PREV
					}
				}
			}
		}
		# join_attacker_wars = FROMFROMFROM
		# hidden_tooltip = {
			# join_attacker_wars = FROMFROMFROM
			# join_attacker_wars = FROMFROMFROM
			# join_attacker_wars = FROMFROMFROM
		# }
	}
	option = { #refuse
		name = EVTOPTB_CHI_4342
		leave_society = yes
		piety = -100
		#maybe add betray/expelled modifier
	}
}

#Forced Crusade Pope order order to join (old)
character_event = {
	id = CHI.435
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_knights_hf
	desc = EVTDESC_CHI_435
	
	is_triggered_only = yes

	option = { #pledge
		name = EVTOPTA_CHI_435
		piety = 100
		# if = {
			# limit = {
				# rightful_religious_head_scope = {
					# any_war = {
						# OR = {
							# using_cb = crusade
							# using_cb = new_crusade
							# using_cb = religious
							# using_cb = muslim_invasion
							# using_cb = buddhist_holy_war
							# using_cb = pagan_holy_war
						# }
						# any_attacker = { character = PREVPREV }
					# }
				# }
			# }
			# join_attacker_wars = FROM
		# }
		# else = {
			# join_defender_wars = FROM
		# }
		custom_tooltip = {
				text = chivalry_join_pope_war_tt
			FROM = {
				any_war = {
					limit = {
						OR = {
							using_cb = crusade
							using_cb = new_crusade
							using_cb = religious
							using_cb = muslim_invasion
							using_cb = buddhist_holy_war
							using_cb = pagan_holy_war
							using_cb = northern_crusade_war
							using_cb = reconquista_leon
							using_cb = reconquista_castille
							using_cb = reconquista_aragon
							using_cb = reconquista_galicia
							using_cb = reconquista_beja
							using_cb = reconquista_granada
							using_cb = reconquista_cordoba
							using_cb = reconquista_valencia
							using_cb = reconquista_navarra
							using_cb = reconquista_balearic
						}
					}
					ROOT = {
						join_attacker_wars = PREV
					}
				}
			}
		}
		# join_attacker_wars = FROM
		# hidden_tooltip = {
			# join_attacker_wars = FROM
			# join_attacker_wars = FROM
			# join_attacker_wars = FROM
		# }
	}
	option = { #refuse
		name = EVTOPTB_CHI_435
		custom_tooltip = { text = chivalry_revoked_ho }
		piety = -500
		hidden_tooltip = { liege = { save_global_event_target_as = chivalry_merc_liege } }
		if = {
			limit = {
				d_chivalry_holy_hand = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_hand = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_warden = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_warden = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_scion = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_scion = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_rose = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_rose = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_hand_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_hand = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_hand_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_warden_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_warden = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_warden_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_scion_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_scion = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_scion_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_rose_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_rose = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_rose_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_merc_black = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_black = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_cloak = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_cloak = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_falcon = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_falcon = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_hound = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_hound = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_black_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_black = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_black_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_cloak_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_cloak = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_cloak_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_falcon_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_falcon = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_falcon_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_hound_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_hound = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_hound_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		set_government_type = mercenary_government
		if = {
			limit = {
				primary_title = { has_law = chivalry_militarization_0 }
			}
			primary_title = { add_law = chivalry_militarization_1 }
		}
		hidden_tooltip = {
			set_defacto_liege = global_event_target:chivalry_merc_liege
		}
		clear_global_event_target = chivalry_merc_liege
	}
}

#Forced Crusade tell GM ping (defender)
character_event = {
	id = CHI.436
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		society = {
			any_society_member = {
				limit = {
					is_society_grandmaster = yes
				}
				character_event = { id = CHI.4361 }
			}
		}
	}
}

#Forced Crusade GM tell you ping (defender)
character_event = {
	id = CHI.4361
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { character_event = { id = CHI.4362 } }
	}
}

#Forced Crusade GM tell you to join (defender)
character_event = {
	id = CHI.4362
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_knights_hf
	desc = EVTDESC_CHI_4362
	
	is_triggered_only = yes
	
	immediate = {
		clr_character_flag = forced_to_crusade
	}

	option = { #pledge
		name = EVTOPTA_CHI_4362
		pledge_crusade_defense = yes
		set_character_flag = forced_to_crusade
		set_character_flag = asked_to_pledge
		change_society_currency = 100

	}
	option = { #refuse
		name = EVTOPTB_CHI_4362
		leave_society = yes
		piety = -100
		# set_character_flag = asked_to_pledge #no, so pope can ask too
		#maybe add betray/expelled modifier
	}
}

#Forced Crusade tell defender ping (defender)
character_event = {
	id = CHI.437
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		event_target:crusade_defender = {
			character_event = { id = CHI.4371 }
		}
	}
}

#Forced Crusade defender tell you ping (defender)
character_event = {
	id = CHI.4371
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { character_event = { id = CHI.4372 } }
	}
}

#Forced Crusade defender order you to join (defender)
character_event = {
	id = CHI.4372
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_knights_hf
	desc = EVTDESC_CHI_4372
	
	is_triggered_only = yes

	immediate = {
		clr_character_flag = forced_to_crusade
	}
	
	option = { #pledge
		name = EVTOPTA_CHI_4372
		pledge_crusade_defense = yes
		set_character_flag = forced_to_crusade
		set_character_flag = asked_to_pledge
		piety = 100
	}
	option = { #refuse
		name = EVTOPTB_CHI_4372
		custom_tooltip = { text = chivalry_revoked_ho }
		piety = -500
		set_character_flag = asked_to_pledge
		hidden_tooltip = { liege = { save_global_event_target_as = chivalry_merc_liege } }
		if = {
			limit = {
				d_chivalry_holy_hand = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_hand = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_warden = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_warden = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_scion = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_scion = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_rose = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_rose = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_hand_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_hand = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_hand_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_warden_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_warden = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_warden_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_scion_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_scion = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_scion_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_rose_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_rose = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_rose_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_merc_black = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_black = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_cloak = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_cloak = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_falcon = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_falcon = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_hound = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_hound = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_black_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_black = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_black_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_cloak_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_cloak = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_cloak_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_falcon_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_falcon = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_falcon_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_hound_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_hound = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_hound_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		set_government_type = mercenary_government
		if = {
			limit = {
				primary_title = { has_law = chivalry_militarization_0 }
			}
			primary_title = { add_law = chivalry_militarization_1 }
		}
		hidden_tooltip = {
			set_defacto_liege = global_event_target:chivalry_merc_liege
		}
		clear_global_event_target = chivalry_merc_liege
	}
}

#Forced Crusade tell GM ping (old) (defender)
character_event = {
	id = CHI.438
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		society = {
			any_society_member = {
				limit = {
					is_society_grandmaster = yes
				}
				character_event = { id = CHI.4381 }
			}
		}
	}
}

#Forced Crusade GM tell you ping (old) (defender)
character_event = {
	id = CHI.4381
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { character_event = { id = CHI.4382 } }
	}
}

#Forced Crusade GM tell you to join (old) (defender)
character_event = {
	id = CHI.4382
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_knights_hf
	desc = EVTDESC_CHI_4382
	
	is_triggered_only = yes
	
	option = { #pledge
		name = EVTOPTA_CHI_4382
		change_society_currency = 100
		# if = {
			# limit = {
				# event_target:crusade_defender = {
					# any_war = {
						# OR = {
							# using_cb = crusade
							# using_cb = new_crusade
							# using_cb = religious
							# using_cb = muslim_invasion
							# using_cb = buddhist_holy_war
							# using_cb = pagan_holy_war
						# }
						# any_attacker = { character = event_target:crusade_defender }
					# }
				# }
			# }
			# join_attacker_wars = event_target:crusade_defender
		# }
		# else = {
			# join_defender_wars = event_target:crusade_defender
		# }
		custom_tooltip = {
			text = chivalry_join_defender_war_tt
			event_target:crusade_defender = {
				any_war = {
					limit = {
						OR = {
							using_cb = crusade
							using_cb = new_crusade
							using_cb = religious
							using_cb = muslim_invasion
							using_cb = buddhist_holy_war
							using_cb = pagan_holy_war
							using_cb = northern_crusade_war
							using_cb = reconquista_leon
							using_cb = reconquista_castille
							using_cb = reconquista_aragon
							using_cb = reconquista_galicia
							using_cb = reconquista_beja
							using_cb = reconquista_granada
							using_cb = reconquista_cordoba
							using_cb = reconquista_valencia
							using_cb = reconquista_navarra
							using_cb = reconquista_balearic
						}
					}
					ROOT = {
						join_defender_wars = PREV
					}
				}
			}
		}
		# join_defender_wars = event_target:crusade_defender
		# hidden_tooltip = {
			# join_defender_wars = event_target:crusade_defender
			# join_defender_wars = event_target:crusade_defender
			# join_defender_wars = event_target:crusade_defender
		# }
	}
	option = { #refuse
		name = EVTOPTB_CHI_4382
		leave_society = yes
		piety = -100
		#maybe add betray/expelled modifier
	}
}

#Forced Crusade tell defender ping (old) (defender)
character_event = {
	id = CHI.439
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		event_target:crusade_defender = {
			character_event = { id = CHI.4391 }
		}
	}
}

#Forced Crusade defender tell you ping (old) (defender)
character_event = {
	id = CHI.4391
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { character_event = { id = CHI.4392 } }
	}
}

#Forced Crusade defender order you to join (old) (defender)
character_event = {
	id = CHI.4392
	border = GFX_event_normal_frame_war_chivalry
	picture = GFX_evt_mounted_knights_hf
	desc = EVTDESC_CHI_4392
	
	is_triggered_only = yes

	option = { #pledge
		name = EVTOPTA_CHI_4392
		piety = 100
		# if = {
			# limit = {
				# event_target:crusade_defender = {
					# any_war = {
						# OR = {
							# using_cb = crusade
							# using_cb = new_crusade
							# using_cb = religious
							# using_cb = muslim_invasion
							# using_cb = buddhist_holy_war
							# using_cb = pagan_holy_war
						# }
						# any_attacker = { character = event_target:crusade_defender }
					# }
				# }
			# }
			# join_attacker_wars = event_target:crusade_defender
		# }
		# else = {
			# join_defender_wars = event_target:crusade_defender
		# }
		custom_tooltip = {
			text = chivalry_join_defender_war_tt
			event_target:crusade_defender = {
				any_war = {
					limit = {
						OR = {
							using_cb = crusade
							using_cb = new_crusade
							using_cb = religious
							using_cb = muslim_invasion
							using_cb = buddhist_holy_war
							using_cb = pagan_holy_war
							using_cb = northern_crusade_war
							using_cb = reconquista_leon
							using_cb = reconquista_castille
							using_cb = reconquista_aragon
							using_cb = reconquista_galicia
							using_cb = reconquista_beja
							using_cb = reconquista_granada
							using_cb = reconquista_cordoba
							using_cb = reconquista_valencia
							using_cb = reconquista_navarra
							using_cb = reconquista_balearic
						}
					}
					ROOT = {
						join_defender_wars = PREV
					}
				}
			}
		}
		# join_defender_wars = event_target:crusade_defender
		# hidden_tooltip = {
			# join_defender_wars = event_target:crusade_defender
			# join_defender_wars = event_target:crusade_defender
			# join_defender_wars = event_target:crusade_defender
		# }
	}
	option = { #refuse
		name = EVTOPTB_CHI_4392
		custom_tooltip = { text = chivalry_revoked_ho }
		piety = -500
		hidden_tooltip = { liege = { save_global_event_target_as = chivalry_merc_liege } }
		if = {
			limit = {
				d_chivalry_holy_hand = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_hand = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_warden = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_warden = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_scion = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_scion = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_rose = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_holy_rose = { set_title_flag = chivalry_merc_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_hand_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_hand = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_hand_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_warden_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_warden = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_warden_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_scion_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_scion = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_scion_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_rose_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_holy_rose = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
					set_title_flag = chivalry_merc_title
				}
				d_chivalry_holy_rose_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_merc_black = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_black = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_cloak = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_cloak = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_falcon = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_falcon = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_merc_hound = { holder_scope = { character = ROOT  } }
			}
			d_chivalry_merc_hound = { clr_title_flag = chivalry_holy_title }
		}
		else_if = {
			limit = {
				d_chivalry_holy_black_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_black = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_black_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_cloak_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_cloak = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_cloak_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_falcon_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_falcon = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_falcon_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		else_if = {
			limit = {
				d_chivalry_holy_hound_true = { holder_scope = { character = ROOT  } }
			}
			hidden_tooltip = {
				d_chivalry_merc_hound = {
					grant_title = ROOT
					make_primary_title = yes
					culture = ROOT
					religion = ROOT
				}
				d_chivalry_holy_hound_true = { unsafe_destroy_landed_title = THIS }
			}
		}
		set_government_type = mercenary_government
		if = {
			limit = {
				primary_title = { has_law = chivalry_militarization_0 }
			}
			primary_title = { add_law = chivalry_militarization_1 }
		}
		hidden_tooltip = {
			set_defacto_liege = global_event_target:chivalry_merc_liege
		}
		clear_global_event_target = chivalry_merc_liege
	}
}